
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>NH3 Mapping Observations with the K-Band Focal Plane Array (KFPA) on the GBT &#8212; GBT Docs 0.1 documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b76e3c8a" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/sphinx-book-theme.css?v=a3416100" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/tabs.css?v=4c969af8" />
    <link rel="stylesheet" type="text/css" href="../_static/css/tooltipster.custom.css?v=7bc2f056" />
    <link rel="stylesheet" type="text/css" href="../_static/css/tooltipster.bundle.min.css?v=37217874" />
    <link rel="stylesheet" type="text/css" href="../_static/css/tooltipster-sideTip-shadow.min.css?v=6227e517" />
    <link rel="stylesheet" type="text/css" href="../_static/css/tooltipster-sideTip-punk.min.css?v=94669e23" />
    <link rel="stylesheet" type="text/css" href="../_static/css/tooltipster-sideTip-noir.min.css?v=21a39f42" />
    <link rel="stylesheet" type="text/css" href="../_static/css/tooltipster-sideTip-light.min.css?v=a18b2449" />
    <link rel="stylesheet" type="text/css" href="../_static/css/tooltipster-sideTip-borderless.min.css?v=dbff53e4" />
    <link rel="stylesheet" type="text/css" href="../_static/css/micromodal.css?v=d7bf34ee" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css?v=0a3b3ea7" />
    <link rel="stylesheet" type="text/css" href="../_static/css/custom.css?v=04af0cc0" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="../_static/documentation_options.js?v=e1a75a79"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=f281be69"></script>
    <script src="../_static/tabs.js?v=3ee01567"></script>
    <script src="../_static/js/hoverxref.js?v=c9b52ebc"></script>
    <script src="../_static/js/tooltipster.bundle.min.js?v=18bf091b"></script>
    <script src="../_static/js/micromodal.min.js?v=04d6302d"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script src="../_static/design-tabs.js?v=36754332"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'tutorials/kfpa_nh3_mapping_tutorial';</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="How-To Guides" href="../how-tos/index.html" />
    <link rel="prev" title="HI Position Switched (psw) Spectrum" href="hi_psw_tutorial.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search..."
         aria-label="Search..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/GBO-vertical-PGGradient.svg" class="logo__image only-light" alt="GBT Docs 0.1 documentation - Home"/>
    <script>document.write(`<img src="../_static/GBO-vertical-PGGradient.svg" class="logo__image only-dark" alt="GBT Docs 0.1 documentation - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        <ul class="current nav bd-sidenav">
<li class="toctree-l1 current active has-children"><a class="reference internal" href="index.html"><svg aria-hidden="true" class="sd-octicon sd-octicon-mortar-board orange" height="2.0em" version="1.1" viewbox="0 0 24 24" width="2.0em"><path d="M12.292 2.06a.75.75 0 00-.584 0L.458 6.81a.75.75 0 000 1.38L4.25 9.793v3.803a2.901 2.901 0 00-1.327.757c-.579.58-.923 1.41-.923 2.43v4.5c0 .248.128.486.335.624.06.04.117.073.22.124.124.062.297.138.52.213.448.149 1.09.288 1.925.288s1.477-.14 1.925-.288c.223-.075.396-.15.52-.213a2.11 2.11 0 00.21-.117A.762.762 0 008 21.28v-4.5c0-1.018-.344-1.85-.923-2.428a2.9 2.9 0 00-1.327-.758v-3.17l5.958 2.516a.75.75 0 00.584 0l5.208-2.2v4.003a2.552 2.552 0 01-.079.085 4.057 4.057 0 01-.849.65c-.826.488-2.255 1.021-4.572 1.021-.612 0-1.162-.037-1.654-.1a.75.75 0 00-.192 1.487c.56.072 1.173.113 1.846.113 2.558 0 4.254-.592 5.334-1.23.538-.316.914-.64 1.163-.896a2.84 2.84 0 00.392-.482h.001A.75.75 0 0019 15v-4.892l4.542-1.917a.75.75 0 000-1.382l-11.25-4.75zM5 15c-.377 0-.745.141-1.017.413-.265.265-.483.7-.483 1.368v4.022c.299.105.797.228 1.5.228s1.201-.123 1.5-.228V16.78c0-.669-.218-1.103-.483-1.368A1.431 1.431 0 005 15zm7-3.564L2.678 7.5 12 3.564 21.322 7.5 12 11.436z" fill-rule="evenodd"></path></svg> Tutorials</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="hi_psw_tutorial.html">HI Position Switched (psw) Spectrum</a></li>
<li class="toctree-l2 current active"><a class="current reference internal" href="#">NH<sub>3</sub> Mapping Observations with the K-Band Focal Plane Array (KFPA) on the GBT</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../how-tos/index.html"><svg aria-hidden="true" class="sd-octicon sd-octicon-terminal green" height="2.0em" version="1.1" viewbox="0 0 24 24" width="2.0em"><path d="M9.25 12a.75.75 0 01-.22.53l-2.75 2.75a.75.75 0 01-1.06-1.06L7.44 12 5.22 9.78a.75.75 0 111.06-1.06l2.75 2.75c.141.14.22.331.22.53zm2 2a.75.75 0 000 1.5h5a.75.75 0 000-1.5h-5z"></path><path d="M0 4.75C0 3.784.784 3 1.75 3h20.5c.966 0 1.75.784 1.75 1.75v14.5A1.75 1.75 0 0122.25 21H1.75A1.75 1.75 0 010 19.25V4.75zm1.75-.25a.25.25 0 00-.25.25v14.5c0 .138.112.25.25.25h20.5a.25.25 0 00.25-.25V4.75a.25.25 0 00-.25-.25H1.75z" fill-rule="evenodd"></path></svg> How-To Guides</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/infrastructure/remote-connection.html">How to connect remotely to the GBO network</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/general_guides/gbt_observing.html">GBT observations 101</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/observing_modes/C-band_Mueller_matrix.html">How to derive a Mueller matrix</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../how-tos/observing_modes/pulsars.html">Pulsar observing How-To Guides</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../how-tos/observing_modes/pulsars/pulsar_time_obs.html">Timing Observations of a Known Pulsar</a></li>
<li class="toctree-l3"><a class="reference internal" href="../how-tos/observing_modes/pulsars/pulsar_flux_cal.html">Pulsar-Mode Flux Calibration Observations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../how-tos/observing_modes/pulsars/pulsar_search.html">Pulsar Search Observations</a></li>
</ul>
</details></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/receivers/argus/argus_obs.html">How to observe using Argus</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../how-tos/receivers/mustang2.html">MUSTANG-2 How-To Guides</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../how-tos/receivers/mustang2/mustang2_proposal.html">How to Propose with MUSTANG-2</a></li>
<li class="toctree-l3"><a class="reference internal" href="../how-tos/receivers/mustang2/mustang2_calc_obs_time.html">How to Calculate Observing Time Required for MUSTANG-2</a></li>
<li class="toctree-l3"><a class="reference internal" href="../how-tos/receivers/mustang2/mustang2_obs_scripts.html">How to Prepare MUSTANG-2 Observing Scripts</a></li>
<li class="toctree-l3"><a class="reference internal" href="../how-tos/receivers/mustang2/mustang2_setup.html">How to setup MUSTANG-2</a></li>
<li class="toctree-l3"><a class="reference internal" href="../how-tos/receivers/mustang2/mustang2_obs.html">How to observe with MUSTANG-2</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../how-tos/receivers/mustang2/mustang2_data.html">MUSTANG-2 data</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l4"><a class="reference internal" href="../how-tos/receivers/mustang2/data/mustang2_deliverables.html">MUSTANG-2 Deliverables</a></li>
</ul>
</details></li>
</ul>
</details></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/data_reduction/gbtidl.html">How to process spectra using GBTIDL (examples)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/data_reduction/calculate_opacity.html">How to account for sky opacity in GBT Observations</a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="../explanations/index.html"><svg aria-hidden="true" class="sd-octicon sd-octicon-repo purple" height="2.0em" version="1.1" viewbox="0 0 24 24" width="2.0em"><path d="M3 2.75A2.75 2.75 0 015.75 0h14.5a.75.75 0 01.75.75v20.5a.75.75 0 01-.75.75h-6a.75.75 0 010-1.5h5.25v-4H6A1.5 1.5 0 004.5 18v.75c0 .716.43 1.334 1.05 1.605a.75.75 0 01-.6 1.374A3.25 3.25 0 013 18.75v-16zM19.5 1.5V15H6c-.546 0-1.059.146-1.5.401V2.75c0-.69.56-1.25 1.25-1.25H19.5z" fill-rule="evenodd"></path><path d="M7 18.25a.25.25 0 01.25-.25h5a.25.25 0 01.25.25v5.01a.25.25 0 01-.397.201l-2.206-1.604a.25.25 0 00-.294 0L7.397 23.46a.25.25 0 01-.397-.2v-5.01z"></path></svg> Explanation Material</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../references/index.html"><svg aria-hidden="true" class="sd-octicon sd-octicon-tools sd-text-primary" height="2.0em" version="1.1" viewbox="0 0 24 24" width="2.0em"><path d="M7.875 2.292a.125.125 0 00-.032.018A7.24 7.24 0 004.75 8.25a7.247 7.247 0 003.654 6.297c.57.327.982.955.941 1.682v.002l-.317 6.058a.75.75 0 11-1.498-.078l.317-6.062v-.004c.006-.09-.047-.215-.188-.296A8.747 8.747 0 013.25 8.25a8.74 8.74 0 013.732-7.169 1.547 1.547 0 011.709-.064c.484.292.809.835.809 1.46v4.714a.25.25 0 00.119.213l2.25 1.385c.08.05.182.05.262 0l2.25-1.385a.25.25 0 00.119-.213V2.478c0-.626.325-1.169.81-1.461a1.547 1.547 0 011.708.064 8.74 8.74 0 013.732 7.17 8.747 8.747 0 01-4.41 7.598c-.14.081-.193.206-.188.296v.004l.318 6.062a.75.75 0 11-1.498.078l-.317-6.058v-.002c-.041-.727.37-1.355.94-1.682A7.247 7.247 0 0019.25 8.25a7.24 7.24 0 00-3.093-5.94.125.125 0 00-.032-.018l-.01-.001c-.003 0-.014 0-.031.01-.036.022-.084.079-.084.177V7.19a1.75 1.75 0 01-.833 1.49l-2.25 1.385a1.75 1.75 0 01-1.834 0l-2.25-1.384A1.75 1.75 0 018 7.192V2.477c0-.098-.048-.155-.084-.176a.062.062 0 00-.031-.011l-.01.001z" fill-rule="evenodd"></path></svg> Reference Guides</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../references/observing_modes/pulsar_reference.html">Pulsar Observing Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="../references/receivers/argus.html">Argus</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../references/receivers/mustang2.html">MUSTANG-2</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../references/receivers/mustang2/mustang2_overview.html">MUSTANG-2 Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="../references/receivers/mustang2/mustang2_instrument_team.html">MUSTANG-2 Instrument Team</a></li>
<li class="toctree-l3"><a class="reference internal" href="../references/receivers/mustang2/mustang2_bandpass.html">MUSTANG-2 Bandpass Information</a></li>
<li class="toctree-l3"><a class="reference internal" href="../references/receivers/mustang2/mustang2_filtering.html">MUSTANG-2 Filtering</a></li>
<li class="toctree-l3"><a class="reference internal" href="../references/receivers/mustang2/mustang2_mapping.html">MUSTANG-2 Mapping Information</a></li>
<li class="toctree-l3"><a class="reference internal" href="../references/receivers/mustang2/mustang2_publications.html">MUSTANG-2 Publications</a></li>
<li class="toctree-l3"><a class="reference internal" href="../references/receivers/mustang2/mustang2_datasets.html">MUSTANG-2 Published Data Sets</a></li>
<li class="toctree-l3"><a class="reference internal" href="../references/receivers/mustang2/mustang2_dev.html">MUSTANG-2 Historical Development</a></li>
</ul>
</details></li>
<li class="toctree-l2"><a class="reference internal" href="../references/software/scheduling-blocks.html">Scheduling Block Commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="../references/software/gbtidl.html">GBTIDL commands</a></li>
</ul>
</details></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/aschmiedeke/gbtdocs" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/aschmiedeke/gbtdocs/issues/new?title=Issue%20on%20page%20%2Ftutorials/kfpa_nh3_mapping_tutorial.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/tutorials/kfpa_nh3_mapping_tutorial.rst" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.rst</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>NH3 Mapping Observations with the K-Band Focal Plane Array (KFPA) on the GBT</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#starting-out">Starting Out</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#scripts-and-configuration">Scripts and Configuration</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#calibration">Calibration</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#point-and-focus-script">Point and Focus Script</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#spectral-line-calibration-observation-script">Spectral Line Calibration Observation Script</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#mapping">Mapping</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#observing">Observing</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id1">Point and Focus Script</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id2">Spectral Line Calibration Observation Script</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#mapping-script">Mapping Script</a></li>
</ul>
</li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="nh3-mapping-observations-with-the-k-band-focal-plane-array-kfpa-on-the-gbt">
<span id="kfpa-nh3-mapping-tutorial"></span><h1>NH<sub>3</sub> Mapping Observations with the K-Band Focal Plane Array (KFPA) on the GBT<a class="headerlink" href="#nh3-mapping-observations-with-the-k-band-focal-plane-array-kfpa-on-the-gbt" title="Link to this heading">#</a></h1>
<p>This tutorial walks you through the process of conducting a set of observations using the KFPA on the GBT. We will observe the first two inversion transitions of ammonia (J,K = 1, 1 and 2,2) towards the active star-forming region W51.</p>
<p>This tutorial assumes your scientific proposal has been accepted. It will then walk you through observational setup, observing, and data reduction providing a dataset ready for use in scientific analysis.</p>
<div class="note admonition">
<p class="admonition-title">What you should already know</p>
<p>You need a GBO computing account. You should be relatively familiar with using the command line, and starting AstrID.</p>
<p>General instructions for using AstrID, as well as starting CLEO, contacting the operator, etc. are addressed at <a class="reference external" href="https://gbtdocs.readthedocs.io/en/latest/how-tos/general_guides/gbt_observing.html">https://gbtdocs.readthedocs.io/en/latest/how-tos/general_guides/gbt_observing.html</a>.</p>
</div>
<div class="admonition-data admonition">
<p class="admonition-title">Data</p>
<p>The data we will be working with in this tutorial is taken from a set of observations of the RAMPS project. RAMPS observed a section of the Galactic Plane (40°&gt;l&gt;10°; b&lt;|0.4°|) at frequencies including the ammonia (J,K = 1,1 and 2,2) inversion transition lines. These data are accessible at /home/scratch/lmorgan/Observer_Training/QuickGuides/KFPA/Data/RAMPS/RAMPS_W51.raw.vegas.</p>
</div>
<section id="starting-out">
<h2>Starting Out<a class="headerlink" href="#starting-out" title="Link to this heading">#</a></h2>
<p>Congratulations! Your scientific proposal to use the GBT has been accepted. You want to map the ammonia (J,K = 1,1 and 2,2) emission coming from the W51 active star-forming region. Now, your assigned project friend should reach out to you in plenty of time before the next observing semester starts to introduce themselves and offer any assistance that you may need in order to prepare for your observations. If you have not heard from your project friend yet and would like to take the initiative, you can find out who the project friend is either from your disposition notice (emailed out when your project is accepted) or by logging into the Dynamic Scheduling System (DSS) at  dss.gb.nrao.edu. You will first need your NRAO proposal submission tool credentials to login.</p>
</section>
<section id="scripts-and-configuration">
<h2>Scripts and Configuration<a class="headerlink" href="#scripts-and-configuration" title="Link to this heading">#</a></h2>
<p>In order to perform observations with the GBT, you will write scripts using Python (currently v2.7). Normally, these scripts are written, saved and executed using the AstrID GUI. The full use and functionality of AstrID is covered elsewhere and will only be addressed here where it is specifically applicable to this particular project.</p>
<p>The first step we will follow in this guide is to establish general observing procedures. Scripts can then be constructed to carry out those procedures.</p>
<section id="calibration">
<h3>Calibration<a class="headerlink" href="#calibration" title="Link to this heading">#</a></h3>
<p>Good observing procedure in general is to first perform the necessary calibration scans for whatever set of observations is being undertaken, followed by the scientific observations themselves. When using the KFPA, what constitutes ‘necessary calibration’ is not always straightforward. For calibration with the KFPA, at minimum the observer should point and focus the telescope (multiple times if necessary) and (usually) take a reference spectrum that is known to have emission at the frequency of interest. In this case, W51 is both the source we wish to map, as well as a known source of molecular ammonia emission so that it can be used for calibration purposes. It may be that your main science objective is to search for spectral lines that are not already well established, or that the source you are planning to map is not already known to be a source of emission in any of the lines you plan to observe. In these cases, creating a separate configuration which will tune for a spectral line that has been previously observed and/or choosing a separate source known to be a source of a line that you are able to observe would be a reasonable choice.</p>
<section id="point-and-focus-script">
<h4>Point and Focus Script<a class="headerlink" href="#point-and-focus-script" title="Link to this heading">#</a></h4>
<p>First we construct a script that will point and focus the telescope using the KFPA receiver with the command ‘AutoPeakFocus()’.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="n">ResetConfig</span><span class="p">()</span>
<span class="linenos"> 2</span>
<span class="linenos"> 3</span><span class="n">config</span><span class="o">=</span><span class="s2">&quot;&quot;&quot;</span>
<span class="linenos"> 4</span><span class="s2">receiver            = &#39;RcvrArray18_26&#39;</span>
<span class="linenos"> 5</span><span class="s2">beam                = &#39;All&#39;</span>
<span class="linenos"> 6</span><span class="s2">obstype             = &#39;Spectroscopy&#39;</span>
<span class="linenos"> 7</span><span class="s2">backend             = &#39;VEGAS&#39; </span>
<span class="linenos"> 8</span><span class="s2">restfreq            = 23694.5</span>
<span class="linenos"> 9</span><span class="s2">bandwidth           = 23.44</span>
<span class="linenos">10</span><span class="s2">dopplertrackfreq    = 23694.5</span>
<span class="linenos">11</span><span class="s2">nchan               = 16384</span>
<span class="linenos">12</span><span class="s2">swmode              = &#39;tp&#39;</span>
<span class="linenos">13</span><span class="s2">swtype              = &#39;none&#39;</span>
<span class="linenos">14</span><span class="s2">swper               = 1.0</span>
<span class="linenos">15</span><span class="s2">tint                = 1.0</span>
<span class="linenos">16</span><span class="s2">vlow                = 0</span>
<span class="linenos">17</span><span class="s2">vhigh               = 0</span>
<span class="linenos">18</span><span class="s2">vframe              = &#39;lsrk&#39;</span>
<span class="linenos">19</span><span class="s2">vdef                = &#39;Radio&#39; </span>
<span class="linenos">20</span><span class="s2">noisecal            = &#39;lo&#39;</span>
<span class="linenos">21</span><span class="s2">pol                 = &#39;Circular&#39;</span>
<span class="linenos">22</span><span class="s2">&quot;&quot;&quot;</span>
<span class="linenos">23</span>
<span class="linenos">24</span><span class="n">Configure</span><span class="p">(</span><span class="n">config</span><span class="p">)</span>
<span class="linenos">25</span>
<span class="linenos">26</span><span class="n">W51Source</span> <span class="o">=</span> <span class="n">Location</span><span class="p">(</span><span class="s1">&#39;Galactic&#39;</span><span class="p">,</span> <span class="mf">49.445</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.35</span><span class="p">)</span>
<span class="linenos">27</span><span class="n">AutoPeakFocus</span><span class="p">(</span><span class="n">source</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">location</span><span class="o">=</span><span class="n">W51Source</span><span class="p">)</span>
<span class="linenos">28</span>
</pre></div>
</div>
<dl class="simple">
<dt>The individual components of this script are</dt><dd><ol class="arabic simple">
<li><p><code class="code docutils literal notranslate"><span class="pre">ResetConfig()</span></code> – This command resets the configuration tool values to their defaults and helps to avoid carrying over any settings that the previous GBT observer may have made.</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">config</span> <span class="pre">=</span> <span class="pre">&quot;&quot;</span></code> – This configuration string, labelled <code class="code docutils literal notranslate"><span class="pre">config</span></code> is a set of parameters with their desired values that tell the system how you want to set up your observations. This will be covered in more detail shortly.</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">Configure(config)</span></code> – This command passes the parameter settings in the configuration string to the system itself and sets them. Strictly speaking, it is not necessary to configure the telescope before performing an <code class="xref py py-func docutils literal notranslate"><span class="pre">AutoPeakFocus()</span></code>, as this command performs its own configuration. However, it can be useful to do so, to pre-empt potential issues, such as the wrong receiver (i.e. the receiver that was being used by the previous observer) being selected for observations by mistake.</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">W51Source</span> <span class="pre">=</span> <span class="pre">Location('Galactic',</span> <span class="pre">49.445,</span> <span class="pre">-0.35)</span></code> – This defines the string ‘W51’ as a <code class="xref py py-func docutils literal notranslate"><span class="pre">Location</span> <span class="pre">object</span></code>, which contains the sky coordinates of the source to be observed. This could alternatively be read via a <code class="code docutils literal notranslate"><span class="pre">Catalog()</span></code> function, or input in a different coordinate system.</p></li>
<li><p><code class="xref py py-func docutils literal notranslate"><span class="pre">AutoPeakFocus()</span></code> – For this example, note that the first argument passed to <code class="xref py py-func docutils literal notranslate"><span class="pre">AutoPeakFocus()</span></code> would be the actual source you want to perform the pointing/focus scans on. If you have a particular known source that you would like to use for this purpose, it can be supplied to the command using a catalog source or <code class="xref py py-func docutils literal notranslate"><span class="pre">Location</span> <span class="pre">object</span> <span class="pre">&lt;astrid_commands.Location()</span></code>, similarly to the ‘W51Source object’. For most observers, the actual source used for this purpose is unimportant, so long as the pointing/focus scans are successful and sensible. In this case, we supply ‘None’ as the first argument so that <code class="xref py py-func docutils literal notranslate"><span class="pre">AutoPeakFocus()</span></code> will search for a source automatically. The second argument passed to <code class="xref py py-func docutils literal notranslate"><span class="pre">AutoPeakFocus()</span></code> is the location of the center point of the circle that it will use to search for a valid nearby pointing source. The defaults are that AutoPeakFocus will search for a source of at least 1.0 Jy within a radius of 10 degrees. If it is unable to find one, it will query the user on what they would like to do.</p></li>
</ol>
</dd>
</dl>
</section>
<section id="spectral-line-calibration-observation-script">
<h4>Spectral Line Calibration Observation Script<a class="headerlink" href="#spectral-line-calibration-observation-script" title="Link to this heading">#</a></h4>
<p>Now that we have a pointing/focus script that will place the GBT itself in a good state for science observations, we similarly want to ensure that the backend system is also operating correctly.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="n">config</span><span class="o">=</span><span class="s2">&quot;&quot;&quot;</span>
<span class="linenos"> 2</span><span class="s2">receiver            = &#39;RcvrArray18_26&#39;</span>
<span class="linenos"> 3</span><span class="s2">beam                = &#39;All&#39;</span>
<span class="linenos"> 4</span><span class="s2">obstype             = &#39;Spectroscopy&#39;</span>
<span class="linenos"> 5</span><span class="s2">backend             = &#39;VEGAS&#39; </span>
<span class="linenos"> 6</span><span class="s2">restfreq            = 23694.5, 23722.63</span>
<span class="linenos"> 7</span><span class="s2">bandwidth           = 23.44</span>
<span class="linenos"> 8</span><span class="s2">dopplertrackfreq    = 23694.5</span>
<span class="linenos"> 9</span><span class="s2">nchan               = 16384</span>
<span class="linenos">10</span><span class="s2">swmode              = &#39;tp&#39;</span>
<span class="linenos">11</span><span class="s2">swtype              = &#39;none&#39;</span>
<span class="linenos">12</span><span class="s2">swper               = 1.0</span>
<span class="linenos">13</span><span class="s2">tint                = 1.0</span>
<span class="linenos">14</span><span class="s2">vlow                = 0</span>
<span class="linenos">15</span><span class="s2">vhigh               = 0</span>
<span class="linenos">16</span><span class="s2">vframe              = &#39;lsrk&#39;</span>
<span class="linenos">17</span><span class="s2">vdef                = &#39;Radio&#39; </span>
<span class="linenos">18</span><span class="s2">noisecal            = &#39;lo&#39;</span>
<span class="linenos">19</span><span class="s2">pol                 = &#39;Circular&#39;</span>
<span class="linenos">20</span><span class="s2">&quot;&quot;&quot;</span>
<span class="linenos">21</span>
<span class="linenos">22</span><span class="n">Configure</span><span class="p">(</span><span class="n">config</span><span class="p">)</span>
<span class="linenos">23</span>
<span class="linenos">24</span><span class="n">W51Peak</span> <span class="o">=</span> <span class="n">Location</span><span class="p">(</span><span class="s1">&#39;Galactic&#39;</span><span class="p">,</span> <span class="mf">49.483</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.358</span><span class="p">)</span>
<span class="linenos">25</span><span class="n">W51Off</span> <span class="o">=</span> <span class="n">Location</span><span class="p">(</span><span class="s1">&#39;Galactic&#39;</span><span class="p">,</span> <span class="mf">49.483</span><span class="p">,</span> <span class="mf">0.642</span><span class="p">)</span>
<span class="linenos">26</span>
<span class="linenos">27</span><span class="n">Slew</span><span class="p">(</span><span class="n">W51Off</span><span class="p">)</span>
<span class="linenos">28</span><span class="n">Balance</span><span class="p">()</span>
<span class="linenos">29</span><span class="n">OnOff</span><span class="p">(</span><span class="n">location</span><span class="o">=</span><span class="n">W51Peak</span><span class="p">,</span> 
<span class="linenos">30</span>      <span class="n">referenceOffset</span><span class="o">=</span><span class="n">W51Off</span><span class="p">,</span> 
<span class="linenos">31</span>      <span class="n">scanDuration</span><span class="o">=</span><span class="mf">30.0</span><span class="p">,</span> 
<span class="linenos">32</span>      <span class="n">beamName</span><span class="o">=</span><span class="s1">&#39;1&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>There is no ResetConfig() command in this script - the only system settings that may have changed since running this for our Peak and focus script were made within that script and so are known to us.</p>
</div>
<dl class="simple">
<dt>The following commands in the script are</dt><dd><ol class="arabic simple">
<li><dl class="simple">
<dt><code class="code docutils literal notranslate"><span class="pre">config=&quot;&quot;</span></code> – As we are now planning to use the configuration as defined by this string, it is worthwhile to step through the relevant settings. The parameters particularly relevant to the observations in this guide are described.</dt><dd><ul class="simple">
<li><p><code class="code docutils literal notranslate"><span class="pre">receiver</span> <span class="pre">=</span> <span class="pre">'RcvrArray18_26'</span></code> – Defines the receiver to be used. <code class="code docutils literal notranslate"><span class="pre">'RcvrArray18_26'</span></code> is the string used to identify the KFPA in the GBT system.</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">beam</span> <span class="pre">=</span> <span class="pre">'All'</span></code> – The KFPA comprises seven usable beams, this parameter tells the system which of these seven beams we wish to collect data from.</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">restfreq</span> <span class="pre">=</span> <span class="pre">23694.0,</span> <span class="pre">23722.63</span></code> – The rest frequency or frequencies to be observed. This may be a list or defined as a dictionary. The potential range of inputs for this parameter is very large (and especially so for the KFPA) and can be complicated. Please seek assistance from GBT staff for spectral setups using the KFPA.</p></li>
</ul>
</dd>
</dl>
</li>
<li><p><code class="code docutils literal notranslate"><span class="pre">Configure(config)</span></code> – Passes the configuration settings to the system.</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">W51Peak</span> <span class="pre">=</span> <span class="pre">Location('Galactic',</span> <span class="pre">49.483,</span> <span class="pre">-0.358)</span></code> – This is a slightly different sky position to the one defined as <code class="code docutils literal notranslate"><span class="pre">W51Source</span></code> in the peak and focus script. This <code class="code docutils literal notranslate"><span class="pre">W51Peak</span></code> position is the brightest point of the source in ammonia emission we will be mapping.</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">W51Off</span> <span class="pre">=</span> <span class="pre">Location('Galactic,</span> <span class="pre">49.483,</span> <span class="pre">0.642)</span></code> – This is the position to be used as the reference point for our position-switched observations. For spectral line observations where emission is not expected to be particularly widespread, it is common to simply use an offset of 1 degree, though care should be taken to ensure that this is emission-free.</p></li>
<li><p><code class="xref py py-func docutils literal notranslate"><span class="pre">Slew()</span></code> – This command moves the telescope to the commanded position.</p></li>
<li><p><code class="xref py py-func docutils literal notranslate"><span class="pre">Balance()</span></code> – This command adjusts power settings along the signal pathway to ensure that the system is operating within its optimal response regime for the given inputs. Note that we are balancing here while the telescope is pointed at our reference position. This is to ensure that most contributions to the system temperature (e.g. the atmospheric contribution, a function of elevation) will be similar to our actual observations while, when actually observing our source, we are adding power to the balanced level. Alternatively, we might balance while pointed at the source itself. However, in this case, we expect the source to be quite bright and so contribute significantly to the overall system temperature. By balancing ‘on-source’, we run the risk of ‘underpowering’ the system when moving to our reference position. Severe differences in these levels will have impacts on data quality and should be avoided.</p></li>
<li><p><code class="xref py py-func docutils literal notranslate"><span class="pre">OnOff()</span></code> – This command performs the position-switched observation itself on the provided sky position, using the defined offset as the reference position. Note that we are explicitly using parameter names in this command (e.g. <code class="code docutils literal notranslate"><span class="pre">location=W51Peak</span></code>) while this is not strictly required. Users familiar with writing Astrid scripts may prefer to omit these labels. However, we are including them in this guide for clarity.</p></li>
</ol>
</dd>
</dl>
</section>
</section>
<section id="mapping">
<h3>Mapping<a class="headerlink" href="#mapping" title="Link to this heading">#</a></h3>
<p>Assuming that the pointing/focus and spectral line reference observations proceed without issue, we will then want to proceed to our actual mapping observation. There are many different possible approaches to mapping with the GBT, each with different benefits and drawbacks. The approach followed here is to perform a long scan on a reference position, followed by the map itself, followed by another long scan on the same reference position. When deciding what procedure you should follow for your own projects, you should determine whether this would be a good scheme for your scientific goals. In this case, each integration of the map is essentially treated as a single position-switched observation. The benefit of this is that each integration has a large factor of ‘off’ time compared to the ‘on’ time and so signal-to-noise ratios will be improved. A drawback here is that, if the map takes too long to observe, then atmospheric conditions (which are often particularly significant in K-Band observations) may change significantly over the time it takes to complete the map and the ‘on’ and ‘off’ phases of parts of the map may not be well-matched in terms of their non-source system temperature contributions. If superior flux-calibration accuracy is important for your experiment, then it may be better for you to perform a ‘RALongMapWithReference’, which performs an ‘off’ observation every N rows or for you to use frequency-switching when mapping. GBO staff will be happy to advise you on these issues.</p>
<p>The following script shows the procedure to perform the actual science observations of this project.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="n">config</span><span class="o">=</span><span class="s2">&quot;&quot;&quot;</span>
<span class="linenos"> 2</span><span class="s2">receiver            = &#39;RcvrArray18_26&#39;</span>
<span class="linenos"> 3</span><span class="s2">beam                = &#39;All&#39;</span>
<span class="linenos"> 4</span><span class="s2">obstype             = &#39;Spectroscopy&#39;</span>
<span class="linenos"> 5</span><span class="s2">backend             = &#39;VEGAS&#39; </span>
<span class="linenos"> 6</span><span class="s2">restfreq            = 23694.5, 23722.63</span>
<span class="linenos"> 7</span><span class="s2">bandwidth           = 23.44</span>
<span class="linenos"> 8</span><span class="s2">dopplertrackfreq    = 23694.5</span>
<span class="linenos"> 9</span><span class="s2">nchan               = 16384</span>
<span class="linenos">10</span><span class="s2">swmode              = &#39;tp&#39;</span>
<span class="linenos">11</span><span class="s2">swtype              = &#39;none&#39;</span>
<span class="linenos">12</span><span class="s2">swper               = 0.417</span>
<span class="linenos">13</span><span class="s2">tint                = 0.834</span>
<span class="linenos">14</span><span class="s2">vlow                = 0</span>
<span class="linenos">15</span><span class="s2">vhigh               = 0</span>
<span class="linenos">16</span><span class="s2">vframe              = &#39;lsrk&#39;</span>
<span class="linenos">17</span><span class="s2">vdef                = &#39;Radio&#39; </span>
<span class="linenos">18</span><span class="s2">noisecal            = &#39;lo&#39;</span>
<span class="linenos">19</span><span class="s2">pol                 = &#39;Circular&#39;</span>
<span class="linenos">20</span><span class="s2">&quot;&quot;&quot;</span>
<span class="linenos">21</span>
<span class="linenos">22</span><span class="n">Configure</span><span class="p">(</span><span class="n">config</span><span class="p">)</span>
<span class="linenos">23</span>
<span class="linenos">24</span><span class="n">W51Source</span> <span class="o">=</span> <span class="n">Location</span><span class="p">(</span><span class="s1">&#39;Galactic&#39;</span><span class="p">,</span> <span class="mf">49.445</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.35</span><span class="p">)</span>
<span class="linenos">25</span><span class="n">W51Off</span> <span class="o">=</span> <span class="n">Location</span><span class="p">(</span><span class="s1">&#39;Galactic&#39;</span><span class="p">,</span> <span class="mf">49.483</span><span class="p">,</span> <span class="mf">0.642</span><span class="p">)</span>
<span class="linenos">26</span>
<span class="linenos">27</span><span class="n">Slew</span><span class="p">(</span><span class="n">W51Off</span><span class="p">)</span>
<span class="linenos">28</span><span class="n">Balance</span><span class="p">()</span>
<span class="linenos">29</span>
<span class="linenos">30</span><span class="n">Track</span><span class="p">(</span><span class="n">location</span><span class="o">=</span><span class="n">W51Off</span><span class="p">,</span> 
<span class="linenos">31</span>      <span class="n">endOffset</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
<span class="linenos">32</span>      <span class="n">scanDuration</span><span class="o">=</span><span class="mf">30.0</span><span class="p">,</span>
<span class="linenos">33</span>      <span class="n">beamName</span><span class="o">=</span><span class="s1">&#39;1&#39;</span><span class="p">)</span>
<span class="linenos">34</span>
<span class="linenos">35</span><span class="n">RALongMap</span><span class="p">(</span><span class="n">location</span><span class="o">=</span><span class="n">W51Source</span><span class="p">,</span> 
<span class="linenos">36</span>          <span class="n">hlength</span><span class="o">=</span><span class="n">Offset</span><span class="p">(</span><span class="s1">&#39;J2000&#39;</span><span class="p">,</span> <span class="mf">15.6</span><span class="o">/</span><span class="mf">60.</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="n">cosv</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
<span class="linenos">37</span>          <span class="n">vlength</span><span class="o">=</span><span class="n">Offset</span><span class="p">(</span><span class="s1">&#39;J2000&#39;</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">12.48</span><span class="o">/</span><span class="mf">60.</span><span class="p">,</span> <span class="n">cosv</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
<span class="linenos">38</span>          <span class="n">vDelta</span><span class="o">=</span><span class="n">Offset</span><span class="p">(</span><span class="s1">&#39;J2000&#39;</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">12.91</span><span class="o">/</span><span class="mf">3600.</span><span class="p">,</span> <span class="n">cosv</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
<span class="linenos">39</span>          <span class="n">scanDuration</span><span class="o">=</span><span class="mi">120</span><span class="p">,</span>
<span class="linenos">40</span>          <span class="n">start</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
<span class="linenos">41</span>          <span class="n">stop</span><span class="o">=</span><span class="mi">59</span><span class="p">)</span>
<span class="linenos">42</span>
<span class="linenos">43</span><span class="n">Track</span><span class="p">(</span><span class="n">location</span><span class="o">=</span><span class="n">W51Off</span><span class="p">,</span> 
<span class="linenos">44</span>      <span class="n">endOffset</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
<span class="linenos">45</span>      <span class="n">scanDuration</span><span class="o">=</span><span class="mf">30.0</span><span class="p">,</span>
<span class="linenos">46</span>      <span class="n">beamName</span><span class="o">=</span><span class="s1">&#39;1&#39;</span><span class="p">)</span>
</pre></div>
</div>
<dl class="simple">
<dt>Most of the features here have already been described, with the following exceptions and additions:</dt><dd><ol class="arabic simple">
<li><p><code class="code docutils literal notranslate"><span class="pre">config=&quot;&quot;</span></code> – A small change has been made to the swper and tint parameters in the configuration string. Previously, these were both set to 1.0 s. For mapping, these need to be set so that they are consistent with the scanning speed, such that the map will be fully sampled. The full determination of these parameters is something that would be done at the time of proposal writing but, by using the <a class="reference external" href="https://www.gb.nrao.edu/~rmaddale/GBT/GBTMappingCalculator.html">GBT Mapping Calculator</a>, a basic mapping command is easily constructed. By supplying the desired map sizes, along with the integration time (per beam), the mapping calculator will provide an example AstrID command which will produce a map with those parameters. In this case, an integration time of 0.834 s is needed in order to prevent ‘beam-smearing’ as the telescope moves across the sky. In this example, we are using a ‘swper’ which is a factor of two smaller than the integration time, effectively allowing us redundancy in the collection of our data - collecting two samples of data per integration.</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">W51Source</span> <span class="pre">=</span> <span class="pre">Location('Galactic',</span> <span class="pre">49.445,</span> <span class="pre">-0.35)</span></code> – Note that we have returned to our original source coodinates from the pointing/focus script, this location is the center position of our map, rather than the brightest point as we used in the spectral line reference script.</p></li>
<li><p><code class="xref py py-func docutils literal notranslate"><span class="pre">Track</span></code> – A <code class="xref py py-func docutils literal notranslate"><span class="pre">Track</span></code> command follows the commanded position for the defined length of time, using the defined beam as the pointing center. This serves as our reference ‘off’ position, taken before the map, with an identical <code class="xref py py-func docutils literal notranslate"><span class="pre">Track</span></code> scan performed following the map. Care should be taken to <strong>NOT</strong> balance between the reference and source scans.</p></li>
<li><p><code class="xref py py-func docutils literal notranslate"><span class="pre">RALongMap</span></code> – The map we are taking has 59 rows which each take 120 s, totalling nearly two hours. This is at the upper end of how long one should observe at K-Band using the GBT without performing a pointing/focus observation. During stable conditions at night, this length of time may be acceptable. For daytime observations, observations which span dawn or dusk or less than ideal weather conditions, the map should be divided into blocks of no more than one hour, with pointing/focus scans performed in between. This is accomplished by, for example, taking the <code class="code docutils literal notranslate"><span class="pre">start=1,</span> <span class="pre">stop=59</span></code> inputs to our single mapping command and creating two new maps, the first having <code class="code docutils literal notranslate"><span class="pre">start=1,</span> <span class="pre">stop=29</span></code> and the second having <code class="code docutils literal notranslate"><span class="pre">start=30,</span> <span class="pre">stop=59</span></code>.</p></li>
</ol>
</dd>
</dl>
</section>
</section>
<section id="observing">
<h2>Observing<a class="headerlink" href="#observing" title="Link to this heading">#</a></h2>
<p>To learn how to execute your observing scripts, please follow the <a class="hxr-hoverxref hxr-tooltip reference internal" href="../how-tos/general_guides/gbt_observing.html#gbt-observations-101"><span class="std std-ref">GBT observations 101</span></a> guide. Here we show what would be expected to happen when carrying out the scripts described above.</p>
<section id="id1">
<h3>Point and Focus Script<a class="headerlink" href="#id1" title="Link to this heading">#</a></h3>
<p>Once this script is submitted, AstrID will reset all configuration parameters to their default values, configure for the provided configuration string and then search for an appropriate source near the target position. Once this is found, Astrid will perform four pointing scans, followed by a focus scan (assuming that there are no errors during this process). In the AstrID GUI the peak scans should resemble this</p>
<img alt="../_images/01_kfpa_tutorial_peak.png" src="../_images/01_kfpa_tutorial_peak.png" />
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The KFPA is a multi-beam receiver and, by default, uses data from two beams simultaneously to perform pointing scans. The two beams used for this are mounted on the telescope in a cross-elevation orientation, meaning that when azimuthal pointing scans are performed and the ‘reference’ scan is removed from the ‘source’ scan, a negative ‘dip’ will be seen in the power output. This leads to the distinctive appearance of azimuth pointing scans when using multi-beam receivers on the GBT.</p>
</div>
<p>The focus scan should look like this</p>
<img alt="../_images/02_kfpa_tutorial_focus.png" src="../_images/02_kfpa_tutorial_focus.png" />
<p>Assuming that the pointing and focus observations complete satisfactorily, the derived corrections will be applied to the telescope and you may proceed. If there is a failure along the way, often the best course of action is to resubmit the script and try again. If there is a reason not to do this (e.g. there has been a more significant software or hardware failure) then the operator will advise you. If you are unable to complete the pointing/focus scans after two or three attempts then it is likely that there is a problem with your script, the GBT itself or another system.</p>
<dl class="simple">
<dt>Some issues which have been encountered in the past include</dt><dd><ul class="simple">
<li><p><strong>Pointing source too weak:</strong> Astrid will try to find a pointing source which is bright enough to provide a good pointing solution. However, in some cases, the source Astrid finds is simply not bright enough. If you suspect that this is the case, you can provide ‘flux = 2.0’ as an argument to the AutoPeakFocus() command to force Astrid to find a pointing source that is at least 2 Jy in flux. At K-Band, this should be more than adequate to complete a good set of pointing/focus scans.</p></li>
<li><p><strong>Trying to observe a source below the horizon:</strong> While it should not be possible to be scheduled at a time when your source is not visible in the sky, it has occasionally happened and can produce warnings/errors that are not completely obvious that this is what has happened. Please check the LST you are observing at against your source coordinates and make sure that you expect to be able to see your source.</p></li>
</ul>
</dd>
</dl>
<p>If you do not see a reason for the failure of your pointing/focus observations, check with the operator and ask if they can see any obvious failures. While the operators are not responsible for guidance on your observations, they are familiar with the various telescope systems and will be able to identify any serious problems with the hardware. In the case that the operator can also not identify an obvious problem, it is time to call the on-call support scientist. The operator will know who this is at any given time and will be able to reach them. The on-call scientist will be able to advise you on how to proceed.</p>
</section>
<section id="id2">
<h3>Spectral Line Calibration Observation Script<a class="headerlink" href="#id2" title="Link to this heading">#</a></h3>
<p>After submitting this script, AstrID will set the commanded configuration parameters, slew to the commanded off position and balance the system there. Observers should watch the AstrID output carefully here. The power levels of VEGAS are considered to be in range if they are within 2 dB of -20 dB.
.. (where to find these values is covered under ‘VEGAS Monitoring Tools’ in the Observers Guide).
Outside of these values, the <code class="xref py py-func docutils literal notranslate"><span class="pre">Balance()</span></code> command may fail. There are also other balancing failures that Astrid will report. However, Astrid will not necessarily stop a scan because balancing has failed. This is by design as there are instruments which need to operate outside of the standard balanced power ranges. It is worth a reminder here that data quality is primarily the responsibility of the observer and you should be careful to monitor any and all error messages that are passed through the AstrID window in the ‘Log’ window. In the case that balancing errors are seen, the <code class="xref py py-func docutils literal notranslate"><span class="pre">Balance()</span></code> command should be re-issued. It is rare that a <code class="xref py py-func docutils literal notranslate"><span class="pre">Balance()</span></code> command fails multiple times in a row unless there is an issue with the configuration. If you fail to achieve reasonable balanced power levels after two or three attempts, you should contact the operator and ask for advice.</p>
<p>Assuming that the <code class="xref py py-func docutils literal notranslate"><span class="pre">Balance()</span></code> command has proceeded without issue, the spectral line script will continue to perform an OnOff() scan pair on the commanded position. This scan can be checked for data quality through the ‘online’ capability of GBTIDL.</p>
<p>To start the GBTIDL software, go to a terminal window on a Green Bank Linux Machine (<code class="code docutils literal notranslate"><span class="pre">titania</span></code> or <code class="code docutils literal notranslate"><span class="pre">ariel</span></code> <strong>ONLY</strong> if you are currently observing, <a class="reference external" href="http://greenbankobservatory.org/portal/gbt/processing">another machine</a>, if you are not observing), and type</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>gbtidl
</pre></div>
</div>
<img alt="../_images/03_kfpa_tutorial_gbtidl_welcome.png" src="../_images/03_kfpa_tutorial_gbtidl_welcome.png" />
<p>How you can access your data depends on if you are currently observing or not.</p>
<div class="tab-set docutils">
<input checked="True" class="tab-input" id="tab-set--0-input--1" name="tab-set--0" type="radio"><label class="tab-label" for="tab-set--0-input--1">Currently observing (online)</label><div class="tab-content docutils">
<div class="highlight-idl notranslate"><div class="highlight"><pre><span></span>online
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--0-input--2" name="tab-set--0" type="radio"><label class="tab-label" for="tab-set--0-input--2">Not currently observing (offline)</label><div class="tab-content docutils">
<div class="highlight-idl notranslate"><div class="highlight"><pre><span></span>offline,<span class="w"> </span><span class="s1">&#39;AGBT24A_000_01&#39;</span>
</pre></div>
</div>
</div>
</div>
<p>Once you have successfully connected to your dataset, you can look at some basic metadata via</p>
<div class="highlight-idl notranslate"><div class="highlight"><pre><span></span>summary
</pre></div>
</div>
<p>This will show you a collection of basic information about the scans you have taken.</p>
<img alt="../_images/04_kfpa_tutorial_gbtidl_session_summary.png" src="../_images/04_kfpa_tutorial_gbtidl_session_summary.png" />
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>There are several things to note about this summary of information.</p>
<ol class="arabic simple">
<li><p>This summary does not contain peak and focus scans. This is because the data taken by each backend are written to a different file and here GBTIDL is reading only the VEGAS file.</p></li>
<li><p>You may notice that the source scan numbers do not match what might be expected. If our observations had been run as described, the peak and focus scans would account for scan numbers 1-5, with the OnOff spectral line calibration scans beginning with scan number 6. In fact, the example dataset being used here was originally part of a large survey strategy and so there are differences in this aspect of the observations. This also accounts for the fact that our OnOff spectral line calibration scans have actually been performed on the source ‘L45OnOff’.</p></li>
</ol>
</div>
<p>We can now examine the data taken in our spectral line reference scan using GBTIDL commands.</p>
<div class="highlight-idl notranslate"><div class="highlight"><pre><span></span>getps,<span class="w"> </span><span class="mi">43</span>
</pre></div>
</div>
<p>This will return the reduced spectrum for the position-switched scan pair of scans 43 and 44.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>By default, <code class="code docutils literal notranslate"><span class="pre">getps</span></code> will show you the data for <code class="code docutils literal notranslate"><span class="pre">fdnum=0</span></code> (i.e. beam 1), <code class="code docutils literal notranslate"><span class="pre">ifnum=0</span></code> (i.e. the first input rest frequency) and <code class="code docutils literal notranslate"><span class="pre">plnum=0</span></code> (i.e. the left-hand circularly polarized channel).</p>
</div>
<div class="admonition-todo admonition" id="id3">
<p class="admonition-title">Todo</p>
<p>Show the resulting spectrum.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In order to achieve a high signal-to-noise ratio for these data both polarizations have been averaged and the spectrum has been smoothed by 12 channels).</p>
</div>
<div class="admonition-todo admonition" id="id4">
<p class="admonition-title">Todo</p>
<p>Add all commands required to achieve this.</p>
</div>
<p>The ammonia spectrum is clearly visible, which gives us confidence that our configuration, telescope pointing and power levels are all within reasonable limits. A final further assurance of the data quality of our observations can be found by noting the system temperature, given in the top right corner of the GBTIDL data plotter window. A ‘good’ range for the system temperature of the KFPA is ~30 - 45 K. Here we see that we have a system temperature of 35.0 K. This implies that everything is running smoothly and we have good observing conditions.</p>
</section>
<section id="mapping-script">
<h3>Mapping Script<a class="headerlink" href="#mapping-script" title="Link to this heading">#</a></h3>
<p>After submitting the mapping script, AstrID will set the commanded configuration, slew to the commanded ‘off’ position and balance the system. Following a successful balance, the off position will be observed via the <code class="xref py py-func docutils literal notranslate"><span class="pre">Track</span></code> command for 30 s. Then the <code class="xref py py-func docutils literal notranslate"><span class="pre">RALongMap</span></code> procedure will be followed until completion, at which point another 30 s track scan on the off position will be observed.
It is not always obvious how best to monitor data quality while mapping. Assuming that the ‘online’ mode of GBTIDL is being used, mapping scans will become accessible shortly after each scan row is completed, throughout the observing session. There is no standard capability provided for users to produce ‘quick look’ maps during the observing process. In order to determine the health of ongoing observations, users should continue to monitor the VEGAS power levels, as well as the system temperatures reported in CLEO and GBTIDL.</p>
<p>It is, of course, possible to examine the spectral data in near ‘real-time’ as data are collected. Running the command</p>
<div class="highlight-idl notranslate"><div class="highlight"><pre><span></span>getsigref,<span class="w"> </span><span class="mi">78</span>,<span class="w"> </span><span class="mi">77</span>
</pre></div>
</div>
<p>This will return a spectrum which has been processed with the first row of our map taken as the ‘on’ portion of a position-switched observation, using our actual ‘off’ for the reference portion. This will allow us to maintain a general overview of the data being collected (monitoring system temperature, etc). However, we are unlikely to see spectral line emission in most circumstances using this command. This is because the entire row of our map is being averaged for the ‘on’ position, which will result in low signal-to-noise, even if significant spectral line emission is present at some positions within that row. It is also possible to reduce spectra for individual integrations within a scan row. However, it is not necessarily straightforward to determine which integrations are likely to contain emission, even if the relevant sky coordinates are known.</p>
</section>
</section>
</section>


                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="hi_psw_tutorial.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">HI Position Switched (psw) Spectrum</p>
      </div>
    </a>
    <a class="right-next"
       href="../how-tos/index.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title"><svg version="1.1" width="2.0em" height="2.0em" class="sd-octicon sd-octicon-terminal green" viewBox="0 0 24 24" aria-hidden="true"><path d="M9.25 12a.75.75 0 01-.22.53l-2.75 2.75a.75.75 0 01-1.06-1.06L7.44 12 5.22 9.78a.75.75 0 111.06-1.06l2.75 2.75c.141.14.22.331.22.53zm2 2a.75.75 0 000 1.5h5a.75.75 0 000-1.5h-5z"></path><path fill-rule="evenodd" d="M0 4.75C0 3.784.784 3 1.75 3h20.5c.966 0 1.75.784 1.75 1.75v14.5A1.75 1.75 0 0122.25 21H1.75A1.75 1.75 0 010 19.25V4.75zm1.75-.25a.25.25 0 00-.25.25v14.5c0 .138.112.25.25.25h20.5a.25.25 0 00.25-.25V4.75a.25.25 0 00-.25-.25H1.75z"></path></svg> How-To Guides</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#starting-out">Starting Out</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#scripts-and-configuration">Scripts and Configuration</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#calibration">Calibration</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#point-and-focus-script">Point and Focus Script</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#spectral-line-calibration-observation-script">Spectral Line Calibration Observation Script</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#mapping">Mapping</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#observing">Observing</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id1">Point and Focus Script</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id2">Spectral Line Calibration Observation Script</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#mapping-script">Mapping Script</a></li>
</ul>
</li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Green Bank Observatory
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2023-24, Green Bank Observatory, A. Schmiedeke.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>
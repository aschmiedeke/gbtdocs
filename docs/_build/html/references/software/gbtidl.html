
<!DOCTYPE html>


<html lang="en" data-content_root="../../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>GBTIDL commands &#8212; GBT Docs 0.1 documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../../_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="../../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=b76e3c8a" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/sphinx-book-theme.css?v=a3416100" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../../_static/tabs.css?v=4c969af8" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/tooltipster.custom.css?v=7bc2f056" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/tooltipster.bundle.min.css?v=37217874" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/tooltipster-sideTip-shadow.min.css?v=6227e517" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/tooltipster-sideTip-punk.min.css?v=94669e23" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/tooltipster-sideTip-noir.min.css?v=21a39f42" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/tooltipster-sideTip-light.min.css?v=a18b2449" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/tooltipster-sideTip-borderless.min.css?v=dbff53e4" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/micromodal.css?v=d7bf34ee" />
    <link rel="stylesheet" type="text/css" href="../../_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css?v=0a3b3ea7" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/custom.css?v=04af0cc0" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="../../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="../../_static/documentation_options.js?v=e1a75a79"></script>
    <script src="../../_static/doctools.js?v=888ff710"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../../_static/copybutton.js?v=f281be69"></script>
    <script src="../../_static/tabs.js?v=3ee01567"></script>
    <script src="../../_static/js/hoverxref.js?v=c9b52ebc"></script>
    <script src="../../_static/js/tooltipster.bundle.min.js?v=18bf091b"></script>
    <script src="../../_static/js/micromodal.min.js?v=04d6302d"></script>
    <script src="../../_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script src="../../_static/design-tabs.js?v=36754332"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'references/software/gbtidl';</script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="prev" title="Scheduling Block Commands" href="scheduling-blocks.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search..."
         aria-label="Search..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="../../index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../../_static/GBO-vertical-PGGradient.svg" class="logo__image only-light" alt="GBT Docs 0.1 documentation - Home"/>
    <script>document.write(`<img src="../../_static/GBO-vertical-PGGradient.svg" class="logo__image only-dark" alt="GBT Docs 0.1 documentation - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        <ul class="current nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../../tutorials/index.html"><svg aria-hidden="true" class="sd-octicon sd-octicon-mortar-board orange" height="2.0em" version="1.1" viewbox="0 0 24 24" width="2.0em"><path d="M12.292 2.06a.75.75 0 00-.584 0L.458 6.81a.75.75 0 000 1.38L4.25 9.793v3.803a2.901 2.901 0 00-1.327.757c-.579.58-.923 1.41-.923 2.43v4.5c0 .248.128.486.335.624.06.04.117.073.22.124.124.062.297.138.52.213.448.149 1.09.288 1.925.288s1.477-.14 1.925-.288c.223-.075.396-.15.52-.213a2.11 2.11 0 00.21-.117A.762.762 0 008 21.28v-4.5c0-1.018-.344-1.85-.923-2.428a2.9 2.9 0 00-1.327-.758v-3.17l5.958 2.516a.75.75 0 00.584 0l5.208-2.2v4.003a2.552 2.552 0 01-.079.085 4.057 4.057 0 01-.849.65c-.826.488-2.255 1.021-4.572 1.021-.612 0-1.162-.037-1.654-.1a.75.75 0 00-.192 1.487c.56.072 1.173.113 1.846.113 2.558 0 4.254-.592 5.334-1.23.538-.316.914-.64 1.163-.896a2.84 2.84 0 00.392-.482h.001A.75.75 0 0019 15v-4.892l4.542-1.917a.75.75 0 000-1.382l-11.25-4.75zM5 15c-.377 0-.745.141-1.017.413-.265.265-.483.7-.483 1.368v4.022c.299.105.797.228 1.5.228s1.201-.123 1.5-.228V16.78c0-.669-.218-1.103-.483-1.368A1.431 1.431 0 005 15zm7-3.564L2.678 7.5 12 3.564 21.322 7.5 12 11.436z" fill-rule="evenodd"></path></svg> Tutorials</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../tutorials/hi_psw_tutorial.html">HI Position Switched (psw) Spectrum</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tutorials/kfpa_nh3_mapping_tutorial.html">NH<sub>3</sub> Mapping Observations with the K-Band Focal Plane Array (KFPA) on the GBT</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../how-tos/index.html"><svg aria-hidden="true" class="sd-octicon sd-octicon-terminal green" height="2.0em" version="1.1" viewbox="0 0 24 24" width="2.0em"><path d="M9.25 12a.75.75 0 01-.22.53l-2.75 2.75a.75.75 0 01-1.06-1.06L7.44 12 5.22 9.78a.75.75 0 111.06-1.06l2.75 2.75c.141.14.22.331.22.53zm2 2a.75.75 0 000 1.5h5a.75.75 0 000-1.5h-5z"></path><path d="M0 4.75C0 3.784.784 3 1.75 3h20.5c.966 0 1.75.784 1.75 1.75v14.5A1.75 1.75 0 0122.25 21H1.75A1.75 1.75 0 010 19.25V4.75zm1.75-.25a.25.25 0 00-.25.25v14.5c0 .138.112.25.25.25h20.5a.25.25 0 00.25-.25V4.75a.25.25 0 00-.25-.25H1.75z" fill-rule="evenodd"></path></svg> How-To Guides</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../how-tos/infrastructure/remote-connection.html">How to connect remotely to the GBO network</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../how-tos/general_guides/gbt_observing.html">GBT observations 101</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../how-tos/observing_modes/C-band_Mueller_matrix.html">How to derive a Mueller matrix</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../how-tos/observing_modes/pulsars.html">Pulsar observing How-To Guides</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../../how-tos/observing_modes/pulsars/pulsar_time_obs.html">Timing Observations of a Known Pulsar</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../how-tos/observing_modes/pulsars/pulsar_flux_cal.html">Pulsar-Mode Flux Calibration Observations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../how-tos/observing_modes/pulsars/pulsar_search.html">Pulsar Search Observations</a></li>
</ul>
</details></li>
<li class="toctree-l2"><a class="reference internal" href="../../how-tos/receivers/argus/argus_obs.html">How to observe using Argus</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../how-tos/receivers/mustang2.html">MUSTANG-2 How-To Guides</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../../how-tos/receivers/mustang2/mustang2_proposal.html">How to Propose with MUSTANG-2</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../how-tos/receivers/mustang2/mustang2_calc_obs_time.html">How to Calculate Observing Time Required for MUSTANG-2</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../how-tos/receivers/mustang2/mustang2_obs_scripts.html">How to Prepare MUSTANG-2 Observing Scripts</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../how-tos/receivers/mustang2/mustang2_setup.html">How to setup MUSTANG-2</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../how-tos/receivers/mustang2/mustang2_obs.html">How to observe with MUSTANG-2</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../how-tos/receivers/mustang2/mustang2_data.html">MUSTANG-2 data</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l4"><a class="reference internal" href="../../how-tos/receivers/mustang2/data/mustang2_deliverables.html">MUSTANG-2 Deliverables</a></li>
</ul>
</details></li>
</ul>
</details></li>
<li class="toctree-l2"><a class="reference internal" href="../../how-tos/data_reduction/gbtidl.html">How to process spectra using GBTIDL (examples)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../how-tos/data_reduction/calculate_opacity.html">How to account for sky opacity in GBT Observations</a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="../../explanations/index.html"><svg aria-hidden="true" class="sd-octicon sd-octicon-repo purple" height="2.0em" version="1.1" viewbox="0 0 24 24" width="2.0em"><path d="M3 2.75A2.75 2.75 0 015.75 0h14.5a.75.75 0 01.75.75v20.5a.75.75 0 01-.75.75h-6a.75.75 0 010-1.5h5.25v-4H6A1.5 1.5 0 004.5 18v.75c0 .716.43 1.334 1.05 1.605a.75.75 0 01-.6 1.374A3.25 3.25 0 013 18.75v-16zM19.5 1.5V15H6c-.546 0-1.059.146-1.5.401V2.75c0-.69.56-1.25 1.25-1.25H19.5z" fill-rule="evenodd"></path><path d="M7 18.25a.25.25 0 01.25-.25h5a.25.25 0 01.25.25v5.01a.25.25 0 01-.397.201l-2.206-1.604a.25.25 0 00-.294 0L7.397 23.46a.25.25 0 01-.397-.2v-5.01z"></path></svg> Explanation Material</a></li>
<li class="toctree-l1 current active has-children"><a class="reference internal" href="../index.html"><svg aria-hidden="true" class="sd-octicon sd-octicon-tools sd-text-primary" height="2.0em" version="1.1" viewbox="0 0 24 24" width="2.0em"><path d="M7.875 2.292a.125.125 0 00-.032.018A7.24 7.24 0 004.75 8.25a7.247 7.247 0 003.654 6.297c.57.327.982.955.941 1.682v.002l-.317 6.058a.75.75 0 11-1.498-.078l.317-6.062v-.004c.006-.09-.047-.215-.188-.296A8.747 8.747 0 013.25 8.25a8.74 8.74 0 013.732-7.169 1.547 1.547 0 011.709-.064c.484.292.809.835.809 1.46v4.714a.25.25 0 00.119.213l2.25 1.385c.08.05.182.05.262 0l2.25-1.385a.25.25 0 00.119-.213V2.478c0-.626.325-1.169.81-1.461a1.547 1.547 0 011.708.064 8.74 8.74 0 013.732 7.17 8.747 8.747 0 01-4.41 7.598c-.14.081-.193.206-.188.296v.004l.318 6.062a.75.75 0 11-1.498.078l-.317-6.058v-.002c-.041-.727.37-1.355.94-1.682A7.247 7.247 0 0019.25 8.25a7.24 7.24 0 00-3.093-5.94.125.125 0 00-.032-.018l-.01-.001c-.003 0-.014 0-.031.01-.036.022-.084.079-.084.177V7.19a1.75 1.75 0 01-.833 1.49l-2.25 1.385a1.75 1.75 0 01-1.834 0l-2.25-1.384A1.75 1.75 0 018 7.192V2.477c0-.098-.048-.155-.084-.176a.062.062 0 00-.031-.011l-.01.001z" fill-rule="evenodd"></path></svg> Reference Guides</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../observing_modes/pulsar_reference.html">Pulsar Observing Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="../receivers/argus.html">Argus</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../receivers/mustang2.html">MUSTANG-2</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../receivers/mustang2/mustang2_overview.html">MUSTANG-2 Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="../receivers/mustang2/mustang2_instrument_team.html">MUSTANG-2 Instrument Team</a></li>
<li class="toctree-l3"><a class="reference internal" href="../receivers/mustang2/mustang2_bandpass.html">MUSTANG-2 Bandpass Information</a></li>
<li class="toctree-l3"><a class="reference internal" href="../receivers/mustang2/mustang2_filtering.html">MUSTANG-2 Filtering</a></li>
<li class="toctree-l3"><a class="reference internal" href="../receivers/mustang2/mustang2_mapping.html">MUSTANG-2 Mapping Information</a></li>
<li class="toctree-l3"><a class="reference internal" href="../receivers/mustang2/mustang2_publications.html">MUSTANG-2 Publications</a></li>
<li class="toctree-l3"><a class="reference internal" href="../receivers/mustang2/mustang2_datasets.html">MUSTANG-2 Published Data Sets</a></li>
<li class="toctree-l3"><a class="reference internal" href="../receivers/mustang2/mustang2_dev.html">MUSTANG-2 Historical Development</a></li>
</ul>
</details></li>
<li class="toctree-l2"><a class="reference internal" href="scheduling-blocks.html">Scheduling Block Commands</a></li>
<li class="toctree-l2 current active"><a class="current reference internal" href="#">GBTIDL commands</a></li>
</ul>
</details></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/aschmiedeke/gbtdocs" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/aschmiedeke/gbtdocs/issues/new?title=Issue%20on%20page%20%2Freferences/software/gbtidl.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../../_sources/references/software/gbtidl.rst" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.rst</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>

</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>GBTIDL commands</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="gbtidl-commands">
<h1>GBTIDL commands<a class="headerlink" href="#gbtidl-commands" title="Link to this heading">#</a></h1>
<div class="pst-scrollable-table-container"><table class="longtable table autosummary">
<tbody>
<tr class="row-odd"><td><p><a href="#id1"><span class="problematic" id="id2">:pro:`getnod`</span></a></p></td>
<td><p>Procedure getnod retrieves and calibrates a total power nod scan</p></td>
</tr>
<tr class="row-even"><td><p><a href="#id3"><span class="problematic" id="id4">:pro:`bmodel`</span></a></p></td>
<td><p>Fill in the indicated data container at modelbuffer using the</p></td>
</tr>
<tr class="row-odd"><td><p><a href="#id5"><span class="problematic" id="id6">:pro:`avgstack`</span></a></p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p><a href="#id7"><span class="problematic" id="id8">:pro:`nget`</span></a></p></td>
<td><p>Get a previously saved data container with the matching</p></td>
</tr>
<tr class="row-odd"><td><p><a href="#id9"><span class="problematic" id="id10">:pro:`accum`</span></a></p></td>
<td><p>This procedure adds a data container to an accum buffer, in</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-func docutils literal notranslate"><span class="pre">lastscan()</span></code></p></td>
<td><p>Returns the scan number of the most recently retrieved data</p></td>
</tr>
<tr class="row-odd"><td><p><a href="#id11"><span class="problematic" id="id12">:pro:`multiply`</span></a></p></td>
<td><p>This procedure multiplies the data from two data containers stored</p></td>
</tr>
<tr class="row-even"><td><p><a href="#id13"><span class="problematic" id="id14">:pro:`getbs`</span></a></p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-func docutils literal notranslate"><span class="pre">get_scan_numbers()</span></code></p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-func docutils literal notranslate"><span class="pre">getfindindex()</span></code></p></td>
<td><p>Utility function used by setfind, listfind, and clearfind to</p></td>
</tr>
<tr class="row-odd"><td><p><a href="#id15"><span class="problematic" id="id16">:pro:`gsmooth`</span></a></p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p><a href="#id17"><span class="problematic" id="id18">:pro:`bshape`</span></a></p></td>
<td><p>Fit a polynomial baseline to the contents of the primary data</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-func docutils literal notranslate"><span class="pre">check_file_conflicts()</span></code></p></td>
<td><p>Performs checking of the filenames in the</p></td>
</tr>
<tr class="row-even"><td><p><a href="#id19"><span class="problematic" id="id20">:pro:`move`</span></a></p></td>
<td><p>Move the data from the in location to the out location.  Anything in</p></td>
</tr>
<tr class="row-odd"><td><p><a href="#id21"><span class="problematic" id="id22">:pro:`gparamvalues`</span></a></p></td>
<td><p>Procedure to put values into the !g.gauss.params container.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-func docutils literal notranslate"><span class="pre">getbasemodel()</span></code></p></td>
<td><p>Function to return the polynomial using the most recently fitted</p></td>
</tr>
<tr class="row-odd"><td><p><a href="#id23"><span class="problematic" id="id24">:pro:`gstatus`</span></a></p></td>
<td><p>Summarize the status of GBTIDL as found in the global structure used</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-func docutils literal notranslate"><span class="pre">getbangcolor()</span></code></p></td>
<td><p>Translate color value into &quot;!name&quot; string.  Used by gstatus to</p></td>
</tr>
<tr class="row-odd"><td><p><a href="#id25"><span class="problematic" id="id26">:pro:`files`</span></a></p></td>
<td><p>Prints the file names being used for I/O.</p></td>
</tr>
<tr class="row-even"><td><p><a href="#id27"><span class="problematic" id="id28">:pro:`baseline`</span></a></p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p><a href="#id29"><span class="problematic" id="id30">:pro:`fitgauss`</span></a></p></td>
<td><p>An interactive procedure that allows the user to fit gaussians.</p></td>
</tr>
<tr class="row-even"><td><p><a href="#id31"><span class="problematic" id="id32">:pro:`find_region`</span></a></p></td>
<td><p>Used internally in fitgauss, finds the region index number in</p></td>
</tr>
<tr class="row-odd"><td><p><a href="#id33"><span class="problematic" id="id34">:pro:`overlap_check`</span></a></p></td>
<td><p>Check to see if two regions overlap.  Used internally only.</p></td>
</tr>
<tr class="row-even"><td><p><a href="#id35"><span class="problematic" id="id36">:pro:`getrec`</span></a></p></td>
<td><p>Gets the data associated with a given index number in the</p></td>
</tr>
<tr class="row-odd"><td><p><a href="#id37"><span class="problematic" id="id38">:pro:`listflags`</span></a></p></td>
<td><p>List flags associated with the current input spectral line data file</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-func docutils literal notranslate"><span class="pre">whichsampler()</span></code></p></td>
<td><p>Find the sampler name which corresponds to the given if, feed, and</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-func docutils literal notranslate"><span class="pre">vshift()</span></code></p></td>
<td><p>Function to calculate the shift, in channels, necessary to align in</p></td>
</tr>
<tr class="row-even"><td><p><a href="#id39"><span class="problematic" id="id40">:pro:`getsigref`</span></a></p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p><a href="#id41"><span class="problematic" id="id42">:pro:`nregion`</span></a></p></td>
<td><p>Set some regions for use by other GUIDE procedures and functions.</p></td>
</tr>
<tr class="row-even"><td><p><a href="#id43"><span class="problematic" id="id44">:pro:`list`</span></a></p></td>
<td><p>Lists columns from the index of the input file (or</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-func docutils literal notranslate"><span class="pre">find_paired_info()</span></code></p></td>
<td><p>Find the scan_info associated with the paired scan implied by the</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-func docutils literal notranslate"><span class="pre">check_calib_args()</span></code></p></td>
<td><p>This function is used by the standard calibration routines to handle</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-func docutils literal notranslate"><span class="pre">getIftabIndices()</span></code></p></td>
<td><p>Private function to return the array indices in a 3D iftable array</p></td>
</tr>
<tr class="row-even"><td><p><a href="#id45"><span class="problematic" id="id46">:pro:`fileout`</span></a></p></td>
<td><p>Specify the file to which data will be written.</p></td>
</tr>
<tr class="row-odd"><td><p><a href="#id47"><span class="problematic" id="id48">:pro:`qdflag`</span></a></p></td>
<td><p>Generate flag table entries using QuadrantDetector columns in the</p></td>
</tr>
<tr class="row-even"><td><p><a href="#id49"><span class="problematic" id="id50">:pro:`gmeasure`</span></a></p></td>
<td><p>Procedure to measure the area, width, and velocity of a galaxy</p></td>
</tr>
<tr class="row-odd"><td><p><a href="#id51"><span class="problematic" id="id52">:pro:`recombc`</span></a></p></td>
<td><p>Plot the Carbon recombination lines for quantum jump of dN.</p></td>
</tr>
<tr class="row-even"><td><p><a href="#id53"><span class="problematic" id="id54">:pro:`fold`</span></a></p></td>
<td><p>Average two parts of in-band frequency switching (signal and</p></td>
</tr>
<tr class="row-odd"><td><p><a href="#id55"><span class="problematic" id="id56">:pro:`clip`</span></a></p></td>
<td><p>This procedure truncates, or clips, data values above and below</p></td>
</tr>
<tr class="row-even"><td><p><a href="#id57"><span class="problematic" id="id58">:pro:`ave`</span></a></p></td>
<td><p>Get the average from an ongoing accumulation.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-func docutils literal notranslate"><span class="pre">project_exists()</span></code></p></td>
<td><p>Used internally in offline</p></td>
</tr>
<tr class="row-even"><td><p><a href="#id59"><span class="problematic" id="id60">:pro:`offline`</span></a></p></td>
<td><p>This is a convenient way to find the previously auto-filled data</p></td>
</tr>
<tr class="row-odd"><td><p><a href="#id61"><span class="problematic" id="id62">:pro:`hanning`</span></a></p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p><a href="#id63"><span class="problematic" id="id64">:pro:`spurinterp`</span></a></p></td>
<td><p>Replace data values at the known locations of VEGAS ADC spurs with</p></td>
</tr>
<tr class="row-odd"><td><p><a href="#id65"><span class="problematic" id="id66">:pro:`nfit`</span></a></p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p><a href="#id67"><span class="problematic" id="id68">:pro:`flag`</span></a></p></td>
<td><p>Flag some data in the currently opened spectral line data file or</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-func docutils literal notranslate"><span class="pre">samplerinfo()</span></code></p></td>
<td><p>Find the if, feed, and polarization numbers  which corresponds to the</p></td>
</tr>
<tr class="row-even"><td><p><a href="#id69"><span class="problematic" id="id70">:pro:`add`</span></a></p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p><a href="#id71"><span class="problematic" id="id72">:pro:`bias`</span></a></p></td>
<td><p>This procedure adds a scalar bias to the data container's data.</p></td>
</tr>
<tr class="row-even"><td><p><a href="#id73"><span class="problematic" id="id74">:pro:`gshow`</span></a></p></td>
<td><p>Show the most recently fit gaussians and annotate the plot with</p></td>
</tr>
<tr class="row-odd"><td><p><a href="#id75"><span class="problematic" id="id76">:pro:`gfft`</span></a></p></td>
<td><p>Do an FFT or an inverse FFT on the data container(s) indicated by</p></td>
</tr>
<tr class="row-even"><td><p><a href="#id77"><span class="problematic" id="id78">:pro:`scale`</span></a></p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p><a href="#id79"><span class="problematic" id="id80">:pro:`liststack`</span></a></p></td>
<td><p>List the index information using the first !g.acount values of</p></td>
</tr>
<tr class="row-even"><td><p><a href="#id81"><span class="problematic" id="id82">:pro:`mediansub`</span></a></p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-func docutils literal notranslate"><span class="pre">nrecords()</span></code></p></td>
<td><p>Retrieve the number of records associated with an i/o object.</p></td>
</tr>
<tr class="row-even"><td><p><a href="#id83"><span class="problematic" id="id84">:pro:`ls`</span></a></p></td>
<td><p>List files (defaults to <a href="#id85"><span class="problematic" id="id86">*</span></a>.fits in the current directory).  This</p></td>
</tr>
<tr class="row-odd"><td><p><a href="#id87"><span class="problematic" id="id88">:pro:`get`</span></a></p></td>
<td><p>Get data from the input data file and put that into the primary data</p></td>
</tr>
<tr class="row-even"><td><p><a href="#id89"><span class="problematic" id="id90">:pro:`getps`</span></a></p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p><a href="#id91"><span class="problematic" id="id92">:pro:`divide`</span></a></p></td>
<td><p>This procedure divides the data from two data containers stored in</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-func docutils literal notranslate"><span class="pre">getstatsrange()</span></code></p></td>
<td><p>Used by stats and moments to convert a region that might be in the</p></td>
</tr>
<tr class="row-odd"><td><p><a href="#id93"><span class="problematic" id="id94">:pro:`listids`</span></a></p></td>
<td><p>List all of the idstring values in the flag file of the current</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-func docutils literal notranslate"><span class="pre">astack()</span></code></p></td>
<td><p>Function to return the value of a specific element of the stack.</p></td>
</tr>
<tr class="row-odd"><td><p><a href="#id95"><span class="problematic" id="id96">:pro:`ginterp`</span></a></p></td>
<td><p>Interpolate across blanked channels in the primary data container</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-func docutils literal notranslate"><span class="pre">scan_info()</span></code></p></td>
<td><p>Get scan information structure from the appropriate I/O object.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-func docutils literal notranslate"><span class="pre">SDFITSIN()</span></code></p></td>
<td><p>Create a new io_sdfits object and associate the indicated filename</p></td>
</tr>
<tr class="row-even"><td><p><a href="#id97"><span class="problematic" id="id98">:pro:`summary`</span></a></p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p><a href="#id99"><span class="problematic" id="id100">:pro:`listfind`</span></a></p></td>
<td><p>List a specified selection parameter or all selection parameter</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-func docutils literal notranslate"><span class="pre">find_scan_info()</span></code></p></td>
<td><p>Find a scan info from the current line filein matching the given scan,</p></td>
</tr>
<tr class="row-odd"><td><p><a href="#id101"><span class="problematic" id="id102">:pro:`flagspurs`</span></a></p></td>
<td><p>Set the flags for the VEGAS spurs in the currently opened input data</p></td>
</tr>
<tr class="row-even"><td><p><a href="#id103"><span class="problematic" id="id104">:pro:`gmoment`</span></a></p></td>
<td><p>Find the first 3 moments of a region of the data in buffer 0.</p></td>
</tr>
<tr class="row-odd"><td><p><a href="#id105"><span class="problematic" id="id106">:pro:`select`</span></a></p></td>
<td><p>This procedure is used to select data from the current data file for</p></td>
</tr>
<tr class="row-even"><td><p><a href="#id107"><span class="problematic" id="id108">:pro:`deselect`</span></a></p></td>
<td><p>This procedure is used to remove previously selected index numbers</p></td>
</tr>
<tr class="row-odd"><td><p><a href="#id109"><span class="problematic" id="id110">:pro:`getfs`</span></a></p></td>
<td><p>This procedure retrieves and calibrates a frequency switched</p></td>
</tr>
<tr class="row-even"><td><p><a href="#id111"><span class="problematic" id="id112">:pro:`gregion`</span></a></p></td>
<td><p>Set some regions for use by GUIDE gaussian procedures and functions.</p></td>
</tr>
<tr class="row-odd"><td><p><a href="#id113"><span class="problematic" id="id114">:pro:`bsubtract`</span></a></p></td>
<td><p>Subtract a baseline using the stored coefficients in !g.polyfit and</p></td>
</tr>
<tr class="row-even"><td><p><a href="#id115"><span class="problematic" id="id116">:pro:`kgetrec`</span></a></p></td>
<td><p>Gets the data associated with a given index number in the</p></td>
</tr>
<tr class="row-odd"><td><p><a href="#id117"><span class="problematic" id="id118">:pro:`online`</span></a></p></td>
<td><p>Set the line io object to look at the online file.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-func docutils literal notranslate"><span class="pre">getdata()</span></code></p></td>
<td><p>Extract some or all of the data array from one of the global buffers.</p></td>
</tr>
<tr class="row-odd"><td><p><a href="#id119"><span class="problematic" id="id120">:pro:`flagrec`</span></a></p></td>
<td><p>Flag a specific record or records in the currently open spectral</p></td>
</tr>
<tr class="row-even"><td><p><a href="#id121"><span class="problematic" id="id122">:pro:`setfframe`</span></a></p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-func docutils literal notranslate"><span class="pre">get_calib_data()</span></code></p></td>
<td><p>Used by the calibration routines to actually fetch the necessary</p></td>
</tr>
<tr class="row-even"><td><p><a href="#id123"><span class="problematic" id="id124">:pro:`gauss`</span></a></p></td>
<td><p>Fits Gaussians to the data in the primary data container (!g.s[0])</p></td>
</tr>
<tr class="row-odd"><td><p><a href="#id125"><span class="problematic" id="id126">:pro:`invert`</span></a></p></td>
<td><p>Flip the data end-to-end in the indicated buffer in the global data</p></td>
</tr>
<tr class="row-even"><td><p><a href="#id127"><span class="problematic" id="id128">:pro:`calsummary`</span></a></p></td>
<td><p>Used by the calibration routines (getfs,getps,getnod,etc) to</p></td>
</tr>
<tr class="row-odd"><td><p><a href="#id129"><span class="problematic" id="id130">:pro:`subtract`</span></a></p></td>
<td><p>This procedure subtracts the data from two data containers stored in</p></td>
</tr>
<tr class="row-even"><td><p><a href="#id131"><span class="problematic" id="id132">:pro:`copy`</span></a></p></td>
<td><p>Copy the data from the in buffer to the out buffer.  Anything in</p></td>
</tr>
<tr class="row-odd"><td><p><a href="#id133"><span class="problematic" id="id134">:pro:`appendstack`</span></a></p></td>
<td><p>Append entries to the stack.</p></td>
</tr>
<tr class="row-even"><td><p><a href="#id135"><span class="problematic" id="id136">:pro:`bshow`</span></a></p></td>
<td><p>Overplot a baseline using the stored coefficients in !g.polyfit and</p></td>
</tr>
<tr class="row-odd"><td><p><a href="#id137"><span class="problematic" id="id138">:pro:`powspec`</span></a></p></td>
<td><p>Compute the power spectrum for the indicated data container, which</p></td>
</tr>
<tr class="row-even"><td><p><a href="#id139"><span class="problematic" id="id140">:pro:`set_data_container`</span></a></p></td>
<td><p>Set the element of the appropriate GUIDE data structure array.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-func docutils literal notranslate"><span class="pre">getchunk()</span></code></p></td>
<td><p>A function to get several data containers from an input file in one call.</p></td>
</tr>
<tr class="row-even"><td><p><a href="#id141"><span class="problematic" id="id142">:pro:`emptystack`</span></a></p></td>
<td><p>Clear the stack.</p></td>
</tr>
<tr class="row-odd"><td><p><a href="#id143"><span class="problematic" id="id144">:pro:`table`</span></a></p></td>
<td><p>List the displayed data container or a global data container in</p></td>
</tr>
<tr class="row-even"><td><p><a href="#id145"><span class="problematic" id="id146">:pro:`molecule`</span></a></p></td>
<td><p>Plot the molecular line frequencies for previously detected</p></td>
</tr>
<tr class="row-odd"><td><p><a href="#id147"><span class="problematic" id="id148">:pro:`recombhe`</span></a></p></td>
<td><p>Plot the Helium recombination lines for quantum jump of dN.</p></td>
</tr>
<tr class="row-even"><td><p><a href="#id149"><span class="problematic" id="id150">:pro:`clearfind`</span></a></p></td>
<td><p>Clear a selection parameter or several selection parameters used by</p></td>
</tr>
<tr class="row-odd"><td><p><a href="#id151"><span class="problematic" id="id152">:pro:`getcal`</span></a></p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p><a href="#id153"><span class="problematic" id="id154">:pro:`gmaxiter`</span></a></p></td>
<td><p>Sets the maximum iterations for fitting guassians: !g.gauss.maxiter</p></td>
</tr>
<tr class="row-odd"><td><p><a href="#id155"><span class="problematic" id="id156">:pro:`unflag`</span></a></p></td>
<td><p>Remove all flags with the same idstring value, or id number,</p></td>
</tr>
<tr class="row-even"><td><p><a href="#id157"><span class="problematic" id="id158">:pro:`header`</span></a></p></td>
<td><p>Show header information for the primary data container or any other</p></td>
</tr>
<tr class="row-odd"><td><p><a href="#id159"><span class="problematic" id="id160">:pro:`decimate`</span></a></p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-func docutils literal notranslate"><span class="pre">lastrec()</span></code></p></td>
<td><p>Returns the record number (index) of the most recently</p></td>
</tr>
<tr class="row-odd"><td><p><a href="#id161"><span class="problematic" id="id162">:pro:`replace`</span></a></p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p><a href="#id163"><span class="problematic" id="id164">:pro:`replace_chans`</span></a></p></td>
<td><p>Used internally in replace</p></td>
</tr>
<tr class="row-odd"><td><p><a href="#id165"><span class="problematic" id="id166">:pro:`getscan`</span></a></p></td>
<td><p>Gets the data associated with a given scan number.  In general this</p></td>
</tr>
<tr class="row-even"><td><p><a href="#id167"><span class="problematic" id="id168">:pro:`kgetscan`</span></a></p></td>
<td><p>Gets the data associated with a given scan number in the</p></td>
</tr>
<tr class="row-odd"><td><p><a href="#id169"><span class="problematic" id="id170">:pro:`resample`</span></a></p></td>
<td><p>Resample a spectrum data container onto a new frequency axis using</p></td>
</tr>
<tr class="row-even"><td><p><a href="#id171"><span class="problematic" id="id172">:pro:`report_gauss`</span></a></p></td>
<td><p>Procedure for printing what the current regions and gaussians are in</p></td>
</tr>
<tr class="row-odd"><td><p><a href="#id173"><span class="problematic" id="id174">:pro:`sclear`</span></a></p></td>
<td><p>Clears one of the global accum buffers (frees the pointer, zeros</p></td>
</tr>
<tr class="row-even"><td><p><a href="#id175"><span class="problematic" id="id176">:pro:`recombn`</span></a></p></td>
<td><p>Plot the Nitrogen recombination lines for quantum jump of dN.</p></td>
</tr>
<tr class="row-odd"><td><p><a href="#id177"><span class="problematic" id="id178">:pro:`setdata`</span></a></p></td>
<td><p>Convenience function for setting data array of a data container.</p></td>
</tr>
<tr class="row-even"><td><p><a href="#id179"><span class="problematic" id="id180">:pro:`dirin`</span></a></p></td>
<td><p>Specify a directory from which data will be read.  Compare to</p></td>
</tr>
<tr class="row-odd"><td><p><a href="#id181"><span class="problematic" id="id182">:pro:`putchunk`</span></a></p></td>
<td><p>This saves several data containers into the output file</p></td>
</tr>
<tr class="row-even"><td><p><a href="#id183"><span class="problematic" id="id184">:pro:`addstack`</span></a></p></td>
<td><p>Add entries to &quot;the stack&quot;, which is a list of numbers</p></td>
</tr>
<tr class="row-odd"><td><p><a href="#id185"><span class="problematic" id="id186">:pro:`recomball`</span></a></p></td>
<td><p>Plot the Hydrogen, alpha, beta gamma, helium alpha beta and carba alpha</p></td>
</tr>
<tr class="row-even"><td><p><a href="#id187"><span class="problematic" id="id188">:pro:`keep`</span></a></p></td>
<td><p>Save a spectrum to the output file.</p></td>
</tr>
<tr class="row-odd"><td><p><a href="#id189"><span class="problematic" id="id190">:pro:`find`</span></a></p></td>
<td><p>Put entries in to the stack based on the given selection criteria in</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-func docutils literal notranslate"><span class="pre">fshift()</span></code></p></td>
<td><p>Function to calculate the shift, in channels, necessary to align in</p></td>
</tr>
<tr class="row-odd"><td><p><a href="#id191"><span class="problematic" id="id192">:pro:`gshift`</span></a></p></td>
<td><p>Procedure to shift data in a GUIDE data buffer by a given</p></td>
</tr>
<tr class="row-even"><td><p><a href="#id193"><span class="problematic" id="id194">:pro:`stats`</span></a></p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p><a href="#id195"><span class="problematic" id="id196">:pro:`recombo`</span></a></p></td>
<td><p>Plot the Oxygen recombination lines for quantum jump of dN.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-func docutils literal notranslate"><span class="pre">xshift()</span></code></p></td>
<td><p>This function returns a value that, when given as the argument to</p></td>
</tr>
<tr class="row-odd"><td><p><a href="#id197"><span class="problematic" id="id198">:pro:`gettp`</span></a></p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p><a href="#id199"><span class="problematic" id="id200">:pro:`filein`</span></a></p></td>
<td><p>Specify the SDFITS file from which data will be read.</p></td>
</tr>
<tr class="row-odd"><td><p><a href="#id201"><span class="problematic" id="id202">:pro:`delete`</span></a></p></td>
<td><p>Remove specific values from the stack.</p></td>
</tr>
<tr class="row-even"><td><p><a href="#id203"><span class="problematic" id="id204">:pro:`ngauss`</span></a></p></td>
<td><p>Sets the value of !g.gauss.ngauss.  Must set this before fitting</p></td>
</tr>
<tr class="row-odd"><td><p><a href="#id205"><span class="problematic" id="id206">:pro:`boxcar`</span></a></p></td>
<td><p>Smooth the primary data container (the PDC, !g.s[0]) with a boxcar</p></td>
</tr>
<tr class="row-even"><td><p><a href="#id207"><span class="problematic" id="id208">:pro:`recombh`</span></a></p></td>
<td><p>Plot the Hydrogen recombination lines for quantum jump of dN.</p></td>
</tr>
<tr class="row-odd"><td><p><a href="#id209"><span class="problematic" id="id210">:pro:`showiftab`</span></a></p></td>
<td><p>Summarize the valid ifnum, fdnum, plnum combinations for a scan.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-func docutils literal notranslate"><span class="pre">setArrFmt()</span></code></p></td>
<td><p>Used internally in showiftab</p></td>
</tr>
<tr class="row-odd"><td><p><a href="#id211"><span class="problematic" id="id212">:pro:`doiftab`</span></a></p></td>
<td><p>Process an iftable array returned by scan_info.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-func docutils literal notranslate"><span class="pre">compareIndexList()</span></code></p></td>
<td><p>Used during the sorting process in showiftab</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-func docutils literal notranslate"><span class="pre">compareIndexStructs()</span></code></p></td>
<td><p>Used during the sorting process in showiftab</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-func docutils literal notranslate"><span class="pre">sortIndexStruct()</span></code></p></td>
<td><p>The sort function used by showiftab.</p></td>
</tr>
<tr class="row-odd"><td><p><a href="#id213"><span class="problematic" id="id214">:pro:`kget`</span></a></p></td>
<td><p>Retrieves data from the output data file and places it in the</p></td>
</tr>
<tr class="row-even"><td><p><a href="#id215"><span class="problematic" id="id216">:pro:`gconvol`</span></a></p></td>
<td><p>A GUIDE front-end to the standard IDL CONVOL function.</p></td>
</tr>
<tr class="row-odd"><td><p><a href="#id217"><span class="problematic" id="id218">:pro:`nsave`</span></a></p></td>
<td><p>Save a data container to the current fileout with the indicate NSAVE</p></td>
</tr>
<tr class="row-even"><td><p><a href="#id219"><span class="problematic" id="id220">:pro:`setfind`</span></a></p></td>
<td><p>Set a selection parameter to be used later by &lt;a href=&quot;find.html&quot;&gt;find&lt;/a&gt;</p></td>
</tr>
</tbody>
</table>
</div>
<dl class="idl pro">
<dt class="sig sig-object idl" id="getnod">
<em class="property"><span class="pre">pro</span></em><span class="sig-name descname"><span class="pre">getnod</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">scan</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ifnum=ifnum</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">intnum=intnum</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plnum=plnum</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">trackfdnum=trackfdnum</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sampler=sampler</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tau=tau</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tsys=tsys</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ap_eff=ap_eff</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">smthoff=smthoff</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">units=units</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">eqweight=eqweight</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tcal=tcal</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">quiet=quiet</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keepints=keepints</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">useflag=useflag</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">skipflag=skipflag</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">instance=instance</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file=file</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timestamp=timestamp</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">status=status</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#getnod" title="Link to this definition">#</a></dt>
<dd><p>Procedure getnod retrieves and calibrates a total power nod scan
pair.</p>
<p>This procedure will only process scans taken with the observing
procedure Nod.  It can be used as a template for the user who may
wish to develop more tailored calibration schemes.  The spectrum is
calibrated in Ta (K) by default.  The user can calibrate to units of
Ta* or Jy as well, via the units parameter.</p>
<p><strong>Summary</strong></p>
<ul class="simple">
<li><p>Data are selected using the parameters scan, ifnum,
intnum and plnum or, alternatively, sampler and intnum if you
know the specific sampler name (e.g. A10).  The second scan
in the Nod procedure is identified automatically by this
procedure.</p></li>
<li><p>Individual integrations are processed separately with the same
integration number in the two scans processed together.  Both
scans must have the same number of integrations.  Each
integration is processed using <code class="xref idl idl-pro docutils literal notranslate"><span class="pre">donod</span></code></p></li>
<li><p>The integrations are calibrated in Ta (K) by default.  If
units of Ta* or Jy are requested via the units keyword, then
<code class="xref idl idl-pro docutils literal notranslate"><span class="pre">dcsetunits</span></code> is used to convert to the desired units.</p></li>
<li><p>Averaging of individual integrations is then done using 
<code class="xref idl idl-pro docutils literal notranslate"><span class="pre">dcaccum</span></code>  By default, integrations are weighted as 
described in dcaccum.  If the eqweight keyword is set, then 
integrations are averaged with an equal weight.</p></li>
<li><p>The final average is left in the primary data container
(buffer 0), and a summary line is printed.  The printing of the
summary line can be suppressed by setting the quiet keyword.
The first Tsys displayed is that of the averaged spectrum.  The
other 4 Tsys values displayed are weighted averages of the Tsys
values from each of the 4 beam/scan combinations that make up
each integration (see donod for more details).  These values
can be useful in assessing the quality of the parts of the data
that make up the final result.</p></li>
<li><p>The individual integration results can be saved to the
currently opened output file by setting the keepints keyword.
The final average is still produced in that case.</p></li>
<li><p>VEGAS will sometimes record scans of different numbers of
integrations even though the setups are the same.  If this occurs
in an On/Off scan pair then this routine procedes by ignoring the
final integration in the longer scan (after first checking that
the difference in the number of integrations is one, otherwise an
error is reported).  This is safe to do, with no loss of data, in
all known cases because the extra integration in the longer scan
will be a partial integration (missing data from one of the
switching states, likely also much shorter than the other
integrations).  So, that extra integration is unusable.</p></li>
</ul>
<p><strong>Parameters</strong></p>
<p>The scan number is required.  Either of the scans in the Nod
pair can be given.  Arguments to identify the IF number,
polarization number, and feed number are optional.  The default 
tracking feed number, trackfdnum, is the lowest numbered FEED 
found in the data.  This feed number is interpreted as the tracking 
(source) feed for the first scan.  The only other possible choice of
trackfdnum here is 1 and the only reason to use that is if the
lowest numbered FEED was not the tracking feed (that is not the
usual configuration for Nod scans). Tracking feed in this context
means that the source signal was in that beam during the first of
the two Nod scans.</p>
<p>If ifnum, trackfdnum, or plnum are not supplied then the lowest
values for each of those where data exists (all combinations may not
have data) will be used, after using any user-supplied values.  The
value of ifnum is determined first, followed by trackfdnum and
finally plnum.  If a combination with data can not be found then
&lt;a href=showiftab.html&gt;showiftab&lt;/a&gt; is used to show the user what
the set of valid combinations are.  The summary line includes the
ifnum, trackfdnum, and plnum used.</p>
<p><strong>Tsys and Available Units</strong></p>
<p>The procedure calculates Tsys based on the Tcal values and the
data in the non-source feeds (both scans).  The user can override 
this calculation by entering a zenith system temperature.  The
procedure will then correct the user-supplied Tsys for the observed
elevation.  If the data are calibrated to Ta* or Jy, then additional
parameters are used.  A zenith opacity (tau) may be specified, and
an aperture efficiency may be specified.  The user is strongly
encouraged to enter values for these calibration parameters, but
they will be estimated if none are provided.  The user can also
override the default Tcal by supplying a mean Tcal using the tcal
keyword.</p>
<p><strong>Smoothing the Reference Spectra</strong></p>
<p>A parameter called smthoff can be used to smooth the reference
spectrum prior to calibration.  In certain conditions this technique
can improve the signal to noise ratio, but it may degrade baseline
shapes and artificially emphasize spectrometer glitches.  Use with
care.  A value of smthoff=16 is often a good choice.</p>
<p><strong>Weighting of Integrations in Scan Average</strong></p>
<p>By default, internal averaging of integrations is weighted using
Tsys, exposure and frequency_resolution as described in the
<code class="xref idl idl-pro docutils literal notranslate"><span class="pre">dcaccum</span></code> documentation.  To give all integrations equal weight 
instead of the default weighting based on Tsys, use the /eqweight
keyword.</p>
<p><strong>Summary Information</strong></p>
<p>The getnod procedure provides some information in the terminal as it
processes data.  The scan number of the first scan in the Nod
pair along with the ifnum, trackfdnum, and plnum are shown, followed
by several Tsys values.  The first Tsys printed is the effective
Tsys of the resulting spectrum, a weighted average of the Tsys
values in the reference beams from both scans as described in <code class="xref idl idl-pro docutils literal notranslate"><span class="pre">donod</span></code>  
The other 4 Tsys values are the individual Tsys values from the
components of the calibration, in order: 
scan 1 beam 1, scan 1 beam 2, scan 2  beam 1, scan 2 beam 2.</p>
<p><strong>Using or Ignoring Flags</strong></p>
<p>Flags (set via <a class="reference internal" href="#flag" title="flag"><code class="xref idl idl-pro docutils literal notranslate"><span class="pre">flag</span></code></a>) can be selectively applied or ignored 
using the useflag and skipflag keywords. Only one of those two keywords
can be used at a time.
These keywords can be used either as a boolean (/useflag or /skipflag)
or an array of strings.  The default is /useflag, meaning that all flag
rules that have been previously set are applied when the data is
fetched from disk.  If /skipflag is set, then all flags are ignored (the
spectrum may still contain blanked values if the values in the disk
file have already been blanked by some other process).  If useflag is a
string or array of strings, then only those flag rules having the
same idstring value are used to blank the data.  If skipflag is a
string or array of strings, then all flag rules except those
with the same idstring value are used to blank the data.</p>
<p><strong>Dealing With Duplicate Scan Numbers</strong></p>
<p>Sometimes a data set may have multiple spectra with the same scan number. 
There are 3 ways to attempt to resolve such ambiguities.
The instance keyword is one way.  For example, if scan 23
appears 3 times then instance=1 refers to the second instance of scan 23
in the data set.  The file keyword is useful if a 
scan is unique to a specific file and multiple files have been accessed
using <a class="reference internal" href="#dirin" title="dirin"><code class="xref idl idl-pro docutils literal notranslate"><span class="pre">dirin</span></code></a>.  If file is specified and instance
is also specified, then instance refers to the instance of that scan
just within that file (which may be different from its instance within
all opened files when dirin is used).  The timestamp keyword is another
way to resolve ambiguous scan numbers.  The timestamp here is a string
used essentially as a label by the monitor and control system and is
unique to each scan.  The format of the timestamp string is
YYYY_MM_DD_HH:MM:SS.  When timestamp is given, scan and instance
are ignored.  If more than one timestamp match is found, an error is 
printed and this procedure will not continue.</p>
<p>Once a unique match is found to the desired scan (using instance,
file, or timestamp) then the paired scan is identified.  The match must be found 
within the same file and it must have the appropriate matching
scan number (scan-1 if scan is the second scan in the procedure or
scan+1 if scan is the first scan in the procedure).  If those two
rules are not sufficient to find a unique match, the matching
scan with the closest timestamp in the appropriate direction (before
or after depending on which procseqn is associate with scan) is used.
Finally, the matched pair must have the appropriate procseqn.</p>
<p><em>Note</em>: If you see the message No data found, can not continue the
most likely explanation is that the IF numbers are confused,
probably due to a bad configuration (e.g. both feeds do not have
data from the same IF and polarization).  Consequently, this calibration
routine can not calibrate that data.  It is likely that all of the
IFNUM values for this data are -1.</p>
<dl class="field-list">
<dt class="field-odd">Params<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt>scan in, required, type=integer</dt><dd><p>M&amp;C scan number</p>
</dd>
</dl>
</dd>
<dt class="field-even">Keywords<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt>ifnum<span class="classifier">in, optional, type=integer</span></dt><dd><p>IF number (starting with 0). Defaults to the lowest value associated
with data taking into account any user-supplied values for trackfdnum,
and plnum.</p>
</dd>
<dt>intnum<span class="classifier">in, optional, type=integer</span></dt><dd><p>Integration number, defaults to all integrations.</p>
</dd>
<dt>plnum<span class="classifier">in, optional, type=integer</span></dt><dd><p>Polarization number (starting with 0).  Defaults to the lowest value
with data after determining the values of ifnum and trackfdnum if not
supplied by the user.</p>
</dd>
<dt>sampler<span class="classifier">in, optional, type=string</span></dt><dd><p>sampler name, this is an alternative way to specify ifnum and plnum.
When sampler name is given, ifnum and plnum must not be given. Note 
that data from the associated switched sampler will also be used.</p>
</dd>
<dt>trackfdnum<span class="classifier">in, optional, type=integer</span></dt><dd><p>Tracking feed number. Defaults to the lowest value with data after
determining the value of ifnum if not supplied by the user and using 
any value of plnum supplied by the user.</p>
</dd>
<dt>tau<span class="classifier">in, optional, type=float</span></dt><dd><p>tau at zenith, if not supplied, it is estimated using <code class="xref idl idl-pro docutils literal notranslate"><span class="pre">get_tau</span></code>. 
tau is only used when the requested units are other than the default
of Ta and when a user-supplied tsys value at zenith is to be used.</p>
</dd>
<dt>tsys<span class="classifier">in, optional, type=float</span></dt><dd><p>Tsys at zenith, this is converted to a Tsys at the observed elevation.
If not suppled, the Tsys for each integration is calculated as described
elsewhere.</p>
</dd>
<dt>ap_eff<span class="classifier">in, optional, type=float</span></dt><dd><p>Aperture efficiency, if not suppled, it is estimated using <code class="xref idl idl-pro docutils literal notranslate"><span class="pre">get_ap_eff</span></code>
ap_eff is only used when the requested units are Jy.</p>
</dd>
<dt>smthoff<span class="classifier">in, optional, type=integer</span></dt><dd><p>Smooth factor for reference spectrum, defaults to 1 (no smoothing).</p>
</dd>
<dt>units<span class="classifier">in, optional, type=string</span></dt><dd><p>takes the value Jy, Ta, or Ta*, defaults to Ta</p>
</dd>
<dt>tcal<span class="classifier">in, optional, type=float</span></dt><dd><p>Cal temperature (K) to use in the Tsys calculation.  If not supplied, 
the mean_tcal value from the header of the cal_off switching phase data
in each integration is used.  This must be a scalar, vector tcal is not 
yet supported. The resulting data container will have its mean_tcal header
value set to this keyword when it is set by the user.</p>
</dd>
<dt>eqweight<span class="classifier">in, optional, type=boolean</span></dt><dd><p>When set, all integrations are averaged with equal weight (1.0). Default is unset.</p>
</dd>
<dt>quiet<span class="classifier">in, optional, type=boolean</span></dt><dd><p>When set, the normal status message on successful completion is not printed.
Error messages are not affected.  Default is unset.</p>
</dd>
<dt>keepints<span class="classifier">in, optional, type=boolean</span></dt><dd><p>When set, the individual integrations are saved to the current output file
(fileout).  This keyword is ignored if a specific integration is requested
using the intnum keyword.  Default is unset.</p>
</dd>
<dt>useflag<span class="classifier">in, optional, type=boolean or string</span></dt><dd><p>Apply all or just some of the flag rules?  Default is set.</p>
</dd>
<dt>skipflag<span class="classifier">in, optional, type=boolean or string</span></dt><dd><p>Do not apply any or do not apply a few of the flag rules?  Default is unset.</p>
</dd>
<dt>instance<span class="classifier">in, optional, type=integer</span></dt><dd><p>Which occurence of this scan should be used.  Default is 0.</p>
</dd>
<dt>file<span class="classifier">in, optional, type=string</span></dt><dd><p>When specified, limit the search for this scan (and instance) to this specific 
file.  Default is all files currently opened.</p>
</dd>
<dt>timestamp<span class="classifier">in, optional, type=string</span></dt><dd><p>The M&amp;C timestamp associated with the desired scan. When supplied, scan and 
instance are ignored.</p>
</dd>
</dl>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt>status<span class="classifier">out, optional, type=integer</span></dt><dd><p>This keyword indicates whether the procedure finished as expected.  
A value of 1 means there were no problems, a value of -1 means there were 
problems with the arguments before any data was processed, and a value of 0
means that some of the individual integrations were processed (and possibly
saved to the output file if keepints was set) but there was a problem with 
the final average and the contents of buffer 0 likely contains just the result
from the last integration processed. This keyword is primarily of use when using
getnod with another procedure or function.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Examples<span class="colon">:</span></dt>
<dd class="field-even"><div class="highlight-IDL notranslate"><div class="highlight"><pre><span></span><span class="c1">; average both polarizations from ifnum=1</span>
sclear
getnod,<span class="w"> </span><span class="mi">76</span>,<span class="w"> </span>ifnum<span class="o">=</span><span class="mi">1</span>,<span class="w"> </span>plnum<span class="o">=</span><span class="mi">0</span>
accum
getnod,<span class="w"> </span><span class="mi">76</span>,<span class="w"> </span>ifnum<span class="o">=</span><span class="mi">1</span>,<span class="w"> </span>plnum<span class="o">=</span><span class="mi">1</span>
accum
ave
</pre></div>
</div>
</dd>
<dt class="field-odd">Uses<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="xref idl idl-pro docutils literal notranslate"><span class="pre">accumave</span></code>
<code class="xref idl idl-pro docutils literal notranslate"><span class="pre">accumclear</span></code>
<a class="reference internal" href="#calsummary" title="calsummary"><code class="xref idl idl-pro docutils literal notranslate"><span class="pre">calsummary</span></code></a>
<a class="reference internal" href="#check_calib_args" title="check_calib_args"><code class="xref idl idl-pro docutils literal notranslate"><span class="pre">check_calib_args</span></code></a>
<code class="xref idl idl-pro docutils literal notranslate"><span class="pre">data_free</span></code>
<code class="xref idl idl-pro docutils literal notranslate"><span class="pre">dcaccum</span></code>
<code class="xref idl idl-pro docutils literal notranslate"><span class="pre">dcscale</span></code>
<code class="xref idl idl-pro docutils literal notranslate"><span class="pre">dcsetunits</span></code>
<code class="xref idl idl-pro docutils literal notranslate"><span class="pre">donod</span></code>
<a class="reference internal" href="#find_paired_info" title="find_paired_info"><code class="xref idl idl-pro docutils literal notranslate"><span class="pre">find_paired_info</span></code></a>
<a class="reference internal" href="#find_scan_info" title="find_scan_info"><code class="xref idl idl-pro docutils literal notranslate"><span class="pre">find_scan_info</span></code></a>
<a class="reference internal" href="#get_calib_data" title="get_calib_data"><code class="xref idl idl-pro docutils literal notranslate"><span class="pre">get_calib_data</span></code></a>
<a class="reference internal" href="#set_data_container" title="set_data_container"><code class="xref idl idl-pro docutils literal notranslate"><span class="pre">set_data_container</span></code></a>
<a class="reference internal" href="#showiftab" title="showiftab"><code class="xref idl idl-pro docutils literal notranslate"><span class="pre">showiftab</span></code></a></p>
</dd>
</dl>
<p>&#64;version $Id;-</p>
</dd></dl>

<dl class="idl pro">
<dt class="sig sig-object idl" id="bmodel">
<em class="property"><span class="pre">pro</span></em><span class="sig-name descname"><span class="pre">bmodel</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">modelbuffer=modelbuffer</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nfit=nfit</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ok=ok</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#bmodel" title="Link to this definition">#</a></dt>
<dd><p>Fill in the indicated data container at modelbuffer using the
primary data container and the most recently fit parameters in
!g.polyfit and !g.nfit.  Optionally use a smaller nfit than
!g.nfit.</p>
<p>&lt;p&gt;Note that bmodel does not do any fitting.  Use &lt;a href=baseline.html&gt;baseline&lt;/a&gt; or &lt;href=bshape.html&gt;bshape&lt;/a&gt;
to generate a new fit.</p>
<p>&lt;p&gt;Since orthogonal polynomials are used internally, using up
to any nfit less than or equal to the value of nfit used when the
polynomials was generated is itself the fit that would have resulted
had that smaller nfit been used in the first place.  In this way,
bmodel can be used to generate the model fit for any value of nfit
up to the nfit actually used to generate the most recently fit
polynomial.</p>
<p>&#64;keyword modelbuffer {in}{optional}{type=integer}{default=1} The
buffer number of the data container to use to hold the model.
Defaults to 1 if not supplied.</p>
<p>&#64;keyword nfit {in}{optional}{type=integer} Only use at most nfit
parameters.  If !g.nfit is less then nfit, then only !g.nfit parameters will
be used and a warning will be issued.</p>
<p>&#64;keyword ok {out}{optional}{type=boolean} 1 on success, 0 on failure.</p>
<p>&#64;uses &lt;a href=../toolbox/data_valid.html&gt;data_valid&lt;/a&gt;
&#64;uses &lt;a href=getbasemodel.html&gt;getbasemodel&lt;/a&gt;</p>
<p>&#64;examples
&lt;pre&gt;
; put the model in !g.s[1]
bmodel
; put the model in !g.s[10], using nfit=5
nfit,5
bmodel, modelbuffer=10
; put the model with nfit=2 into buffer 11
bmodel modelbuffer=11, nfit=2
&lt;/pre&gt;</p>
<p>&#64;version $Id;-</p>
</dd></dl>

<dl class="idl pro">
<dt class="sig sig-object idl" id="avgstack">
<em class="property"><span class="pre">pro</span></em><span class="sig-name descname"><span class="pre">avgstack</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">noclear=noclear</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">useflag=useflag</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">skipflag=skipflag</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keep=keep</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#avgstack" title="Link to this definition">#</a></dt>
<dd></dd></dl>

<dl class="idl pro">
<dt class="sig sig-object idl" id="nget">
<em class="property"><span class="pre">pro</span></em><span class="sig-name descname"><span class="pre">nget</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">nsave</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">buffer=buffer</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">infile=infile</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">useflag=useflag</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">skipflag=skipflag</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ok=ok</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#nget" title="Link to this definition">#</a></dt>
<dd><p>Get a previously saved data container with the matching
nsave number, and put it in the indicated global buffer number.</p>
<p>Only spectral line data can currently be fetched using an nsave number.</p>
<p>nget fetchs data from the output file (keep file) unless infile is set.</p>
<p>Flags (set via &lt;a href=flag.html&gt;flag&lt;/a&gt;) can be selectively applied or ignored using 
the useflag and skipflag keywords.  Only one of those two keywords
can be used at a time (it is an error to use both at the same time).
Both can be either a boolean (/useflag or /skipflag) or an array of
strings.  The default is /useflag, meaning that all flag rules that
have been previously set are applied when the data is fetched from
disk, blanking data as described by each rule.  If /skipflag is set,
then all of the flag rules associated with this data are ignored and
no data will be blanked when fetched from disk (it may still contain
blanked values if the actual values in the disk file have already
been blanked by some other process).  If useflag is a string or
array of strings, then only those flag rules having the same
idstring value are used to blank the data.  If skipflag is a string
or array of strings, then all flag rules except those with the same
idstring value are used to blank the data.</p>
<dl class="field-list simple">
<dt class="field-odd">Params<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt>nsave<span class="classifier">in, required, type=long</span></dt><dd><p>nsave number to be retrieved</p>
</dd>
</dl>
</dd>
<dt class="field-even">Keywords<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt>buffer<span class="classifier">in, optional, type=long</span></dt><dd><p>global buffer number where the retrieved spectrum is stored (defaults to 0).</p>
</dd>
<dt>infile<span class="classifier">in, optional, type=boolean</span></dt><dd><p>if set, use line input file instead of the output file.</p>
</dd>
<dt>useflag<span class="classifier">in, optional, type=boolean or string, default=true</span></dt><dd><p>Apply all or just some of the flag rules?</p>
</dd>
<dt>skipflag<span class="classifier">in, optional, type=boolean or string</span></dt><dd><p>Do not apply any or do not apply a few of the flag rules?</p>
</dd>
</dl>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt>ok<span class="classifier">out, optional, type=boolean</span></dt><dd><p>status output</p>
</dd>
</dl>
</dd>
<dt class="field-even">Uses<span class="colon">:</span></dt>
<dd class="field-even"><p>&lt;a href=set_data_container.html&gt;set_data_container&lt;/a&gt;</p>
</dd>
<dt class="field-odd">Examples<span class="colon">:</span></dt>
<dd class="field-odd"><p>; get some data    
getps,10
; do stuff to it and save result in nsave=50
nsave,50
; do more stuff to that data, but oops, thats no good
; back to previous state
nget,50</p>
</dd>
</dl>
</dd></dl>

<dl class="idl pro">
<dt class="sig sig-object idl" id="accum">
<em class="property"><span class="pre">pro</span></em><span class="sig-name descname"><span class="pre">accum</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">accumnum</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">weight=weight</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dc=dc</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#accum" title="Link to this definition">#</a></dt>
<dd><p>This procedure adds a data container to an accum buffer, in
preparation for averaging.  The primary data container (!g.s[0], the
PDC) is used by default but an alternate data container can be
specified using the dc keyword.</p>
<p>The first data container accumed in a buffer is used as a
template for that buffer and subsequent data containers accumed to
that buffer must match in number of channels.  On subsequent uses of
accum, a warning is printed if the channel spacing
(frequency_interval) or frequency resolution differs from the values
already in the buffer.  The accumulation proceeds even when a
warning is printed.  Use <a class="reference internal" href="#resample" title="resample"><code class="xref idl idl-pro docutils literal notranslate"><span class="pre">resample</span></code></a> to change the frequency_interval 
and <a class="reference internal" href="#gsmooth" title="gsmooth"><code class="xref idl idl-pro docutils literal notranslate"><span class="pre">gsmooth</span></code></a> to change the frequency_resolution.</p>
<p>There are four accum buffers available to this and related 
GUIDE-layer procedures.  Users can use these to have several
averages proceeding simultaneously, but separately, when it is useful
to do so (e.g. polarizations).  Use the accumnum keyword to specify
which buffer to use (defaults to 0).</p>
<p>The default weight for each spectrum is exposure*frequency_resolution/Tsys^2. 
A different weight can be given using the weight keyword.  Alternatively, each 
channel can be given a separate weight by providing a vector of weights in the
weight argument.  In that case, the number of elements in weight
must be the same as in the data.  This can be used to re-start an
accum from a previous average where the weight was retrieved from
that average.  See <a class="reference internal" href="#ave" title="ave"><code class="xref idl idl-pro docutils literal notranslate"><span class="pre">ave</span></code></a> for more details.  See <code class="xref idl idl-pro docutils literal notranslate"><span class="pre">dcaccum</span></code> for 
additional information on how the header parameters are weighted
during the accumulation.</p>
<p>Blanked channels (Not a Number data values) are excluded from the
average. An entirely blanked spectrum (all values are NaNs - e.g. bad
lags from the GBT spectrometer) is completely ignored by the
accumulation (the contents of that accum buffer are unchanged).</p>
<dl class="field-list">
<dt class="field-odd">Params<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt>accumnum<span class="classifier">in, optional, type=integer, default=0</span></dt><dd><p>accum buffer. Defaults to the primary buffer (accumnum = 0). 
There are 4 buffers in all so this value must be between 0 and 3, inclusive.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Keywords<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt>weight<span class="classifier">in, optional, type=float</span></dt><dd><p>The weight to use for averaging this data. If not set, a weight of
exposure*frequency_resolution/Tsys^2 is used. This can also be a
vector of weights, one per channel.</p>
</dd>
<dt>dc<span class="classifier">in, optional, type=spectrum or integer</span></dt><dd><p>The data container to accum.  If not supplied, use the PDC.  If this is an
integer, then use the data container at that buffer number in !g.s.</p>
</dd>
</dl>
</dd>
<dt class="field-odd">Examples<span class="colon">:</span></dt>
<dd class="field-odd"><p>A simple averaging operation:</p>
<div class="highlight-IDL notranslate"><div class="highlight"><pre><span></span>sclear
getrec,<span class="mi">1</span>
accum
getrec,<span class="mi">2</span>
accum
ave
</pre></div>
</div>
<p>Average two polarizations separately for some position switched scans</p>
<div class="highlight-IDL notranslate"><div class="highlight"><pre><span></span>sclear<span class="w">                  </span>;<span class="w"> </span>clears<span class="w"> </span>accum<span class="w"> </span>buffer<span class="w"> </span><span class="mi">0</span>;
sclear,<span class="w"> </span><span class="mi">1</span><span class="w">               </span>;<span class="w"> </span>clears<span class="w"> </span>accum<span class="w"> </span>buffers<span class="w"> </span><span class="mi">1</span>
getps,<span class="mi">32</span>,plnum<span class="o">=</span><span class="mi">0</span>
accum,<span class="w"> </span><span class="mi">0</span>
getps,<span class="mi">32</span>,plnum<span class="o">=</span><span class="mi">1</span>
accum,<span class="w"> </span><span class="mi">1</span>
getps,<span class="mi">34</span>,plnum<span class="o">=</span><span class="mi">0</span>
accum,<span class="w"> </span><span class="mi">0</span>
getps,<span class="mi">34</span>,plnum<span class="o">=</span><span class="mi">1</span>
accum,<span class="w"> </span><span class="mi">1</span>
ave,<span class="mi">1</span><span class="w">                   </span>;<span class="w"> </span>Average<span class="w"> </span>plnum<span class="o">=</span><span class="mi">1</span><span class="w"> </span>data<span class="w"> </span><span class="k">and</span><span class="w"> </span>store<span class="w"> </span>the<span class="w"> </span>result<span class="w"> </span>in<span class="w"> </span>the<span class="w"> </span>PDC
copy,<span class="mi">0</span>,<span class="mi">1</span><span class="w">                </span>;<span class="w"> </span>Copy<span class="w"> </span>the<span class="w"> </span>result<span class="w"> </span>to<span class="w"> </span>DC<span class="w"> </span><span class="mi">1</span>
ave,<span class="w"> </span><span class="mi">0</span><span class="w">                  </span>;<span class="w"> </span>Average<span class="w"> </span>plnum<span class="o">=</span><span class="mi">0</span><span class="w"> </span>data
oshow,<span class="w"> </span><span class="mi">1</span><span class="w">                </span>;<span class="w"> </span>Overplot<span class="w"> </span>the<span class="w"> </span>plnum<span class="o">=</span><span class="mi">1</span><span class="w"> </span>average
</pre></div>
</div>
<p>Average some data, remember the vector weights at the average, and
then average some more data.</p>
<div class="highlight-IDL notranslate"><div class="highlight"><pre><span></span>sclear
getrec,<span class="mi">1</span>
accum
getrec,<span class="mi">2</span>
accum
ave,<span class="w"> </span>wtarray<span class="o">=</span>wtave1_3
copy,<span class="w"> </span><span class="mi">0</span>,<span class="w"> </span><span class="mi">10</span><span class="w">              </span>;<span class="w"> </span><span class="nb">save</span><span class="w"> </span>average<span class="w"> </span><span class="k">for</span><span class="w"> </span>later<span class="w"> </span>use
sclear<span class="w">                   </span>;<span class="w"> </span>no<span class="w"> </span>necessary,<span class="w"> </span>but<span class="w"> </span>better<span class="w"> </span>to<span class="w"> </span>be<span class="w"> </span>sure
getrec,<span class="mi">3</span>
accum
getrec,<span class="mi">4</span>
accum
ave,<span class="w"> </span>wtarray<span class="o">=</span>wtave3_4
copy,<span class="w"> </span><span class="mi">0</span>,<span class="w"> </span><span class="mi">11</span><span class="w">              </span>;<span class="w"> </span><span class="nb">save</span><span class="w"> </span>this<span class="w"> </span><span class="k">for</span><span class="w"> </span>later<span class="w"> </span>use
<span class="c1">; other things could happen here</span>
<span class="c1">; average 11 and 10 using appropriate weighting</span>
<span class="c1">; they might not be scalars if some part of each was flagged or blanked</span>
sclear
accum,<span class="w"> </span>dc<span class="o">=</span><span class="mi">10</span>,<span class="w"> </span>weight<span class="o">=</span>wtave1_3
accum,<span class="w"> </span>dc<span class="o">=</span><span class="mi">11</span>,<span class="w"> </span>weight<span class="o">=</span>wtave3_4
ave,<span class="w"> </span>wtarray<span class="o">=</span>wtave_all4
</pre></div>
</div>
</dd>
<dt class="field-even">Uses<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref idl idl-pro docutils literal notranslate"><span class="pre">data_valid</span></code>
<code class="xref idl idl-pro docutils literal notranslate"><span class="pre">dcaccum</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="idl function">
<dt class="sig sig-object idl" id="lastscan">
<em class="property"><span class="pre">function</span></em><span class="sig-name descname"><span class="pre">lastscan</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">keep=keep</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lastscan" title="Link to this definition">#</a></dt>
<dd><p>Returns the scan number of the most recently retrieved data
container.</p>
<p>In line mode, this is the most recently retrieved scan number
from the input line file.  In continuum mode, this is the most
recently retrieved scan number from the input continuum file.  If
the /keep keyword is used, this is the most recently retrieved
scan number from the output line file (the keep file).</p>
<p>This is -1 if nothing has been retrieved from that data source or
if the data source is empty.</p>
<p>If multiple data containers were retrieved in a single call
(e.g. using one of the calibration routines such as getfs) then this
will be the scan number of the last record actually retrieved from
the data source.</p>
<dl class="field-list">
<dt class="field-odd">Keyword<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt>keep<span class="classifier">in, optional, type=boolean</span></dt><dd><p>If set, returns the scan number of the data container most
recently retrieved from the output line file (the keep file).</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>An integer giving the scan number of the last record fetched 
from the data source.  Returns -1 if nothing has been fetched
so far from that data source.</p>
</dd>
<dt class="field-odd">Examples<span class="colon">:</span></dt>
<dd class="field-odd"><div class="highlight-IDL notranslate"><div class="highlight"><pre><span></span><span class="c1">; This could be used to get the next scan, assuming they were sequential</span>
getfs,<span class="w"> </span>lastscan()<span class="o">+</span><span class="mi">1</span>
</pre></div>
</div>
</dd>
</dl>
</dd></dl>

<dl class="idl pro">
<dt class="sig sig-object idl" id="multiply">
<em class="property"><span class="pre">pro</span></em><span class="sig-name descname"><span class="pre">multiply</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">in1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">in2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">out</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#multiply" title="Link to this definition">#</a></dt>
<dd><p>This procedure multiplies the data from two data containers stored
in the global buffers 0-15.</p>
<p>If no parameters are passed, then the data from buffers 0 and 1
are multiplied and the result is stored in buffer 0.  If two
parameters are supplied, the data from the first buffer number is
multiplied by the data from the second buffer number and the result
of the is stored in buffer 0.  If three parameters are supplied, the
result is stored in the third (output) buffer number.</p>
<p>out = in1 * in2</p>
<dl class="field-list">
<dt class="field-odd">Params<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt>in1<span class="classifier">in, optional, type=integer</span></dt><dd><p>First input data buffer number</p>
</dd>
<dt>in2<span class="classifier">in, optional, type=integer</span></dt><dd><p>Second input data buffer number #2</p>
</dd>
<dt>out<span class="classifier">in, optional, type=integer</span></dt><dd><p>Output data buffer number.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Examples<span class="colon">:</span></dt>
<dd class="field-even"><div class="highlight-IDL notranslate"><div class="highlight"><pre><span></span>getrec,<span class="mi">1</span>
copy,<span class="mi">0</span>,<span class="mi">1</span>
getrec,<span class="mi">2</span>
multiply

getrec,<span class="mi">1</span>
copy,<span class="mi">0</span>,<span class="mi">10</span>
getrec,<span class="mi">2</span>
copy,<span class="mi">0</span>,<span class="mi">11</span>
multiply,<span class="mi">10</span>,<span class="mi">11</span>,<span class="mi">12</span><span class="w">   </span>;<span class="w"> </span>The<span class="w"> </span>data<span class="w"> </span>from<span class="w"> </span>buffers<span class="w"> </span><span class="mi">10</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="mi">11</span><span class="w"> </span>are<span class="w"> </span>multiplied
<span class="w">                    </span><span class="c1">; and the result is stored in buffer 12</span>
</pre></div>
</div>
</dd>
<dt class="field-odd">Uses<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="xref idl idl-pro docutils literal notranslate"><span class="pre">dcadd</span></code>
<code class="xref idl idl-pro docutils literal notranslate"><span class="pre">dcpaircheck</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="idl pro">
<dt class="sig sig-object idl" id="getbs">
<em class="property"><span class="pre">pro</span></em><span class="sig-name descname"><span class="pre">getbs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">scan</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ifnum=ifnum</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">intnum=intnum</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plnum=plnum</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">trackfdnum=trackfdnum</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sampler=sampler</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bswitch=bswitch</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tau=tau</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tsys=tsys</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ap_eff=ap_eff</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">smthoff=smthoff</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">units=units</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">eqweight=eqweight</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tcal=tcal</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">quiet=quiet</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keepints=keepints</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">useflag=useflag</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">skipflag=skipflag</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">instance=instance</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file=file</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timestamp=timestamp</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">status=status</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#getbs" title="Link to this definition">#</a></dt>
<dd></dd></dl>

<dl class="idl function">
<dt class="sig sig-object idl" id="get_scan_numbers">
<em class="property"><span class="pre">function</span></em><span class="sig-name descname"><span class="pre">get_scan_numbers</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">count</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keep=keep</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">unique=unique</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_EXTRA=ex</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#get_scan_numbers" title="Link to this definition">#</a></dt>
<dd></dd></dl>

<dl class="idl function">
<dt class="sig sig-object idl" id="getfindindex">
<em class="property"><span class="pre">function</span></em><span class="sig-name descname"><span class="pre">getfindindex</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">param</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode=mode</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">count=count</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#getfindindex" title="Link to this definition">#</a></dt>
<dd><p>Utility function used by setfind, listfind, and clearfind to
translate a parameter name into an index number in the !g.find
structure.  Additional information on that index is also returned.</p>
<p>&#64;param param {in}{required}{type=string} The parameter to locate in
!g.find.  minimum-match is allowed here.  Case is
unimportant. Arrays of parameters are not allowed (-1 will be
returned).</p>
<p>&#64;keyword mode {out}{optional}{type=integer} The mode that this is
appropriate for.  -1 is all modes, 0 is line and 1 is continuum.</p>
<p>&#64;keyword count {out}{optional}{type=integer} The number of matches
to param found in !g.find.</p>
<p>&#64;returns Index values of param.  Returns -1 if not found.</p>
<p>&#64;private_file</p>
<p>&#64;version $Id;-</p>
</dd></dl>

<dl class="idl pro">
<dt class="sig sig-object idl" id="gsmooth">
<em class="property"><span class="pre">pro</span></em><span class="sig-name descname"><span class="pre">gsmooth</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">newres</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">buffer=buffer</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">decimate=decimate</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#gsmooth" title="Link to this definition">#</a></dt>
<dd></dd></dl>

<dl class="idl pro">
<dt class="sig sig-object idl" id="bshape">
<em class="property"><span class="pre">pro</span></em><span class="sig-name descname"><span class="pre">bshape</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">nfit=nfit</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">noshow=noshow</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">modelbuffer=modelbuffer</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ok=ok</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">color=color</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#bshape" title="Link to this definition">#</a></dt>
<dd><p>Fit a polynomial baseline to the contents of the primary data
container (the PDC, buffer 0) and  optionally overplot that fit on
to the current plot.</p>
<p>&lt;p&gt;This fits a set of orthogonal polynomials with a maximum order
given by the !g.nfit value to the data values in the primary data
container.  The range of channels to use is given by !g.regions and
!g.nregion. The parameters of the fit are placed in to !g.polyfit
and the polynomial is evaluated over all channels.  That evaluation
is placed into the data container at modelbuffer (see the comments
for that keyword for more details), which is otherwise  a copy of
the header information in global buffer 0.</p>
<p>&#64;keyword nfit {in}{optional}{type=integer} The order of polynomial
to fit.  Defaults to !g.nfit.  If set, then this also sets the value
of !g.nfit.</p>
<p>&#64;keyword noshow {in}{optional}{type=boolean} If set, the result is
not shown (overplotted).  If the plotter is frozen, then nothing is
overplotted even if this keyword is not set.</p>
<p>&#64;keyword modelbuffer {in}{optional}{type=integer} The buffer number
to hold the fit evaluated at all channels (the model).  If not set  
then no global buffer will hold the model after this procedure is
used.</p>
<p>&#64;keyword ok {out}{optional}{type=boolean} This is set to 1 on
success and 0 on failure.</p>
<p>&#64;keyword color {in}{optional}{type=color} The color to use when
overplotting the baseline fit.  This defaults to the same default
used by &lt;a href=../plotter/gbtoplot.html&gt;gbtoplot&lt;/a&gt;</p>
<p>&#64;examples
&lt;pre&gt;
; fit, using the value of !g.nfit, set using nfit
nfit,3
bshape
; Or specify an nfit here, keeping the fit in buffer 10
bshape,nfit=3, modelbuffer=10
&lt;/pre&gt;</p>
<p>&#64;uses &lt;a href=../toolbox/dcbaseline.html&gt;dcbaseline&lt;/a&gt;
&#64;uses &lt;a href=getbasemodel.html&gt;getbasemodel&lt;/a&gt;
&#64;uses &lt;a href=../toolbox/data_valid.html&gt;data_valid&lt;/a&gt;
&#64;uses &lt;a href=bmodel.html&gt;bmodel&lt;/a&gt;</p>
<p>&#64;version $Id;-</p>
</dd></dl>

<dl class="idl function">
<dt class="sig sig-object idl" id="check_file_conflicts">
<em class="property"><span class="pre">function</span></em><span class="sig-name descname"><span class="pre">check_file_conflicts</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">files</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">in=in</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">out=out</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#check_file_conflicts" title="Link to this definition">#</a></dt>
<dd><p>Performs checking of the filenames in the 
the guide structure, !g.  Called by filein, dirin, and fileout.</p>
<p>Files selected for input cannot be used as output, and vice versa.</p>
<p>&#64;param files {in}{required}{type=array} array of file names</p>
<p>&#64;keyword in {in}{optional}{type=boolean} the filenames are ment for input
&#64;keyword out {in}{optional}{type=boolean} the filename is ment for output</p>
<p>&#64;returns 0, 1</p>
<p>&#64;private_file</p>
</dd></dl>

<dl class="idl pro">
<dt class="sig sig-object idl" id="move">
<em class="property"><span class="pre">pro</span></em><span class="sig-name descname"><span class="pre">move</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">in</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">out</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#move" title="Link to this definition">#</a></dt>
<dd><p>Move the data from the in location to the out location.  Anything in
out is lost.  This uses the value of !g.line.  If it is set (1)
then the array of line data (!g.s) is used, otherwise the array of
continuum data (!g.c) is used.  The contents of in are
emptied and lost.</p>
<p>&#64;param in {in}{required}{type=integer} The buffer to move
values from.</p>
<p>&#64;param out {in}{required}{type=integer} The buffer to move the
values to.</p>
<p>&#64;examples
Move the contents of location 0 to location 10.  Then move the
contents of 9 to location 0.
&lt;pre&gt;</p>
<blockquote>
<div><p>copy, 0, 10
copy, 9, 0</p>
</div></blockquote>
<p>&lt;/pre&gt;</p>
<p>&#64;uses &lt;a href=copy.html&gt;copy&lt;/a&gt;</p>
<p>&#64;version $Id;-</p>
</dd></dl>

<dl class="idl pro">
<dt class="sig sig-object idl" id="gparamvalues">
<em class="property"><span class="pre">pro</span></em><span class="sig-name descname"><span class="pre">gparamvalues</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">gauss_index</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">values</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#gparamvalues" title="Link to this definition">#</a></dt>
<dd><p>Procedure to put values into the !g.gauss.params container.</p>
<p>&#64;param gauss_index {in}{required}{type=long} Which gaussian (0 to
ngauss-1) to set the parameters of.
&#64;param values {in}{required}{type=double array} Array of values to
assign to the indicated gaussian (must have 3 elements).  Order is
height, center, and full width at half maximum.  The units are
always channels.</p>
<p>&#64;examples
&lt;pre&gt;</p>
<blockquote>
<div><p>ngauss, 2    ; set up for 2 gaussians
gparamvalues, 0, [1020.0, 1.24, 12.4]</p>
</div></blockquote>
<p>&lt;/pre&gt;</p>
<p>&#64;version $Id;-</p>
</dd></dl>

<dl class="idl function">
<dt class="sig sig-object idl" id="getbasemodel">
<em class="property"><span class="pre">function</span></em><span class="sig-name descname"><span class="pre">getbasemodel</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">nfit=nfit</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ok=ok</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#getbasemodel" title="Link to this definition">#</a></dt>
<dd><p>Function to return the polynomial using the most recently fitted
baseline coefficients and !g.nfit or the nfit keyword using the
data in the primary data container.  This function is used in
all of the GUIDE baseline related functions but may also be useful
in other uses.</p>
<p>&lt;p&gt;Note that getbasemodel does not do any fitting.  Use &lt;a href=baseline.html&gt;baseline&lt;/a&gt; or &lt;href=bshape.html&gt;bshape&lt;/a&gt;
to generate a new fit.</p>
<p>&lt;p&gt;Since orthogonal polynomials are used internally, using up
to any nfit less than or equal to the value of nfit used when the
polynomials were generated is itself the fit that would have resulted
had that smaller nfit been used in the first place.  In this way,
getbasemodel can be used to generate the model fit for any value of
nfit up to the nfit actually used to generate the most recently fit
polynomial.</p>
<p>&#64;keyword nfit {in}{optional}{type=integer} Only use at most nfit
parameters.  If !g.nfit is less then nfit, then only !g.nfit parameters will
be used and a warning will be issued.</p>
<p>&#64;keyword ok {out}{optional}{type=boolean} 1 on success, 0 on failure.</p>
<p>&#64;returns Array corresponding to the polynomial at !g,polyfit through nfit
evaluated at all of the channels in the primary data container.  Returns
-1 on failure (ok will be 0).</p>
<p>&#64;examples
&lt;pre&gt;</p>
<blockquote>
<div><p>getrec, 20                            ; get some data
nregion,[100,500,700,1000,1600,2000]  ; set up regions to fit
nfit,7                                ; 7th order fit
bmodel                                ; do the fit
lastfit = getbasemodel()              ; get the fit
lastfit_n2 = getbasemodel(nfit=2)     ; only use up to 2nd order terms</p>
</div></blockquote>
<p>&lt;/pre&gt;</p>
<p>&#64;uses &lt;a href=../toolbox/ortho_poly.html&gt;ortho_poly&lt;/a&gt;
&#64;uses &lt;a href=../toolbox/data_valid.html&gt;data_valid&lt;/a&gt;</p>
<p>&#64;version $Id;-</p>
</dd></dl>

<dl class="idl pro">
<dt class="sig sig-object idl" id="gstatus">
<em class="property"><span class="pre">pro</span></em><span class="sig-name descname"><span class="pre">gstatus</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">full=full</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#gstatus" title="Link to this definition">#</a></dt>
<dd><p>Summarize the status of GBTIDL as found in the global structure used
by GBTIDL (!g).</p>
<p>&lt;p&gt;This summarizes the parts of the !g structure that the user
is most likely to care about.  help,!g,/struct is useful, but
only if you know exactly what you are looking for.  Many fields
in !g are not intended to be manipulated directly by the user
and even those that are are sometimes difficult to interpret.</p>
<p>&lt;p&gt;Using /full adds plotter color settings to the output.</p>
<p>&lt;p&gt;See also the description of the contents of the !g structure &lt;a href=<a class="reference external" href="http://wwwlocal.gb.nrao.edu/GBT/DA/gbtidl/users_guide/node59.html">http://wwwlocal.gb.nrao.edu/GBT/DA/gbtidl/users_guide/node59.html</a> TARGET=_top&gt;appendix A&lt;/a&gt;
in appendix A of the &lt;a href=<a class="reference external" href="http://wwwlocal.gb.nrao.edu/GBT/DA/gbtidl/users_guide">http://wwwlocal.gb.nrao.edu/GBT/DA/gbtidl/users_guide</a> TARGET=_TOP&gt;Users Guide.&lt;/a&gt;</p>
<p>&#64;keyword full {in}{optional}{type=boolean} If set, color settings
are also summarized.  The default is to omit that information.</p>
<p>&#64;examples
&lt;pre&gt;</p>
<blockquote>
<div><p>gstatus</p>
</div></blockquote>
<p>&lt;/pre&gt;</p>
<p>&#64;version $Id;-</p>
</dd></dl>

<dl class="idl function">
<dt class="sig sig-object idl" id="getbangcolor">
<em class="property"><span class="pre">function</span></em><span class="sig-name descname"><span class="pre">getbangcolor</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cvalue</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#getbangcolor" title="Link to this definition">#</a></dt>
<dd><p>Translate color value into !name string.  Used by gstatus to
format the colors in a human readable form.</p>
<p>&#64;param cvalue {in}{required}{type=intetger} The color value to
translate.</p>
<p>&#64;private</p>
</dd></dl>

<dl class="idl pro">
<dt class="sig sig-object idl" id="files">
<em class="property"><span class="pre">pro</span></em><span class="sig-name descname"><span class="pre">files</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">full=full</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#files" title="Link to this definition">#</a></dt>
<dd><p>Prints the file names being used for I/O.</p>
<p>&lt;p&gt;NOTE: This relies on the information at !g.line_filein_name,
!g.cont_filein_name and !g.line_filout_name to be correct.
&lt;a href=gstatus.html&gt;gstatus&lt;/a&gt; can also be used to show the files currently in 
use (along with other GBTIDL information).</p>
<p>&#64;keyword full {in}{optional}{type=boolean} When set, expand the file
names to their full paths using the IDL file_expand_path function.</p>
<p>&#64;examples
&lt;pre&gt;
filein, /home/line.fits
cont
filein, /home/continuum.fits
files, /full ; print full path names</p>
<blockquote>
<div><p>spectral line  in : /home/fsfold.fits
spectral line out : /home/GBTIDL_KEEP.fits</p>
<blockquote>
<div><p>continuum  in : /home/continuum.fits</p>
</div></blockquote>
</div></blockquote>
<p>&lt;/pre&gt;</p>
<p>&lt;p&gt;Note that GBTIDL_KEEP.fits, is the default output file and it is
opened automatically on startup.</p>
<p>&#64;version $Id;-</p>
</dd></dl>

<dl class="idl pro">
<dt class="sig sig-object idl" id="baseline">
<em class="property"><span class="pre">pro</span></em><span class="sig-name descname"><span class="pre">baseline</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">nfit=nfit</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">modelbuffer=modelbuffer</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ok=ok</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#baseline" title="Link to this definition">#</a></dt>
<dd></dd></dl>

<dl class="idl pro">
<dt class="sig sig-object idl" id="fitgauss">
<em class="property"><span class="pre">pro</span></em><span class="sig-name descname"><span class="pre">fitgauss</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fit</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fitrms</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">modelbuffer=modelbuffer</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">highlightcolor=highlightcolor</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#fitgauss" title="Link to this definition">#</a></dt>
<dd><p>An interactive procedure that allows the user to fit gaussians.</p>
<p>The user should first subtract a baseline from the data prior to
using this procedure.  Next, use the plotter zoom feature to narrow
in on the region of interest.  Then run fitgauss.  Click the left
mouse button to mark the regions to be considered in the fit.  Then
click the middle mouse button, twice for each gaussian to be fit,
first at the (guessed) peak of the  line, and then at the half-power
point.  Repeat the middle mouse clicks as  many times as you like to
fit multiple components.  Finally click the right mouse button to
actually do the fit and display the results.</p>
<p>&lt;p&gt;Each guassian (middle mouse clicks) must be found in an already
set region (left mouse button).  Use the right mouse button to exit
at any time (will require 2 right clicks to quit the procedure in
the middle of a step - marking a region or identifying a gaussian).</p>
<p>&#64;param fit {out}{optional}{type=array} An output array giving the results 
of the fit. Also stored in !g.gauss.fit.
&#64;param fitrms {out}{optional}{type=array} An output array giving the 
uncertainties of the fit.  Also stored in !g.gauss.fitrms.
&#64;keyword modelbuffer {in}{optional}{type=long}{default=-1} The buffer
number to hold the resulting model.  If not set (the default) then the
model is not saved to a global buffer.
&#64;keyword highlightcolor {in}{optional}{type=color}{default=!g.highlightcolor} 
The color to use after the region of interest has been selected to
highlight the data.</p>
<p>&#64;examples
&lt;pre&gt;</p>
<blockquote>
<div><p>fitgauss,modelbuffer=10   ; fit gaussian and store model in buffer 10
show
subtract,0,10,11          ; store residual in buffer 11
oshow, 11                 ; overlay residual
oshow, 10, color=!yellow  ; overlay gaussian model</p>
</div></blockquote>
<p>&lt;/pre&gt;</p>
<p>&#64;version $Id;-</p>
</dd></dl>

<dl class="idl pro">
<dt class="sig sig-object idl" id="find_region">
<em class="property"><span class="pre">pro</span></em><span class="sig-name descname"><span class="pre">find_region</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">nregions</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">regions</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">x</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">region</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#find_region" title="Link to this definition">#</a></dt>
<dd><p>Used internally in fitgauss, finds the region index number in
regions where x can be found.</p>
<p>&#64;param nregions {in}{required}{type=integer} The number of regions
that exist in regions.
&#64;param regions {in}{required}{type=array} The regions to check.
&#64;param x {in}{required}{type=scalar} The value to check to see what
region it falls in.
&#64;param region {out}{required}{type=integer} The region number where
x is found.  Set to -1 if no region found.</p>
<p>&#64;private</p>
</dd></dl>

<dl class="idl pro">
<dt class="sig sig-object idl" id="overlap_check">
<em class="property"><span class="pre">pro</span></em><span class="sig-name descname"><span class="pre">overlap_check</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">nregions</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">regions</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">checkpoint</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">status</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#overlap_check" title="Link to this definition">#</a></dt>
<dd><p>Check to see if two regions overlap.  Used internally only.</p>
<p>&#64;param nregions {in}{required}{type=integer} The number of regions.
&#64;param regions {in}{required}{type=array} The regions to check
&#64;param checkpoint {in}{required}{type=scalar} The point to check.
&#64;param status {out}{required}{type=integer} The status of the check.</p>
<p>&#64;private</p>
</dd></dl>

<dl class="idl pro">
<dt class="sig sig-object idl" id="getrec">
<em class="property"><span class="pre">pro</span></em><span class="sig-name descname"><span class="pre">getrec</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">index</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">useflag=useflag</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">skipflag=skipflag</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#getrec" title="Link to this definition">#</a></dt>
<dd><p>Gets the data associated with a given index number in the 
input data set.</p>
<p>&lt;p&gt;This is shorthand for get,index=index with optional use of
useflag or skipflag.  See the documentation for
&lt;a href=get.html&gt;get&lt;/a&gt; for more information.</p>
<p>&#64;param index {in}{required}{type=integer} The index number of the 
record to be retrieved
&#64;keyword useflag {in}{optional}{type=boolean or string}{default=true}
Apply all or just some of the flag rules?
&#64;keyword skipflag {in}{optional}{type=boolean or string} Do not apply
any or do not apply a few of the flag rules?</p>
<p>&#64;examples
&lt;pre&gt;</p>
<blockquote>
<div><p>getrec,1
show
getrec,1,/skipflag  ; ignore all flags
show</p>
</div></blockquote>
<p>&lt;/pre&gt;</p>
<p>&#64;version $Id;-</p>
</dd></dl>

<dl class="idl pro">
<dt class="sig sig-object idl" id="listflags">
<em class="property"><span class="pre">pro</span></em><span class="sig-name descname"><span class="pre">listflags</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">idstring</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">summary=summary</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keep=keep</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#listflags" title="Link to this definition">#</a></dt>
<dd><p>List flags associated with the current input spectral line data file 
or with the keep (output) data file.  Use the idstring parameter to
limit the listing to a specific idstring.</p>
<p>&lt;p&gt;Continuum flagging is not supported.</p>
<p>&#64;param idstring {in}{optional}{type=string}{default=all} The string
to match.  All flags that match this string will be listed.
&#64;keyword summary {in}{optional}{type=boolean} Produces a somewhat more
readable output at the cost of possibly not showing all of the
information.  Truncated information is indicated with . in the
truncated field.  The default is to show all of the information -
which may have long lines and which will not necessarily be nicely
aligned by column.
&#64;keyword keep {in}{optional}{type=boolean} List the flags in the keep
(output) file?</p>
<p>&#64;examples
&lt;pre&gt;</p>
<blockquote>
<div><blockquote>
<div><p>; list all flags, formatted nicely, possibly truncated
listflags, /summary
; only list RFI tagged flags
listflags, RFI</p>
</div></blockquote>
<p>&lt;/pre&gt;</p>
</div></blockquote>
<p>&#64;version $Id;-</p>
</dd></dl>

<dl class="idl function">
<dt class="sig sig-object idl" id="whichsampler">
<em class="property"><span class="pre">function</span></em><span class="sig-name descname"><span class="pre">whichsampler</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">scan</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ifnum</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plnum</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fdnum</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">instance=instance</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file=file</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timestamp=timestamp</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">quiet=quiet</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#whichsampler" title="Link to this definition">#</a></dt>
<dd><p>Find the sampler name which corresponds to the given if, feed, and
polarization numbers in the scan.  This value is the same as the
sampler_name in the data containers associated with that if, feed,
and polarization numbers in the scan.</p>
<p>&lt;p&gt;A single value is always returned.  If the same scan
appears more than once in the data file then a value corresponding
to instance will be returned.  If instance is not used then the
value corresponding to the first instance (instances=0) will be
returned.  The instance and file keywords can be used to ensure 
that a single scan is used.  Alternatively, the timestamp keyword
can be used to ensure that a single scan is used (scan and instance
are ignored in that case).</p>
<p>&lt;p&gt;If the requested combination of if, feed, and polarization
numbers is not found in the scan, the returned value is an empty
string.</p>
<p>&#64;param scan {in}{required}{type=integer} scan number
&#64;param ifnum {in}{required}{type=integer} IF number
&#64;param plnum {in}{required}{type=integer} polarization number
&#64;param fdnum {in}{required}{type=integer} feed number
&#64;keyword instance {in}{optional}{type=integer} Which occurence
of this scan should be used.  Default is 0.
&#64;keyword file {in}{optional}{type=string} When specified, limit the search 
for this scan (and instance) to this specific file.  Default is all files.
&#64;keyword timestamp {in}{optional}{type=string} The M&amp;C timestamp associated
with the desired scan. When supplied, scan and instance are ignored.
&#64;keyword quiet {in}{optional}{type=boolean} When set, suppress most
error messages.  Useful when being used within another procedure.
&#64;returns sampler name</p>
<p>&#64;version $Id;-</p>
</dd></dl>

<dl class="idl function">
<dt class="sig sig-object idl" id="vshift">
<em class="property"><span class="pre">function</span></em><span class="sig-name descname"><span class="pre">vshift</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">accumnum</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">buffer=buffer</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">frame=frame</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">veldef=veldef</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">voffset=voffset</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#vshift" title="Link to this definition">#</a></dt>
<dd><p>Function to calculate the shift, in channels, necessary to align in 
velocity the primary data container with the data container
template in an ongoing accumulation.</p>
<p>&lt;p&gt;You can use an alternate data container by setting buffer.  You
can use an alternate global accumulation buffer by setting accumnum.</p>
<p>&lt;p&gt;If the frame is not set, the one implied by the data header is 
used.  Use &lt;a href=xshift.html&gt;xshift&lt;/a&gt; to align using the current settings of the 
plotters x-axis.</p>
<p>&#64;param accumnum {in}{type=integer}{default=0} Use this accum buffer.
Defaults to the primary buffer, 0.  There are 4 buffers total so
this value must be between 0 and 3, inclusive.</p>
<p>&#64;keyword buffer {in}{optional}{type=integer}{default=0} The data
container that will eventually be shifted.  Defaults to the primary
data container (0).</p>
<p>&#64;keyword frame {in}{optional}{type=string}  The reference frame to
use.  If not supplied, the value implied by the last 4 characters of
the velocity_definition in the ongoing accumulation will be
used.  See &lt;a href=frame_velocity.html&gt;frame_velocity&lt;/a&gt; for a
full list of supported reference frames.</p>
<p>&#64;keyword veldef {in}{optional}{type=string}  The velocity definition to
use.  If not supplied, the value implied by the first 4 characters of
the velocity_definition in the ongoing accumulation will be
used.  See &lt;a href=frame_velocity.html&gt;frame_velocity&lt;/a&gt; for a
full list of supported reference frames.</p>
<p>&#64;keyword voffset {in}{optional}{type=double} A velocity offset in
km/s to apply before aligning.  If not set, this defaults to a value of
0.0.  A typical use would be to set this equal to the source
velocity (at the velocity header value).  Not that the units
expected here are km/s, in agreement with those expected for 
&lt;a href=../plotter/setvoffset.html&gt;setvoffset&lt;/a&gt;. The units for the velocity
header field are m/s.</p>
<p>&#64;returns shift, in channels, to be used as argument to shift,
returns 0.0 on failure.</p>
<p>&#64;examples
&lt;pre&gt;
getps,30
accum             ; accum first spectrum, no alignment needed yet
getps,31
vs = vshift()     ; determine the shift to align scan 31 with scan 30
gshift,vs         ; apply the shift to scan 31
accum             ; and add the result to the accumulator
getps, 32
gshift, vshift()  ; all in one line, shift 32 to align with 30
accum
ave
&lt;/pre&gt;</p>
<p>&#64;uses &lt;a href=../toolbox/dcvshift.html&gt;dcvshift&lt;/a&gt;</p>
<p>&#64;version $Id;-</p>
</dd></dl>

<dl class="idl pro">
<dt class="sig sig-object idl" id="getsigref">
<em class="property"><span class="pre">pro</span></em><span class="sig-name descname"><span class="pre">getsigref</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sigscan</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">refscan</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ifnum=ifnum</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">intnum=intnum</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plnum=plnum</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fdnum=fdnum</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sampler=sampler</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tau=tau</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tsys=tsys</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ap_eff=ap_eff</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">smthoff=smthoff</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">units=units</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">eqweight=eqweight</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tcal=tcal</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">quiet=quiet</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">avgref=avgref</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keepints=keepints</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">useflag=useflag</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">skipflag=skipflag</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">siginstance=siginstance</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sigfile=sigfile</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sigtimestamp=sigtimestamp</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">refinstance=refinstance</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reffile=reffile</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reftimestamp=reftimestamp</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">status=status</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#getsigref" title="Link to this definition">#</a></dt>
<dd></dd></dl>

<dl class="idl pro">
<dt class="sig sig-object idl" id="nregion">
<em class="property"><span class="pre">pro</span></em><span class="sig-name descname"><span class="pre">nregion</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">regions</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#nregion" title="Link to this definition">#</a></dt>
<dd><p>Set some regions for use by other GUIDE procedures and functions.
&lt;p&gt;
This sets the !g.regions structure with the regions described by the
regions argument.  Overlaps in regions are eliminated and the
resulting contents of !g.regions is a set of unique, non-overlapping
regions.  Regions are expressed as channel numbers.  This procedure
always clears the contents of !g.regions before starting.</p>
<p>&lt;p&gt;&lt;B&gt;Note: there is a limit of 100 regions.&lt;/B&gt;  If you need to use
more regions you will need to either use the fitting functions
directly or make a local copy of the guide_struct file which defines
the !g structure and edit the sizes in there.</p>
<p>&#64;param regions {in}{required}{type=integer array} The regions to
set.  If this is a 1D array, then it is interpreted as a sequence of
beginning and ending channels which define n_elements/2 regions,
inclusive.  A warning is issued in that case if n_elements is not a
multiple of 2.  The trailing, unmatched value will be ignored.
Values after the first negative value encountered are also ignored.
If this is a 2D array, then the first dimension must be 2 and the
second dimension is the number of regions.  A warning is issued if
this argument gives more than 100 regions.  Only the first 100
regions are used in that case.  Overlaping regions are eliminated.</p>
<p>&#64;examples
All of these produce identical results
&lt;pre&gt;</p>
<blockquote>
<div><p>; as 1-D array
nregion, [125,180,215,300,320,475]
; as 2-D array
nregion, [[125,180],[215,300],[320,475]]
; same regions, beginning and end channels swapped
nregion, [180,125,300,215,320,475]
; overlapping regions
nregion, [125,160,150,180,215,300,320,420,400,475]</p>
</div></blockquote>
<p>&lt;/pre&gt;</p>
<p>&#64;version $Id;-</p>
</dd></dl>

<dl class="idl pro">
<dt class="sig sig-object idl" id="list">
<em class="property"><span class="pre">pro</span></em><span class="sig-name descname"><span class="pre">list</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">start</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">finish</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keep=keep</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">columns=columns</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">user=user</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file=file</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_EXTRA=ex</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#list" title="Link to this definition">#</a></dt>
<dd><p>Lists columns from the index of the input file (or
optionally the keep file) for the indicated range of rows.
Selection can also be done in the same call so that only those rows
that match the selection criteria will be listed.
&lt;p&gt;
The default columns that are listed are: INDEX, SOURCE, SCAN,
PROCEDURE, POLARIZATION, IFNUM, FDNUM, INT, SIG, and CAL. Users can
list other columns by specifying the columns argument.  Users can
alternatively set the list of columns to be show in
!g.user_list_cols and then use the /user flag here.
&lt;p&gt;
columns can be specified as either an array of strings or as a comma
separated list.  The value of !g.user_list_cols is always a comma
separated list.
&lt;p&gt; 
For a complete list of available column names, use &lt;a href=listcols.html&gt;listcols&lt;/a&gt;.
&lt;p&gt;
Additional selection on the index can be done to limit the index
rows that are listed.  The syntax is the same as in select.
The Select section in the &lt;a href=<a class="reference external" href="http://wwwlocal.gb.nrao.edu/GBT/DA/gbtidl/users_guide/node50.html">http://wwwlocal.gb.nrao.edu/GBT/DA/gbtidl/users_guide/node50.html</a> TARGET=_top&gt;Users Guide&lt;/a&gt; gives examples of the 
types of selections possible with list.
&lt;p&gt;
The rows are usually listed in order of increasing index number
(even if index is not listed).  This can be overridden by specifying
another column name to sort on through the sortcol keyword (passed
in through the _EXTRA keyword).
&lt;p&gt;
Use the FILE keyword to send the listing to a file instead of to the
current screen.</p>
<p>&#64;param start {in}{optional}{type=long}{default=0} If set, the beginning of range to list
&#64;param finish {in}{optional}{type=long}{default=last index} If set, the end of range to list</p>
<p>&#64;keyword keep {in}{optional}{type=boolean} If set, the list comes from
the keep file and !g.line is irrelevant.</p>
<p>&#64;keyword columns {in}{optional}{type=string} If present, only list the
values from these columns instead of the default columns.  Can be
either a comma-separated list in a single string or an array of
strings.  columns trumps the user flag, if set.</p>
<p>&#64;keyword user {in}{optional}{type=boolean} If set and columns is not
used, then the columns to list come from the !g.user_list_cols
value.  If that value is empty then this the default list is used.
!g.user_list_cols is a comma-separated list of column names.</p>
<p>&#64;keyword file {in}{optional}{type=string}{default=/dev/tty} The file
to write to.  Defaults to the current screen, using more to page
the output.</p>
<p>&#64;keyword _EXTRA {in}{optional}{type=keywords} In addition to the
selection keywords the &lt;b&gt;sortcol&lt;/b&gt; keyword is also available here.  Set
that equal to a column name and the list order will be sorted in
increasing values of that column.</p>
<p>&#64;examples
&lt;pre&gt;</p>
<blockquote>
<div><p>; list first 11 records in the input file
list,0,10</p>
<p>; list source and polarization for first 11 entries
list,0,10,columns=[source,polarization]</p>
<p>; Set the user preferences to index, source, longitude, latitude
!g.user_list_cols = source,longitude,latitude
; and list using the user preferences
list,0,10,/user</p>
<p>; this illustrates additional selection
; list index, source and tsys for all data in ifnum=1
list,ifnum=1,columns=index,source,polarization</p>
<p>; list, sorting by increasing integration number
list,sortcol=int</p>
<p>; Send the previous list to a file named mylisting
list,sortcol=int,file=mylisting</p>
</div></blockquote>
<p>&lt;/pre&gt;</p>
<p>&#64;version $Id;-</p>
</dd></dl>

<dl class="idl function">
<dt class="sig sig-object idl" id="find_paired_info">
<em class="property"><span class="pre">function</span></em><span class="sig-name descname"><span class="pre">find_paired_info</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">info</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keep=keep</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#find_paired_info" title="Link to this definition">#</a></dt>
<dd><p>Find the scan_info associated with the paired scan implied by the
supplied scan_info structure.  See &lt;a href=scan_info.html&gt;scan_info&lt;/a&gt; for a description of the
contents of the structure expected as the info argument as well as
the structure returned by this function.</p>
<p>&lt;p&gt;Scans often come in pairs (OnOff,OffOn,Nod).  When the
possibility of repeated scan numbers at different times and in
different files (in the case of the use of dirin to open more than
one fits file at a time) is taken into account, it becomes
non-trivial to find the scan that is paired with a known scan.  This
routine uses that known scans scan_info structure to find the
scan_info structure associated with the best guess as to the
location of that scans pair.  This returns -1 if no suitable paired
scan could be found.</p>
<p>&lt;p&gt;The paired scan must have the appropriate relative scan number as
implied by info.procseqn.  Since this works for scans taken as a pair
by the same procedure then only procseqns of 1 or 2 are allowed.  If
the procseqn in the info parameter (info.procseqn) is 1, then the
paired scan must have a procseqn of 2.  Similarly, if info.procseqn is
2 then the paired scan must have a procseqn of 1.</p>
<p>&lt;p&gt;The paired scan must be found in the same file as given by
info.file.</p>
<p>&lt;p&gt;When file and procseqn are not sufficient to resolve all
ambiguities, then the scan closest to the info.timestamp in the
appropriate direction is used to identify the best guess at the
paired scan.  Appropriate direction means that if info.procseqn
implies that the paired scan came after the scan described by info,
then its timestamp must be after info.timestamp.  Similarly, if the
paired scan must have come before the scan described by info, then
its timestamp must come before info.timestamp.</p>
<p>&lt;p&gt;This is primarily useful inside of the calibration routines
(e.g. getps) but it may also be useful to users writing their
own processing routines.</p>
<p>&#64;param info {in}{required}{type=structure} The scan_info structure
of the scan whos pair is desired.
&#64;keyword keep {in}{optional}{type=boolean} When present, search the
output file.</p>
<p>&#64;returns The paired scans scan_info structure.  If no pair could be
found, returns -1</p>
<p>&#64;version $Id;-</p>
</dd></dl>

<dl class="idl function">
<dt class="sig sig-object idl" id="check_calib_args">
<em class="property"><span class="pre">function</span></em><span class="sig-name descname"><span class="pre">check_calib_args</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">scan</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">refscan</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">intnum=intnum</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ifnum=ifnum</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plnum=plnum</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fdnum=fdnum</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sampler=sampler</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">eqweight=eqweight</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">units=units</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bswitch=bswitch</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">quiet=quiet</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keepints=keepints</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">useflag=useflag</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">skipflag=skipflag</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">instance=instance</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file=file</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timestamp=timestamp</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">refinstance=refinstance</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reffile=reffile</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reftimestamp=reftimestamp</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">checkref=checkref</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tau=tau</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ap_eff=ap_eff</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">twofeeds=twofeeds</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sig_state=sig_state</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ret=ret</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">info=info</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#check_calib_args" title="Link to this definition">#</a></dt>
<dd><p>This function is used by the standard calibration routines to handle
some argument checking and to assign default values to keywords
when not provided by the user.</p>
<p>&lt;p&gt;Encapsulating these here should make it easier for users to
adapt a calibration routine to do what they want it to do.</p>
<p>&lt;p&gt;Since the calibration routines all only work for line data,
GBTIDL must currently be in line mode when this routine is called.
If it is in continuum mode, that is an error and this function will
return -1.  In addition, there must already be line data opened
using either filein or dirin.</p>
<p>&lt;p&gt;The argument descriptions here refer to what this routine checks
for, not what the argument means.  For the meaning of a specific
argument, see the calibration routine in question.  Type checking is
only done for string keywords.</p>
<p>&lt;p&gt;Because this routine is designed to be called by another routine,
errors are reported such that the message prefix is the name of the
calling routine.  Users are least likely to be confused by those
messages.</p>
<p>&lt;p&gt;A warning is printed if tau or ap_eff are specified and the units
value (explicit or implied) means tau or ap_eff are not used
(e.g. the default units Ta do not need tau or ap_eff and so if
they are provided, a warning to that effect is printd).  This not
considered a severe problem and processing continues.  This can be
turned off if the quiet keyword is set.</p>
<p>&lt;p&gt;If there was a severe problem, the return value is 0 (false) and
the calling routine should exit at that point.  If the arguments are
all okay then the return value is 1 and any defaults are returned in
a structure in the defaults keyword value.</p>
<p>&lt;p&gt;If sampler is supplied then all 3 of ifnum, plnum, and fdnum must
not be supplied.  The returned values for these 3 are all -1,
implying that sampler should be used.</p>
<p>&lt;p&gt;If ifnum, fdnum, or plnum are not supplied, the lowest valid
value with data is chosen.  This value is picked by first setting,
ifnum, then fdnum, and finally plnum (using any user-supplied values
first).  If there is no valid data using the user-supplied values
then &lt;a href=showiftab.html&gt;showiftab&lt;/a&gt; is used to display the set of valid values and the
return value is -1.</p>
<p>&#64;param scan {in}{optional}{type=integer} If scan is not supplied,
then a valid timestamp keyword must be supplied. No default supplied.
&#64;param refscan {in}{optional}{type=integer} Ignored unless checkref
is true.  If refscan is not supplied, then a valid reftimestamp
keyword must be supplied.  No default supplied.
&#64;keyword intnum {in}{optional}{type=integer} Must be &gt;= 0.
&#64;keyword ifnum {in}{optional}{type=integer} Must be &gt;= 0. Defaults
as described above.
&#64;keyword plnum {in}{optional}{type=integer} Kust be &gt;= 0. Defaults
as described above.
&#64;keyword fdnum {in}{optional}{type=integer} Must be &gt;= 0. Defaults</p>
<p>&#64;keyword sampler {in}{optional}{type=string} Must be non-empty.
Defaults to  (empty, unspecified).  When set, the returned ifnum,
plnum, and fdnum values are all -1.
&#64;keyword eqweight {in}{optional}{type=boolean}
&#64;keyword units {in}{optional}{type=string} Must be one of
Ta,Ta*, or Jy.
&#64;keyword bswitch {in}{optional}{type=integer} Must be 0, 1 or 2.
Defaults to 0.
&#64;keyword quiet {in}{optional}{type=boolean}
&#64;keyword keepints {in}{optional}{type=boolean}
&#64;keyword useflag {in}{optional}{type=boolean} Only one of useflag
and skipflag can be set.
&#64;keyword skipflag {in}{optional}{type=boolean} Only one of useflag
and skipflag can be set.
&#64;keyword instance {in}{optional}{type=integer} Must be &gt;=
0. Defaults to 0.
&#64;keyword file {in}{optional}{type=string}
&#64;keyword timestamp {in}{optional}{type=string} If scan is not
supplied, then a valid timestamp keyword must be supplied.
&#64;keyword refinstance {in}{optional}{type=integer} Ignored unless
checkref is true.  Must be &gt;= 0.  Defaults to 0.
&#64;keyword reffile {in}{optional}{type=string} Ignored unless checkref
is true.
&#64;keyword reftimestamp {in}{optional}{type=string} Ignored unelss
checkref is true.  If refscan is not supplied, then a valid
reftimestamp keyword must be supplied.
&#64;keyword checkref {in}{optional}{type=boolean} Check refscan and the
ref* keywords?
&#64;keyword tau {in}{optional}{type=float} Warning if tau is set and
units is Ta or unset.
&#64;keyword ap_eff {in}{optional}{type=float} Warning if units is not
Jy.
&#64;keyword twofeeds {in}{optional}{type=boolean} When set, fdnum is
assumed to be a tracking feed number and it is not influenced by any
value that sampler might have.
&#64;keyword sig_state {in}{optional}{type=integer} Used for sig_state
selection.  When set it must be 0 or 1.  Returned value is -1 if
unset or out of bounds.
&#64;keyword ret {out}{required}{type=structure} The values to use for
ifnum, plnum, fdnum, instance, and bswitch taking into account the defaults
as described here.  This is done so that the values of the calling
arguments are not altered by this function.
&#64;keyword info {out}{required}{type=structure} The scan info structure
associated with the scan, timestamp, instance and file arguments as
given.  This will not be a structure if there was a problem.</p>
<p>&#64;private_file</p>
<p>&#64;version $Id;-</p>
</dd></dl>

<dl class="idl function">
<dt class="sig sig-object idl" id="getIftabIndices">
<em class="property"><span class="pre">function</span></em><span class="sig-name descname"><span class="pre">getIftabIndices</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">loc</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nif</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nfd</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">npl</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#getIftabIndices" title="Link to this definition">#</a></dt>
<dd><p>Private function to return the array indices in a 3D iftable array
given the array dimensions.</p>
<p>Used instead of array_indices because of the way IDL tosses out
single-element arrays whenever possible, making it damn difficult to
write general purpose code.  This routine always returns 3 values.</p>
<p>The length of the 3rd axis is not important here.  There is no
checking loc for validity (the only reason this might care about
that value).</p>
<p>IDL arrays are stored in fortran order.</p>
<p>&#64;param loc {in}{required}{type=integer} Vector of locations into a
3D array described by the other parmeters.
&#64;param nif {in}{required}{type=integer} Length of first axis.
&#64;param nfd {in}{required}{type=integer} Length of second axis.</p>
<p>&#64;returns (3,n_elements(loc)) array, one 3-D vector giving the
coordinates into a 3D array described by nif, nfd, npl for each
element of loc.</p>
<p>&#64;private</p>
</dd></dl>

<dl class="idl pro">
<dt class="sig sig-object idl" id="fileout">
<em class="property"><span class="pre">pro</span></em><span class="sig-name descname"><span class="pre">fileout</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">new=new</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#fileout" title="Link to this definition">#</a></dt>
<dd><p>Specify the file to which data will be written.</p>
<p>&lt;p&gt;The filename is stored in the !g.line_fileout_name field.  At
startup, this is set to GBTIDL_KEEP.fits so that it is possible to
save data without ever using this procedure.</p>
<p>&lt;p&gt;The output file name must use the .fits suffix.</p>
<p>&lt;p&gt;Note that it is not currently possible to save continuum data.</p>
<p>&#64;param file_name {in}{required}{type=string} The file to which
data will be written.  If the file does not exist, it will be
created when the first spectrum is saved to this file (e.g. using
&lt;a href=keep.html&gt;keep&lt;/a&gt;).</p>
<p>&#64;keyword new {in}{optional}{type=boolean} When set a new output file
will be created.  If file_name already exists, it will first be
removed.  If there is a problem in removing that file this procedure
will return without opening the file_name.</p>
<p>&#64;examples
&lt;pre&gt;</p>
<blockquote>
<div><p>getrec,1
show
fileout,savedfile.fits
keep</p>
</div></blockquote>
<p>&lt;/pre&gt;</p>
<p>&#64;version $Id;-</p>
</dd></dl>

<dl class="idl pro">
<dt class="sig sig-object idl" id="qdflag">
<em class="property"><span class="pre">pro</span></em><span class="sig-name descname"><span class="pre">qdflag</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">scans</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">thresh=thresh</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">idstring=idstring</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">flag_qd_bad=flag_qd_bad</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keep=keep</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#qdflag" title="Link to this definition">#</a></dt>
<dd><p>Generate flag table entries using QuadrantDetector columns in the
associated SDFITS file (QD_XEL, QD_EL, and QD_BAD).</p>
<p>&lt;p&gt;A flag table entry is made for an integration within a scan as
follows:
&lt;ul&gt;&lt;li&gt; If QD_BAD is 0, flag the data based on the threshold value
&lt;li&gt; If QD_BAD is 1 or -1 (all possible values other than 0), flag
the data if the flag_qd_bad keyword is set otherwise (the default)
do not flag the data.
&lt;/ul&gt;</p>
<p>&lt;p&gt; Data which pass the QD_BAD test should be flagged for that
integration if 
&lt;pre&gt;</p>
<blockquote>
<div><p>(ABS(QD_XEL) / HPBW) &gt; thresh
HPBW = 740 / (observed_frequency in GHz)</p>
</div></blockquote>
<p>&lt;/pre&gt;
Where the units of QD_XEL and HPBW in the above are arcseconds and thresh
defaults to 0.2 if not specified.</p>
<p>&lt;p&gt;The idstring value is used to tag all flag table entries written by
this routine.  If not supplied it defaults to QD_BADDATA.</p>
<p>&lt;p&gt;This procedure will not reflag any scan where any flag entries
already exist with the same idstring.  If you want to regenerate the
flag table (e.g. using a different threshold or flag_qd_bad value)
choose a different idstring or remove all existing flags with that
idstring using the &lt;a href=unflag.html&gt;unflag&lt;/a&gt; procedure.</p>
<p>&lt;p&gt;This uses the main data file unless the keep keyword is set, in
which case it uses the keep file.</p>
<p>&lt;p&gt;This only works on spectral line data.</p>
<p>&lt;p&gt;On completion, a table is printed giving the following statistics
for each unique source name encountered: the total time observed for
that source (this is the duration, not the exposure), the total time
flagged, the percent flagged, and the percent of data that had a
non-zero QD_BAD value.</p>
<p>&lt;p&gt;For older SDFITS files that lack the QD columns, this routine
prints a warning message without flagging any data.</p>
<p>&#64;param scans {in}{required}{type=integer} The scan number(s) to
flag.  If not supplied, use all scans.  This can be vector of scan
numbers
&#64;keyword thresh {in}{optional}{type=float}{default=0.2} The threshold
to use when flagging using good QD_XEL values.  Defaults to 0.2.
&#64;keyword idstring {in}{optional}{type=string}{default=QD_BADDATA}
The tag to give each flag entry written by this routine.  Defaults
to QD_BADDATA.
&#64;keyword flag_qd_bad {in}{optional}{type=boolean} If set, flag all
data having non-zero values of QD_BAD, otherwise data with QD_BAD is
not flagged.
&#64;keyword keep {in}{optional}{type=boolean} If set, flag using the 
keep file, otherwise use the default data file.</p>
<p>&#64;version $Id;-</p>
</dd></dl>

<dl class="idl pro">
<dt class="sig sig-object idl" id="gmeasure">
<em class="property"><span class="pre">pro</span></em><span class="sig-name descname"><span class="pre">gmeasure</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mode</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fract</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">brange=brange</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">erange=erange</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rms=rms</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">chan=chan</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lefthorn=lefthorn</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">righthorn=righthorn</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">quiet=quiet</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ret=ret</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#gmeasure" title="Link to this definition">#</a></dt>
<dd><p>Procedure to measure the area, width, and velocity of a galaxy
profile.</p>
<p>&lt;p&gt;The derived area, width and velocity are displayed unless the
/quiet keyword is used.  These values can also be returned using the
ret keyword.  The value of ret is a 6-element array containing the
area, width, and velocity in that order estimates of the error on
those quantities in the same order. The width and velocity
are always given (shown and returned) in km/s and the area is given
in data units * km/s.  The error on the area is only set when 
fract equals 0.2 or 0.5.  The errors on the width and velocity are 
only set for mode 4.  Mode 4 always sets the width error to be twice
the velocity error.</p>
<p>&lt;p&gt;This is a front-end to &lt;a href=../toolbox/awv.html&gt;awv&lt;/a&gt;.  The source code there originated at 
Arecibo.  See the comments there for a description of the 4 possibly
values for mode and how fract and rms are used for each mode.</p>
<p>&lt;p&gt;The data that is currently displayed in the plotter is used in
this procedure.  The displayed x-axis can be any type.  The x-axis
values are be converted to velocity taking into account any
previously set velocity offset (even if the displayed axis is not
the velocity axis). If there is no data displayed in the plotter, the
contents of the primary data container (buffer 0) are used.</p>
<p>&lt;p&gt;If the region of interest is not specified, the user is asked to
mark it interactively.</p>
<p>&lt;p&gt;A baseline should have been removed prior to using this function.</p>
<p>&lt;p&gt;brange, erange, lefthorn, and righthorn are given in the
currently display x-axis units unless the chan keyword is set.</p>
<p>&lt;p&gt;&lt;B&gt;Originally Contributed By: Karen ONeil, NRAO-GB and Bob Garwood,
NRAO-CV&lt;/B&gt;</p>
<p>&#64;param mode {in}{required}{type=integer}  Must be one of 1,2,3, or 4.
See the comments in &lt;a href=../toolbox/awv.html&gt;awv&lt;/a&gt; for more
details.</p>
<p>&#64;param fract {in}{required}{type=float} Fraction of peak or mean used in
locating the edges of the galaxy profile.  See the comments in 
&lt;a href=../toolbox/awv.html&gt;awv&lt;/a&gt; for more details.  Note that in
modes 3 and 4 the user is asked to mark the two horns of the galaxy
profile with the cursor unless the optional lefthorn and righthorn
keywords are used.</p>
<p>&#64;keyword brange {in}{optional}{type=integer} Starting value of the
region of interest in x-axis units unless chan is set.</p>
<p>&#64;keyword erange {in}{optional}{type=integer} Ending value of the
region of interest in x-axis units unless chan is set.</p>
<p>&#64;keyword rms {in}{optional}{type=float} Used in modes 2, 3 and 4 as
described in &lt;a href=../toolbox/awv.html&gt;awv&lt;/a&gt;.  If this is not
supplied, it defaults to the stddev of the data within the region of
interest given by brange and erange.</p>
<p>&#64;keyword chan {in}{optional}{type=boolean} Interpret the user supplied
range and optional horn positions in channels instead of the current
x-axis units.</p>
<p>&#64;keyword lefthorn {in}{optional}{type=float} Location of the left
peak in x-axis units unless chan was specified.</p>
<p>&#64;keyword righthorn {in}{optional}{type=float} Location of the right
peak in x-axis units unless chan was specified.</p>
<p>&#64;keyword quiet {in}{optional}{type=boolean} When set, the results
are not printed to the terminal (the ret keyword should be used to
get the results).</p>
<p>&#64;keyword ret {out}{optional}{type=floating point} Six-element
array giving [area,width,velocity,areaerr,widtherr,velocityerr].  All
six elements will be 0.0 if there was a problem.  The areaerr is
only set when fract is 0.2 or 0.5.  The widtherr and velocityerr are
only set by mode 4.  Unset error values are 0.0.</p>
<p>&#64;examples
&lt;pre&gt;</p>
<blockquote>
<div><p>gmeasure, 1, 0.5, ret=ret50
gmeasure, 1, 0.8, ret=ret80</p>
</div></blockquote>
<p>&lt;/pre&gt;</p>
<p>&#64;uses &lt;a href=../toolbox/awv.html&gt;awv&lt;/a&gt;</p>
<p>&#64;version $Id;-</p>
</dd></dl>

<dl class="idl pro">
<dt class="sig sig-object idl" id="recombc">
<em class="property"><span class="pre">pro</span></em><span class="sig-name descname"><span class="pre">recombc</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dn</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">doPrint=doPrint</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#recombc" title="Link to this definition">#</a></dt>
<dd><p>Plot the Carbon recombination lines for quantum jump of dN.
Defaults to plotting the alpha lines (dN=1).</p>
<p>&lt;p&gt;Originally by Glen Langston, glangsto&#64;nrao.edu</p>
<p>&lt;p&gt;Molecular Formula from Tools of RadioAstronomy, Rolfs and Wilson,
2000, pg 334
&lt;pre&gt;
v_ki = Z^2 R_M ( 1/i^2  - 1/k^2), where R_M = R_infinity/(1 + m/M)
v_ki = R_A     ( 1/i^2  - 1/k^2) (k &gt; i)
&lt;pre&gt;
where for carbon values (MHz), R_a = 3.28969163E9</p>
<p>&#64;param dn {in}{optional}{type=integer}{default=1} The quantum jump
to calculate (1 is alpha, 2 is beta, etc).
&#64;keyword doPrint {in}{optional}{type=boolean}{default=0} optionally print
the line frequencies.  The printed frequencies are the line
frequencies in the frame being displayed on the plotter.</p>
<dl class="simple">
<dt>&#64;examples</dt><dd><p>recombc,2,/doprint</p>
</dd>
</dl>
<p>&#64;uses &lt;a href=freq.html&gt;freq&lt;/a&gt;
&#64;uses &lt;a href=../toolbox/veltovel.html&gt;veltovel&lt;/a&gt;
&#64;uses &lt;a href=../toolbox/shiftvel.html&gt;shiftvel&lt;/a&gt;
&#64;uses &lt;a href=../toolbox/shiftfreq.html&gt;shiftfreq&lt;/a&gt;
&#64;uses &lt;a href=../toolbox/decode_veldef.html&gt;decode_veldef&lt;/a&gt;
&#64;uses &lt;a href=../plotter/show.html&gt;show&lt;/a&gt;
&#64;uses &lt;a href=../plotter/vline.html&gt;vline&lt;/a&gt;
&#64;uses &lt;a href=../plotter/getstate.html#_getxrange&gt;getxrange&lt;/a&gt;
&#64;uses &lt;a href=../plotter/getstate.html#_getyrange&gt;getyrange&lt;/a&gt;
&#64;uses &lt;a href=../plotter/getstate.html#_getxvoffset&gt;getxvoffset&lt;/a&gt;
&#64;uses &lt;a href=../plotter/getstate.html#_getxunits&gt;getxunits&lt;/a&gt;
&#64;uses &lt;a href=../plotter/getstate.html#_getxoffset&gt;getxoffset&lt;/a&gt;
&#64;uses &lt;a href=../plotter/getstate.html#_getplotterdc&gt;getplotterdc&lt;/a&gt;
&#64;uses textoidl</p>
<p>&#64;version $Id;-</p>
</dd></dl>

<dl class="idl pro">
<dt class="sig sig-object idl" id="fold">
<em class="property"><span class="pre">pro</span></em><span class="sig-name descname"><span class="pre">fold</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sig</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ref</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ftol=ftol</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">blankinterp=blankinterp</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nomask=nomask</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#fold" title="Link to this definition">#</a></dt>
<dd><p>Average two parts of in-band frequency switching (signal and
reference phases, with the cal-switching phases already calibrated).</p>
<p>&lt;p&gt;Typically this happens during or after getfs.  The two data
containers are assumed to be in 0 and 1.  It does not matter which
data container contains which part since their relative distance in
frequency is used to determine how one is shifted to align with the
other. The result is always placed in data container 0.  If the two
data containers do not overlap in frequency, then there is nothing
to fold and an error message will be printed.</p>
<p>&lt;p&gt;The ref data container is shifted to align in sky frequency
with the sig data container using  &lt;a href=../toolbox/dcshift.html&gt;dcshift&lt;/a&gt; and the two data 
containers are averaged - weighting each by the inverse of square of
their system temperatures.  The system temperature in the result is
the weighted average of the two system temperatures.</p>
<p>&lt;p&gt;If there are any blanked channels in either sig or ref then
the corresponding channels in the other spectrum, after ref has
been shifted to align in sky frequency with sig, are also blanked
so that the average at those channels is blanked.  This is done to
avoid the appearance of a spike at a blanked channel where the
contribution from the other spectrum, after the shift, is typically
not blanked and not equal to the local average of surrounding,
non-blanked, channels.  This behavior can be turned off by the
nomask keyword.  Alternatively, all blanked channels in sig and
ref can be replaced using a linear interpolation from adjacent
non-blanked channels (a simple average in the case of single,
isolated, blanked channels) using the blankinterp keyword.</p>
<p>&#64;param sig {in}{optional}{type=integer}{default=0} The global buffer
number to use as the signal part in the average.  The result will
contain a copy of this data containers header information except
for tsys as described above.  The data at sig is overwritten by the result
if sig is 0 (the default)</p>
<p>&#64;param ref {in}{optional}{type=integer}{default=1} The global buffer
number to use as the reference part in the average.
This data is shifted using &lt;a href=../toolbox/dcshift.html&gt;dcshift&lt;/a&gt; to align with
sig before averaging.  The data in ref are never altered by this procedure.</p>
<p>&#64;keyword ftol {in}{optional}{type=double}{default=0.005} The fractional
channel shift tolerance.  If the fractional part of the channel
shift necessary to align the two parts is less than this value, no
fractional shift as described in the documentation for 
&lt;a href=../toolbox/dcshift.html&gt;dcshift&lt;/a&gt; will be done.  It might be useful to
turn off the fractional shift because it can cause aliases and
ringing in the case of very strong lines or other sharp features.
If ftol &gt; 0.5 no fractional shifts will be done.</p>
<p>&#64;keyword blankinterp {in}{optional}{type=boolean} When set, blanks
are replaced before shifting and averaging by a linear interpolation
using the finite values found in the two spectra.  The &lt;a
href=dcinterp.html&gt;dcinterp&lt;/a&gt; procedure is used.  For isolated blanked
channels, the replacement value is the average of the two adjacent
channel values.</p>
<p>&#64;keyword nomask {in}{optional}{type=boolean} When set, turn off the
masking of blank channels from each spectrum on to the other, after
the shift.  This may result in spikes at the location of blanked
channels. This was the original behavior of thsi routine.  This
keyword has no effect if blankinterp is set.</p>
<p>&#64;examples
&lt;pre&gt;</p>
<blockquote>
<div><p>getfs, 64, /nofold
fold, ftol=1.0       ; no fractional shifting is done</p>
</div></blockquote>
<p>&lt;/pre&gt;</p>
<p>&#64;uses &lt;a href=../toolbox/dcfold.html&gt;dcfold&lt;/a&gt;
&#64;uses &lt;a href=../toolbox/data_free.html&gt;data_free&lt;/a&gt;
&#64;uses &lt;a href=set_data_container.html&gt;set_data_container&lt;/a&gt;</p>
<p>&#64;version $Id;-</p>
</dd></dl>

<dl class="idl pro">
<dt class="sig sig-object idl" id="clip">
<em class="property"><span class="pre">pro</span></em><span class="sig-name descname"><span class="pre">clip</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">datamin</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">datamax</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">buffer=buffer</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">blank=blank</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#clip" title="Link to this definition">#</a></dt>
<dd><p>This procedure truncates, or clips, data values above and below
specified limits.  Data value can alternatively be blanked using the
/blank flag. In that case, data values outside the limits are
replaced by blanks (NaN).</p>
<p>&#64;param datamin {in}{required}{type=float} min value to clip
&#64;param datamax {in}{required}{type=float} max value to clip
&#64;keyword buffer {in}{optional}{type=integer}{default=0} which global
buffer to use.
&#64;keyword blank {in}{optional}{type=boolean} Replace clipped values
with NaN instead of the clipping limit.</p>
<p>&#64;examples
&lt;pre&gt;</p>
<blockquote>
<div><p>getps,101,plnum=1,ifnum=1
show
clip,-0.3,1.4,/blank
show</p>
</div></blockquote>
<p>&lt;/pre&gt;</p>
<p>&#64;uses &lt;a href=../toolbox/dcclip.html&gt;dcclip&lt;/a&gt;</p>
<p>&#64;version $Id;-</p>
</dd></dl>

<dl class="idl pro">
<dt class="sig sig-object idl" id="ave">
<em class="property"><span class="pre">pro</span></em><span class="sig-name descname"><span class="pre">ave</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">accumnum</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">noclear=noclear</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">quiet=quiet</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wtarray=wtarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">count=count</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ave" title="Link to this definition">#</a></dt>
<dd><p>Get the average from an ongoing accumulation.</p>
<p>&lt;p&gt;The result is put into the primary data container (buffer 0).  
The contents of the accum buffer are cleared as a consequence of
calling ave, unless the noclear keyword is set.</p>
<p>&lt;p&gt;Note: It is a good idea to use &lt;a href=sclear.html&gt;sclear&lt;/a&gt; to clear the accum buffer 
before using it the first time so that you can be certain it is
starting from a cleared (empty) state.</p>
<p>&#64;param accumnum {in}{type=integer}{default=0} Use this accum buffer.
Defaults to the primary buffer, 0.  There are 4 buffers total so
this value must be between 0 and 3, inclusive.</p>
<p>&#64;keyword noclear {in}{optional}{type=boolean}{default=F} When set, the
contents of the accum buffer are not cleared.  This is useful
when you want to see what the current average is but also plan on
continuing to add data to that average.  If this is not set, you
would need to restart the accumulation to average more data.</p>
<p>&#64;keyword quiet {in}{optional}{type=boolean}{default=F} Normally, ave
announces how many spectra were averaged.  Setting this turns that
announcement off.  This is especially useful when multiple accum
buffers are used within a procedure.</p>
<p>&#64;keyword wtarray {out}{optional}{type=float array} This is the
contents of the weight array at the time of the average - one value
per channel. If no blanked data went into accumulation, then all
values in wtarray will be the same.  If an entire spectrum was
blanked (e.g. bad data from the GBT Spectrometer) then that spectrum
was ignored during the accumulation and again, all of the wtarray
values will be the same.  This quantity is only important if some
channels were blanked in at least one spectrum in the accumulation
and you expect to use the result of this accumulation at a later
time in part of another accumulation.  If you keep the wtarray
around in an IDL variable, then you can use it again to weight this
result in that new accumulation.</p>
<p>&#64;keyword count {out}{optional}{type=integer} The number of spectra
that have been averaged.  Returns -1 on an error.  If count=0 then
the the PDC and wtarray are unchanged by this.
procedure.</p>
<p>&#64;examples
Average some data
&lt;pre&gt;</p>
<blockquote>
<div><p>sclear
get,index=1
accum
get,index=2
accum
ave</p>
</div></blockquote>
<p>&lt;/pre&gt;</p>
<p>&lt;p&gt;Average some data using another accum buffer
&lt;pre&gt;</p>
<blockquote>
<div><p>sclear, 2 
get,index=1
accum, 2
get,index=2
accum, 2
ave, 2</p>
</div></blockquote>
<p>&lt;/pre&gt;</p>
<p>&lt;p&gt;Average some data, look at an intermediate result
&lt;pre&gt;</p>
<blockquote>
<div><p>sclear
get,index=1
accum
get,index=2
accum
ave,/noclear  ; accum buffer is NOT clear here
get,index=3
accum
ave     ; accum buffer IS clear here</p>
</div></blockquote>
<p>&lt;/pre&gt;</p>
<p>&#64;uses &lt;a href=../toolbox/accumave.html&gt;accumave&lt;/a&gt;
&#64;uses &lt;a href=../toolbox/accumclear.html&gt;accumclear&lt;/a&gt;
&#64;uses &lt;a href=set_data_container.html&gt;set_data_container&lt;/a&gt;
&#64;uses &lt;a href=../toolbox/data_free.html&gt;data_free&lt;/a&gt;</p>
<p>&#64;version $Id;-</p>
</dd></dl>

<dl class="idl function">
<dt class="sig sig-object idl" id="project_exists">
<em class="property"><span class="pre">function</span></em><span class="sig-name descname"><span class="pre">project_exists</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">directory</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">project</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">type</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#project_exists" title="Link to this definition">#</a></dt>
<dd><p>Used internally in offline
If a data (fits) file or data directory containing at least one 
fits file exists in directory for the given project and type then
this routine returns the path to either the fits file or the data
directory found in directory.  If it does not exist, this returns
an empty string.</p>
<p>&#64;param directory {in}{required}{type=string} Directory to search
in.  Typically this is the the root directory where the online
sdfits files are written for each project.  Project directories are
assumed to be a subdirectory of directory.
&#64;param project {in}{required}{type=string} The project name to
search for.  The directory &lt;directory&gt;/&lt;project&gt; must exist for this
function to return any non-empty string.
&#64;param type {in}{required}{type=string} The backend short-hand to
use in constructing the filename to search for in the project
directory.  This searches for &lt;project&gt;.raw.&lt;type&gt;.fits or a
directory named &lt;project&gt;.raw.&lt;type&gt; that also contains at least one
<a href="#id221"><span class="problematic" id="id222">*</span></a>.fits file.
&#64;returns The found file or directory name or an empty string if
nothing was found.</p>
<p>&#64;private</p>
</dd></dl>

<dl class="idl pro">
<dt class="sig sig-object idl" id="offline">
<em class="property"><span class="pre">pro</span></em><span class="sig-name descname"><span class="pre">offline</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">project</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">acs=acs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sp=sp</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vegas=vegas</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#offline" title="Link to this definition">#</a></dt>
<dd><p>This is a convenient way to find the previously auto-filled data
for the indicated project and backend in the standard online data
location when used in Green Bank.
&lt;p&gt;
Provide a project name and optionally the backend type (acs, vegas,
or sp) to connect to file or directory in the online data directory
(/home/sdfits) for that project and backend.
Note that this file will not be treated as online, and will not be
updated, just as filein does not do automatic updates.  Continuum is
not supported. 
&lt;p&gt;In addition to being less typing, using offline ensures that
should the location of the automatically generated sdfits files move
at any point, you dont have to know where they were moved to - the
Green Bank installation of GBTIDL will always know where to find
them.</p>
<p>&#64;param project {in}{required}{type=string} The project name to use
in constructing the filename.
&#64;keyword acs {in}{optional}{type=boolean} the most recent
spectrometer sdfits file will be connected. This is the default.
&#64;keyword sp {in}{optional}{type=boolean} the most recent spectral
processor sdfits file will be connected to.
&#64;keyword vegas {in}{optional}{type=boolean} the most recent vegas
sdfits directory will be connected.</p>
<p>&#64;examples
&lt;pre&gt;</p>
<blockquote>
<div><p>offline,AGBT02A_028_05  ; opens ACS data for this project</p>
</div></blockquote>
<p>&lt;/pre&gt;</p>
<p>&#64;version $Id;-</p>
</dd></dl>

<dl class="idl pro">
<dt class="sig sig-object idl" id="hanning">
<em class="property"><span class="pre">pro</span></em><span class="sig-name descname"><span class="pre">hanning</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">buffer=buffer</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">decimate=decimate</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ok=ok</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#hanning" title="Link to this definition">#</a></dt>
<dd></dd></dl>

<dl class="idl pro">
<dt class="sig sig-object idl" id="spurinterp">
<em class="property"><span class="pre">pro</span></em><span class="sig-name descname"><span class="pre">spurinterp</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">buffer</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#spurinterp" title="Link to this definition">#</a></dt>
<dd><p>Replace data values at the known locations of VEGAS ADC spurs with
the average of the two adjacent channel values.</p>
<p>&lt;p&gt;VEGAS produces spurs (spikes) at channels corresponding to
integer multiples of the ADC sampler frequency divided by 64.  The
normal behavior of sdfits is to flag these channels when the data
are filled (use &lt;a href=listflags&gt;listflags&lt;/a&gt; to see the list of flags for the
currently opened input data set).  When flagged data is retrieved by
GBTIDL, the flagged channels are replaced with NaNs and will not
contribute to most operations.  If the skipflag option is used to
retrieve the data then flagging is not applied and the original data
values will appear at all channels.</p>
<p>&lt;p&gt;It is sometimes useful to replace the spur data values (either
NaNs if the flags have been used or the original data values if the
flags are ignored) with interpolated values.  This routine replaces
those values with the average of the two channels on either side of
the spur (or the adjacent channel if the spur is at the end of the
spectrum).</p>
<p>&lt;p&gt;A spur is also typically present at the center channel (NCHAN/2
when counting from 0).  That spur does not arise in the ADC in VEGAS
and does not move as the spectral window is tuned across the ADC
bandpass. This routine does not interpolate across that channel.
Normal sdfits usage does that interpolation unless the -nointerp
option is used.</p>
<p>&lt;p&gt;If the buffer is not specified then buffer 0 is used.
&lt;p&gt;If the display is not already frozen and buffer 0 is used then
the show command is used to redisplay the data.</p>
<p>&lt;p&gt;This spur locations are determined using the VSPDELT, VSPRPIX,
and VSPRVAL header values.  For data filled using older versions of
sdfits, these values are not present in the SDFITS table and will
appear as NaN in GBTIDL.  In that case, no spur interpolation is
possible and a warning message will be printed.  The data should be
refilled by the most recent version of sdfits to make use of this
procedure.</p>
<p>&#64;param buffer {in}{optional}{type=integer}{default=0} Input data
buffer (0 through 15).</p>
<p>&#64;uses &lt;a href=../toolbox/dcspurinterp.html&gt;dcspurinterp&lt;/a&gt;</p>
<p>&#64;version $Id;-</p>
</dd></dl>

<dl class="idl pro">
<dt class="sig sig-object idl" id="nfit">
<em class="property"><span class="pre">pro</span></em><span class="sig-name descname"><span class="pre">nfit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">order</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#nfit" title="Link to this definition">#</a></dt>
<dd></dd></dl>

<dl class="idl pro">
<dt class="sig sig-object idl" id="flag">
<em class="property"><span class="pre">pro</span></em><span class="sig-name descname"><span class="pre">flag</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">scan</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">intnum=intnum</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plnum=plnum</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ifnum=ifnum</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fdnum=fdnum</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sampler=sampler</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bchan=bchan</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">echan=echan</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">chans=chans</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">chanwidth=chanwidth</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">idstring=idstring</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scanrange=scanrange</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keep=keep</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#flag" title="Link to this definition">#</a></dt>
<dd><p>Flag some data in the currently opened spectral line data file or
output (keep) data file.</p>
<p>&lt;p&gt;A scan number or array of scan numbers is required and can be
entered either in the parameter scan or the parameter scanrange.
The other keywords allow for additional refinements in the scope of
the flag. When a keyword is not supplied, it defaults to all values
of that keyword in the data for the given scans.  In some cases,
when you know which specific record needs some or all of its data
flagged, &lt;a href=flagrec.html&gt;flagrec&lt;/a&gt; may be more appropriate.</p>
<p>&lt;p&gt;Flags are applied when the data is actually read into a data
container (e.g. using get, getrec, getps, getnod, etc).  At that
point, any flagged data is replaced with the special value for
blanked data (NaN, or  not a number).  GBTIDL ignores blanked
data.  If that data is saved back to a data file, it will be saved
as blanked values and no further flagging is necessary.  Flags are
associated with the data in the file, not with the data in a data
container.  Once the data is in GBTIDL in a data container, it can
have additional blanking applied (e.g. &lt;a href=replace.html&gt;replace&lt;/a&gt;) but not flagged.</p>
<p>&lt;p&gt;The sampler argument can be used to specify a specific sampler
name to flag.  The &lt;a href=samplerinfo.html&gt;samplerinfo&lt;/a&gt; function is used to translate 
that name into a single plnum, ifnum, -and fdnum combination which
is then used to set this flag.  The listing of data flagged by
sampler name will only show these integer values, not the original
sampler name.  When sampler is used, it is an error to also use
plnum, ifnum or fdnum in the same call to flag.  A single scan (not
a scan range) must be used if sampler is supplied.</p>
<p>&lt;p&gt;Continuum flagging is not supported.</p>
<p>&lt;p&gt;&lt;b&gt;See Also:&lt;/b&gt; &lt;a href=<a class="reference external" href="http://wwwlocal.gb.nrao.edu/GBT/DA/gbtidl/users_guide/node47.html">http://wwwlocal.gb.nrao.edu/GBT/DA/gbtidl/users_guide/node47.html</a> TARGET=_top&gt;Introduction to Blanking and Flagging&lt;/a&gt; 
in the GBTIDL users guide</p>
<p>&#64;param scan {in}{optional}{type=integer} M&amp;C scan numbers to
flag. This is required if scanrange is not used.
&#64;keyword intnum {in}{optional}{type=integer} Integration number (default=all)
&#64;keyword plnum {in}{optional}{type=integer} polarization number (default=all)
&#64;keyword ifnum {in}{optional}{type=integer} IF number (default=all)
&#64;keyword fdnum {in}{optional}{type=integer} Feed number
(default=all)
&#64;keyword sampler {in}{optional}{type=string} Sampler name, used only
as a short-hand for a specific plnum, ifnum, fdnum combination.
When sampler is supplied it is an error to also supply ifnum, plnum,
or fdnum.  Sampler must be single-valued (no arrays).
&#64;keyword bchan {in}{optional}{type=integer} Starting channel number(s)
(default=0)
&#64;keyword echan {in}{optional}{type=integer} Ending channel number(s)
(default=last channel)
&#64;keyword chans {in}{optional}{type=integer} Channel to flag. Mutually exclusive to 
bchan and echan keywords.
&#64;keyword chanwidth {in}{optional}{type=integer} Buffer of channels surrounding the 
channels specified in chans keyword. (default=1)
&#64;keyword idstring {in}{optional}{type=string}{default=unspecified}
A short string describing the flag.
&#64;keyword scanrange {in}{optional}{type=integer array} A 2-element
array giving the first and last scan numbers that describe the range
of scans to flag.  This is ignored if the scan parameter is used.
If only one integer is supplied then this is equivalent to giving
that integer as the scan parameter argument.
&#64;keyword keep {in}{optional}{type=boolean} Flag the keep (output)
data source.</p>
<p>&#64;examples
&lt;pre&gt;</p>
<blockquote>
<div><p>; flags all the channels in scan number one
flag, 1</p>
<p>; flags just the first ten channels in scan two
flag, 2, echan=10, idstring=flag first 10 channels</p>
<p>; flags the first ten channels, and channels 50 to 60
flag, 3, bchan=[0,50], echan=[10,60]</p>
<p>; flags the same channels as the above example in scan four
flag, 4, chans=[5,55], width=5</p>
<p>; flag all channels in scan 5, integrations 1 through 4
flag, 5, intnum=[1,2,3,4], idstring=RFI</p>
<p>; flag just this one channel for scan 6, for just the first polarization
flag, 6, plnum=0, chans=2999</p>
<p>; flag first polarization, second feed, third IF, all channels
flag, 7, plnum=0, fdnum=1, ifnum=2, idstring=Bad Lags</p>
<p>; If the previous example corresponded to sampler B17 then
; this example would produce the same flag rule
flag, 7, sampler=B17, idstring=Bad Lags</p>
</div></blockquote>
<p>&lt;/pre&gt;</p>
<p>&#64;version $Id;-</p>
</dd></dl>

<dl class="idl function">
<dt class="sig sig-object idl" id="samplerinfo">
<em class="property"><span class="pre">function</span></em><span class="sig-name descname"><span class="pre">samplerinfo</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">scan</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sampler</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">instance=instance</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file=file</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timestamp=timestamp</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">quiet=quiet</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">recs=recs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#samplerinfo" title="Link to this definition">#</a></dt>
<dd><p>Find the if, feed, and polarization numbers  which corresponds to the
given sampler name in the scan.</p>
<p>&lt;p&gt;A three-element array is returned having the value
(ifnum,plnum,fdnum) corresponding to the IF, feed, and polarization
numbers associated with the given sampler name and scan.</p>
<p>&lt;p&gt;If the same scan appears more than once in the data file then the
value corresponding to instance will be returned.  If instance is
omitted, the first instance (instance=0) will be returned.
The instance and file keywords can be used to ensure that a single
scan is used.  Alternatively, the timestamp keyword can be used to
ensure that a single scan is used (scan and instance are ignored in
that case).</p>
<p>&lt;p&gt;If the requested sampler is not found in the scan, the all values
of the returned array will be -1.</p>
<p>&lt;p&gt;There is no check to make sure that there is just one
(ifnum,plnum,fdnum) associated with the given sampler.  The values for
the first matching sampler are returned.</p>
<p>&#64;param scan {in}{required}{type=integer} scan number
&#64;param sampler {in}{required}{type=string} sampler name
&#64;keyword instance {in}{optional}{type=integer} Which occurence
of this scan should be used.  Default is 0.
&#64;keyword file {in}{optional}{type=string} When specified, limit the search 
for this scan (and instance) to this specific file.  Default is all files.
&#64;keyword timestamp {in}{optional}{type=string} The M&amp;C timestamp associated
with the desired scan. When supplied, scan and instance are ignored.
&#64;keyword quiet {in}{optional}{type=boolean} When set, suppress most
error messages.  Useful when being used within another procedure.
&#64;keyword recs {out}{optional}{type=integer array} This contains the
records (index numbers) from this sampler in the indicated scan.
This is useful when you want to fetch that data immediately using
getchunk since that will not involve any further selection and hence
will be faster.  This is used by all of the get* calibration
routines (which use get_calib_data, where the work is actually
done).  If there is no matching data, this value will be -1.
&#64;returns array of [ifnum,plnum,fdnum]</p>
<p>&#64;version $Id;-</p>
</dd></dl>

<dl class="idl pro">
<dt class="sig sig-object idl" id="add">
<em class="property"><span class="pre">pro</span></em><span class="sig-name descname"><span class="pre">add</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">in1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">in2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">out</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#add" title="Link to this definition">#</a></dt>
<dd></dd></dl>

<dl class="idl pro">
<dt class="sig sig-object idl" id="bias">
<em class="property"><span class="pre">pro</span></em><span class="sig-name descname"><span class="pre">bias</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">factor</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">buffer</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#bias" title="Link to this definition">#</a></dt>
<dd><p>This procedure adds a scalar bias to the data containers data.</p>
<p>&lt;p&gt;Equivalent to:
&lt;pre&gt;
!g.s[0].data_ptr = !g.s[0].data_ptr + factor
&lt;/pre&gt;</p>
<p>&#64;param factor {in}{required}{type=float} scalar value to be added
&#64;param buffer {in}{optional}{type=int} The global buffer number
containing the data to be adjusted.</p>
<p>&#64;examples
&lt;pre&gt;</p>
<blockquote>
<div><p>getrec,1
show
bias,1.3  ; all values in the PDC are now larger by 1.3
show
copy,0,5
bias,2.4,5 ; all values in buffer 5 now larger by 2.4
show</p>
</div></blockquote>
<p>&lt;/pre&gt;</p>
<p>&#64;uses &lt;a href=../toolbox/dcbias.html&gt;dcbias&lt;/a&gt;</p>
<p>&#64;version $Id;</p>
</dd></dl>

<dl class="idl pro">
<dt class="sig sig-object idl" id="gshow">
<em class="property"><span class="pre">pro</span></em><span class="sig-name descname"><span class="pre">gshow</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">modelbuffer=modelbuffer</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parts=parts</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">color=color</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#gshow" title="Link to this definition">#</a></dt>
<dd><p>Show the most recently fit gaussians and annotate the plot with
their peak, center, width values.</p>
<p>&lt;p&gt;The gaussians are plotted on top of the whatever is already
plotted.</p>
<p>&#64;keyword modelbuffer {in}{optional}{type=integer} The data container
buffer containing the model of the most recent gaussian fit.  If this
is omitted, a value of -1 is assumed.  If this is -1 then a model is
constructed from the fit parameters in !g.gauss.  This is ignored if
parts is set.</p>
<p>&#64;keyword parts {in}{optional}{type=boolean} When set, show the
individual gaussians as separate plots.  This always constructs the
gaussians from the parameters in !g.gauss.  modelbuffer is ignored
when this keyword is set.</p>
<p>&#64;keyword color {in}{optional}{type=integer}{default=!g.gshowcolor} 
A color to use for the plots.</p>
<p>&#64;examples
&lt;pre&gt;</p>
<blockquote>
<div><p>; assumes initial guesses already set
gauss
gshow,/parts</p>
</div></blockquote>
<p>&lt;/pre&gt;</p>
<p>&#64;version $Id;-</p>
</dd></dl>

<dl class="idl pro">
<dt class="sig sig-object idl" id="gfft">
<em class="property"><span class="pre">pro</span></em><span class="sig-name descname"><span class="pre">gfft</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">real_buffer</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">imag_buffer</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inverse=inverse</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bdrop=bdrop</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">edrop=edrop</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#gfft" title="Link to this definition">#</a></dt>
<dd><p>Do an FFT or an inverse FFT on the data container(s) indicated by
the arguments.  This always overwrites the data array in those data
containers with the result.</p>
<p>&lt;p&gt;In the case of the forward FFT (the default), if a buffer number
for the imaginary part is omitted, it is assumed that the input
array is a pure real array (the imaginary part is all 0 and any
data at the imag_buffer location is ignored on input (and
overwritten on output).</p>
<p>&lt;p&gt;The units of the x-axis and the data are not changed here.  The
user needs to keep track of the state of their data containers.  If
a non-zero bdrop or edrop are used, the resulting data containers
will be shortened by that many elements using &lt;a href=../toolbox/dcextract.html&gt;dcextract&lt;/a&gt;. 
Consequently, it may not be appropriate to use the same bdrop and
edrop on an inverse FFT as it was when the FFT was first done.</p>
<p>&lt;p&gt;See the discussion in &lt;a href=../toolbox/dcfft.html&gt;dcfft&lt;/a&gt; on how inverse is used for spectral-line 
data vs continuum data.  For spectral-line data, an FFT is a
transformation from frequency to time and an inverse FFT is a
transformation in the other direction.  For continuum data, an FFT
is a transformation from time to frequency and an inverse FFT is a
transformation in the other direction.</p>
<p>&#64;param real_buffer {in}{out}{optional}{type=integer}{default=0} The
global buffer number from which the real values going in to the 
FFT are obtained.  The real values from the result are overwritten 
to this location.  Defaults to buffer 0.</p>
<p>&#64;param imag_buffer {in}{out}{optional}{type=integer}{default=1} The
global buffer number from which the imaginary values going in to the
FFT are obtained.  The imaginary values from the result are
overwritten to this location.  If this parameter is omitted on the 
forward transformation (inverse is not set) then the input values 
are assumed to be all real (the imaginary part is all 0) and any
data at this location is ignored and overwritten on output. Defaults
to buffer 1.</p>
<p>&#64;keyword inverse {in}{optional}{type=boolean} When set, the inverse
FFT is performed as described above.</p>
<p>&#64;keyword bdrop {in}{optional}{type=integer}{default=0} The number of
channels to exclude from the FFT at the beginning.</p>
<p>&#64;keyword edrop {in}{optional}{type=integer}{default=0} The number of
channels to exclude from the FFT at the end.</p>
<p>&#64;examples
&lt;pre&gt;</p>
<blockquote>
<div><p>getps, 34    ; get some data
gfft         ; uses buffer 0, result in 0 (real) and 1 (imag)
oshow, 1
gfft, 0, 1, /inverse  ; the other direction</p>
</div></blockquote>
<p>&lt;/pre&gt;</p>
<p>&#64;uses &lt;a href=../toolbox/dcfft.html&gt;dcfft&lt;/a&gt;
&#64;uses &lt;a href=../toolbox/dcextract.html&gt;dcextract&lt;/a&gt;</p>
<p>&#64;version $Id;-</p>
</dd></dl>

<dl class="idl pro">
<dt class="sig sig-object idl" id="scale">
<em class="property"><span class="pre">pro</span></em><span class="sig-name descname"><span class="pre">scale</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">factor</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">buffer</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#scale" title="Link to this definition">#</a></dt>
<dd></dd></dl>

<dl class="idl pro">
<dt class="sig sig-object idl" id="liststack">
<em class="property"><span class="pre">pro</span></em><span class="sig-name descname"><span class="pre">liststack</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">start</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">finish</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_EXTRA=ex</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#liststack" title="Link to this definition">#</a></dt>
<dd><p>List the index information using the first !g.acount values of
!g.astack as index numbers.
&lt;p&gt;
All of the keywords available in &lt;a href=list.html&gt;list&lt;/a&gt; are available here, 
with the same meanings.  These keywords are passed to list through
the _EXTRA keyword.   See the documentation for list for examples.</p>
<p>&#64;param start {in}{optional}{type=long}{default=0} If set, the first
element of !g.astack to list.
&#64;param finish {in}{optional}{type=long}{default=!g.acount-1} If set,
the last element of !g.astack to list.
&#64;keyword _EXTRA {in}{optional}{type=extra keywords} Passed to &lt;a href=list.html&gt;list&lt;/a&gt;.</p>
<p>&#64;version $Id;-</p>
</dd></dl>

<dl class="idl pro">
<dt class="sig sig-object idl" id="mediansub">
<em class="property"><span class="pre">pro</span></em><span class="sig-name descname"><span class="pre">mediansub</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">width</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">buffer=buffer</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#mediansub" title="Link to this definition">#</a></dt>
<dd></dd></dl>

<dl class="idl function">
<dt class="sig sig-object idl" id="nrecords">
<em class="property"><span class="pre">function</span></em><span class="sig-name descname"><span class="pre">nrecords</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">keep=keep</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#nrecords" title="Link to this definition">#</a></dt>
<dd><p>Retrieve the number of records associated with an i/o object.</p>
<p>If the keyword keep is set, the data comes from !g.lineoutio</p>
<p>If the value of !g.line is true, then the data comes from !g.lineio
otherwise the data comes from !g.contio</p>
<p>&#64;keyword keep {in}{optional}{type=bool} the data comes from
!g.lineoutio
&#64;returns The number of records.</p>
<p>&#64;version $Id;-</p>
</dd></dl>

<dl class="idl pro">
<dt class="sig sig-object idl" id="ls">
<em class="property"><span class="pre">pro</span></em><span class="sig-name descname"><span class="pre">ls</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pattern</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">options=options</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ls" title="Link to this definition">#</a></dt>
<dd><p>List files (defaults to <em>.fits in the current directory).  This
invokes the unix ls command using the pattern and optional
arguments.  If pattern is not provide, it defaults to </em>.fits.</p>
<p>&#64;param pattern {in}{optional}{type=string}{default=<a href="#id223"><span class="problematic" id="id224">*</span></a>.fits} The
pattern to list.</p>
<p>&#64;keyword options {in}{optional}{type=string}{default=} Any arguments to
the unix ls command.</p>
<p>&#64;examples
&lt;pre&gt;
; show all the fits files in the current directory
ls
; show all the files in the current directory
ls,
; show all the fits files in a directory relative to this one
ls,../mydata
; do a long listing
ls,options=-l
&lt;/pre&gt;</p>
<p>&#64;version $Id;-</p>
</dd></dl>

<dl class="idl pro">
<dt class="sig sig-object idl" id="get">
<em class="property"><span class="pre">pro</span></em><span class="sig-name descname"><span class="pre">get</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">useflag=useflag</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">skipflag=skipflag</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_EXTRA=ex</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#get" title="Link to this definition">#</a></dt>
<dd><p>Get data from the input data file and put that into the primary data 
container (buffer 0).  
&lt;p&gt;
The data to be retrieved are specified by giving a number of selection
parameters.  If more than one record satisfies the selection criteria given,
only the first is returned.  If you need to retrieve one of the
other records you must first refine the selection criteria.  A
better approach might be to use &lt;a href=select.html&gt;select&lt;/a&gt; to get the list of records that 
satisfy that selection and then use  &lt;a href=getrec.html&gt;getrec&lt;/a&gt; to get the individual records.</p>
<p>&lt;p&gt;&lt;em&gt;Note :&lt;/em&gt; All of the data satisfying the selection criteria
(or lack of criteria if none are given) are extracted from the file
before this routine copies the first one found and puts it into
buffer 0.  There is no protection against running out of memory by
grabbing too much data.</p>
<p>&lt;p&gt;Run the procedure &lt;a href=listcols.html&gt;listcols&lt;/a&gt; to see a complete list of selection parameters.</p>
<p>&lt;p&gt;See the discussion on Select in the &lt;a href=<a class="reference external" href="http://wwwlocal.gb.nrao.edu/GBT/DA/gbtidl/users_guide/node50.html">http://wwwlocal.gb.nrao.edu/GBT/DA/gbtidl/users_guide/node50.html</a> TARGET=_top&gt;Users Guide&lt;/a&gt; 
for a summary of selection syntax.
&lt;p&gt;
Flags (set via &lt;a href=flag.html&gt;flag&lt;/a&gt;) can be selectively applied or ignored using the 
useflag and skipflag keywords.  Only one of those two keywords can
be used at a time (it is an error to use both at the same time).
Both can be either a boolean (/useflag or /skipflag) or an array of
strings.  The default is /useflag, meaning that all flag rules that
have been previously set are applied when the data is fetched from
disk, blanking any data as described by each rule.  If /skipflag is
set, then all of the flag rules associated with this data are
ignored and no data will be blanked when fetched from disk (it may
still contain blanked values if the actual values in the disk file
have already been blanked by some other process).  If useflag is a
string or array of strings, then only those flag rules having the 
same idstring value are used to blank the data.  If skipflag is a
string or array of strings, then all flag rules except those
with the same idstring value are used to blank the data.</p>
<p>&#64;keyword useflag {in}{optional}{type=boolean or string}{default=true}
Apply all or just some of the flag rules?
&#64;keyword skipflag {in}{optional}{type=boolean or string} Do not apply
any or do not apply a few of the flag rules?
&#64;keyword _EXTRA {in}{optional}{type=extra keywords} These are
selection parameters that determine which data to retrieve.</p>
<p>&#64;examples
&lt;pre&gt;</p>
<blockquote>
<div><p>filein,my_raw_data.fits
listcols                  ; show the parameters that can be used
get,index=0               ; retrieves the first record
copy, 0, 10
get, scan=6, plnum=0, ifnum=1, int=2
oshow, 10
get, scan=6, plnum=0, ifnum=1, int=2, /skipflag ; ignore all flags
; in this next example, only flags with idstring=wind are ignored.
get, scan=6, plnum=0, ifnum=1, int=2, skipflag=wind</p>
</div></blockquote>
<p>&lt;/pre&gt;</p>
<p>&#64;uses &lt;a href=set_data_container.html&gt;set_data_container&lt;/a&gt;</p>
<p>&#64;version $Id;-</p>
</dd></dl>

<dl class="idl pro">
<dt class="sig sig-object idl" id="getps">
<em class="property"><span class="pre">pro</span></em><span class="sig-name descname"><span class="pre">getps</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">scan</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ifnum=ifnum</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">intnum=intnum</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plnum=plnum</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fdnum=fdnum</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sampler=sampler</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tau=tau</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tsys=tsys</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ap_eff=ap_eff</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">smthoff=smthoff</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">units=units</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">eqweight=eqweight</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tcal=tcal</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">quiet=quiet</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keepints=keepints</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">useflag=useflag</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">skipflag=skipflag</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">instance=instance</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file=file</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timestamp=timestamp</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">status=status</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#getps" title="Link to this definition">#</a></dt>
<dd></dd></dl>

<dl class="idl pro">
<dt class="sig sig-object idl" id="divide">
<em class="property"><span class="pre">pro</span></em><span class="sig-name descname"><span class="pre">divide</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">in1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">in2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">out</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#divide" title="Link to this definition">#</a></dt>
<dd><p>This procedure divides the data from two data containers stored in
the global buffers 0-15.  If no parameters are passed, then the data
from buffer 0 is divided by buffer 1 and the result is stored in
buffer 0.  If two parameters are supplied, the data at the first
buffer number is divided by the data at the second buffer number and
the result is stored in buffer 0.  If three parameters are supplied,
the result is stored in the third (output) buffer number.</p>
<p>&lt;p&gt; out = in1 / in2</p>
<p>&#64;param in1 {in}{optional}{type=integer} First input data buffer number
&#64;param in2 {in}{optional}{type=integer} Second input data buffer number
&#64;param out {in}{optional}{type=integer} Output data buffer number</p>
<p>&#64;examples
&lt;pre&gt;</p>
<blockquote>
<div><p>getrec,1
copy,0,1
getrec,2
divide</p>
<p>getrec,1
copy,0,10
getrec,2
copy,0,11
divide,10,11,12     ; The data from buffer 10 is divided by buffer 11</p>
<blockquote>
<div><p>; and the result is stored in buffer 12</p>
</div></blockquote>
</div></blockquote>
<p>&lt;/pre&gt;</p>
<p>&#64;uses &lt;a href=../toolbox/dcdivide.html&gt;dcdivide&lt;/a&gt;
&#64;uses &lt;a href=../toolbox/dcpaircheck.html&gt;dcpaircheck&lt;/a&gt;</p>
<p>&#64;version $Id;-</p>
</dd></dl>

<dl class="idl function">
<dt class="sig sig-object idl" id="getstatsrange">
<em class="property"><span class="pre">function</span></em><span class="sig-name descname"><span class="pre">getstatsrange</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nels</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">brange</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">erange</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">full=full</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">chan=chan</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#getstatsrange" title="Link to this definition">#</a></dt>
<dd><p>Used by stats and moments to convert a region that might be in the
x-axis units into a region in channels.  Both procedures work on the
same rules and so this function encapsulates them in one place.
This is not intended to be used by GUIDE users directly.</p>
<p>&#64;param name {in}{required}{type=string} String inserted into prompt
&#64;param nels {in}{required}{type=integer} Total number of data elements
&#64;param brange {in}{optional}{type=float} Starting value in x-axis units
&#64;param erange {in}{optional}{type=float} Ending value in x-axis units
&#64;keyword full {in}{optional}{type=boolean} Compute stats for full spectrum?
&#64;keyword chan {in}{optional}{type=boolean} Ranges are in channels?
&#64;returns 2-element array with [bchan,echan] giving region in
channels. Returns -1 on error (bchan and echan both out of range).</p>
<p>&#64;private_file
&#64;version $Id;-</p>
</dd></dl>

<dl class="idl pro">
<dt class="sig sig-object idl" id="listids">
<em class="property"><span class="pre">pro</span></em><span class="sig-name descname"><span class="pre">listids</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">keep=keep</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#listids" title="Link to this definition">#</a></dt>
<dd><p>List all of the idstring values in the flag file of the current
spectral line data source or the keep (output) data source.</p>
<p>&lt;p&gt;Continuum flagging is not supported.</p>
<p>&#64;keyword keep {in}{optional}{type=boolean} List the idstring values
in the keep (output) file?</p>
<p>&#64;version $Id;-</p>
</dd></dl>

<dl class="idl function">
<dt class="sig sig-object idl" id="astack">
<em class="property"><span class="pre">function</span></em><span class="sig-name descname"><span class="pre">astack</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">elem</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">count=count</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#astack" title="Link to this definition">#</a></dt>
<dd><p>Function to return the value of a specific element of the stack.</p>
<p>&#64;param elem {in}{optional}{type=long integer} The index of
the element to return.  If elem is omitted, the entire contents of
the stack up through (!g.acount-1) is returned as an array.
&#64;keyword count {out}{optional}{type=long integer} The number of
elements returned (0, 1 or !g.acount).</p>
<p>&#64;returns -1 on error (out of limits), a warning message also
appears.
&#64;examples</p>
<p>A simple use of astack:</p>
<dl class="simple">
<dt>&lt;pre&gt;</dt><dd><p>; stack contains [ 10,  12,  14,  20,  25, 28] to begin
my_elem = astack(3)
; my_elem contains the value 20</p>
</dd>
</dl>
<p>&lt;/pre&gt;</p>
<p>A more substantive use.  The following procedure averages all of
the data from scans listed in the stack.</p>
<p>&lt;pre&gt;
pro myavg,_extra=extra
freeze
for i=0,!g.acount-1 do begin</p>
<blockquote>
<div><p>getnod,astack(i),plnum=0,units=Jy,_extra=extra
accum
getnod,astack(i),plnum=1,units=Jy,_extra=extra
accum</p>
</div></blockquote>
<p>endfor
ave
unfreeze
end
&lt;/pre&gt;</p>
<p>In this example, select is used with astack to flag data using
flagrec.  This is useful if the data isnt easily described using
the parameters available in the flag procedure.  The end result here
is that all of the data having a source equal to Orion and
polarization equal to RR in IF number 3 is flagged from channel
500 through channel 520.</p>
<dl class="simple">
<dt>&lt;pre&gt;</dt><dd><p>emptystack  ; clear the stack first
select, source=Orion, polarization=RR, ifnum=3 ; populate the stack
a = astack(count=count)
if count gt 0 then flagrec,a,bchan=500,echan=520,idstring=RFI-Orion</p>
</dd>
</dl>
<p>&lt;/pre&gt;</p>
<p>&#64;version $Id;-</p>
</dd></dl>

<dl class="idl pro">
<dt class="sig sig-object idl" id="ginterp">
<em class="property"><span class="pre">pro</span></em><span class="sig-name descname"><span class="pre">ginterp</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">buffer</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bchan=bchan</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">echan=echan</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">linear=linear</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">quadratic=quadratic</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lsquadratic=lsquadratic</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">spline=spline</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ginterp" title="Link to this definition">#</a></dt>
<dd><p>Interpolate across blanked channels in the primary data container
(buffer 0) or one of the other buffers.</p>
<p>&lt;p&gt;This uses the IDL INTERPOL function to replace blanked values in
the buffer with unblanked values according to the interpolation
method selected.</p>
<p>&lt;p&gt;You can limit the range of channels to consider using bchan and
echan.  When not supplied, all of the channels are used.</p>
<p>&lt;p&gt;The default interpolation method is linear. The other
interpolations may not be particularly useful across large gaps.</p>
<p>&lt;p&gt;If all of the data in the requested range is good (unblanked)
then no interpolation is done and this routine silently returns
without changing anything in dc.</p>
<p>&lt;p&gt;It is an error to request more than one interpolation method.</p>
<p>&#64;param buffer {in}{optional}{type=integer}{default=0} The data
container to smooth to the new resolution.  This defaults to the
primary data container (buffer 0).
&#64;keyword bchan {in}{optional}{type=integer} The starting channel
number.  If not specified, bchan=0.
&#64;keyword echan {in}{optional}{type=integer} The last channel number.
If not specified use all channels from bchan to the end.</p>
<p>&#64;keyword linear {in}{optional}{type=boolean} When set, use the
linear interpolation provided by INTERPOL.  This is the default
interpolation when no other method is specified.</p>
<p>&#64;keyword quadratic {in}{optional}{type=boolean} When set, use the
quadratic interpolation provided by INTERPOL.</p>
<p>&#64;keyword lsquadratic {in}{optional}{type=boolean} When set, use the
lsquadratic (lest squares quadratic) interpolation provided by
INTERPOL.</p>
<p>&#64;keyword spline {in}{optional}{type=boolean} When set, use the
spline interpolation provided by INTERPOL.</p>
<p>&#64;examples
&lt;pre&gt;</p>
<blockquote>
<div><p>clip, -100.0, 100.0, /blank    ; blank bad data
ginterp      ; linear interpolation across the blanked regions</p>
</div></blockquote>
<p>&lt;/pre&gt;</p>
<p>&#64;uses &lt;a href=../toolbox/dcinterp.html&gt;dcinterp&lt;/a&gt;
&#64;uses &lt;a href=../toolbox/show.html&gt;show&lt;/a&gt;</p>
<p>&#64;version $Id;-</p>
</dd></dl>

<dl class="idl function">
<dt class="sig sig-object idl" id="scan_info">
<em class="property"><span class="pre">function</span></em><span class="sig-name descname"><span class="pre">scan_info</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">scan</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keep=keep</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">quiet=quiet</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">count=count</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#scan_info" title="Link to this definition">#</a></dt>
<dd><p>Get scan information structure from the appropriate I/O object.</p>
<p>&lt;p&gt;This uses !g.line to determine which I/O object to get the
information from, unless keep is set, in which case it gets it from
the keep file.</p>
<p>&lt;p&gt;Note that this may return more than one structure (an array of
structures would be returned).  This can happen if the same scan
number appears in the data with more than one timestamp.  The
instance and timestamp keywords of the various data retrieval
procedures (getscan, get, getnod, getps, etc) can be used to
differentiate between these duplicate scans.  The instance keyword
in those cases corresponds to the element number of the array
returned by scan_info.  The timestamp keyword corresponds to the
timestamp field in the scan_info structure.</p>
<p>&lt;p&gt;The data corresponding to a given instance are always found in
consecutive records.  The index_start and nrecords fields can be
used to get just the data associated with a specific instance.  See
the examples.</p>
<p>The fields in the returned structure are:
&lt;UL&gt;
&lt;LI&gt; SCAN, the scan number, long integer
&lt;LI&gt; PROCSEQN, the procedure sequence number, long integer
&lt;LI&gt; PROCEDURE, the procedure name, string
&lt;LI&gt; TIMESTAMP, the timestamp associated with this scan, string
&lt;LI&gt; FILE, the name of the file where this scan was found
&lt;LI&gt; N_INTEGRATION, the number of integrations, long integer.  Note
that different samplers may have different numbers of integrations.
This value is the number of unique times (MJD) found for this scan.
Use N_SAMPINTS for the number of integrations from a given sampler.
&lt;LI&gt; N_FEEDS, the number of feeds, long integer
&lt;LI&gt; FDNUMS, the specific FDNUM values for this scan.
&lt;LI&gt; N_IFS, the number of IFs, long integer
&lt;LI&gt; IFNUMS, the specific IFNUM values for this scan.
&lt;LI&gt; IFTABLE, a 3-axis array indicating which combinations of ifnum,
fdnum and plnum are present in the data.  The first axis is ifnum,
the second axis is fdnum and the 3rd is plnum.  Combinations with
data have 1 in this array.  Combinations without data have a 0.
Note: IDL removes any trailing axis of length 1 (degenerate) so care
must be taken when using the shape of this array.  E.g. if there is
no third axis, then there is only one plnum, plnum=0.
&lt;LI&gt; N_SWITCHING_STATES, the number of switching states, long integer
&lt;LI&gt; N_CAL_STATES, the number of cal switching states, long integer
&lt;LI&gt; N_SIG_STATES, the number of sig switching states, long integer
&lt;LI&gt; N_WCALPOS, the total number of unique WCALPOS values in this</p>
<blockquote>
<div><p>scan. (spectral line data only)</p>
</div></blockquote>
<dl class="simple">
<dt>&lt;LI&gt; WCALPOS, a vector giving the list of unique WCALPOS</dt><dd><p>(WBand receiver calposition) values for this scan. (spectral line
data only)</p>
</dd>
<dt>&lt;LI&gt; N_POLARIZATIONS, the number of unique polarizations, long</dt><dd><p>integer, will always be less then or equal to 4.</p>
</dd>
<dt>&lt;LI&gt; POLARIZATIONS, a vector containing the actual</dt><dd><p>polarizations, string (unused elements are the null string).</p>
</dd>
<dt>&lt;LI&gt; PLNUMS, vector containing the PLNUM values</dt><dd><p>corresponding to each POLARIZATION, long integer (unused elements
are -1)</p>
</dd>
<dt>&lt;LI&gt; FEEDS, a vector containing the unique feed ids, long</dt><dd><p>integer (unused elements are -1)</p>
</dd>
<dt>&lt;LI&gt; BANDWIDTH, a vector containing the unique bandwidths, one for each IF</dt><dd><p>(Hz)</p>
</dd>
</dl>
<p>&lt;LI&gt; INDEX_START, the starting index number for this scan.
&lt;LI&gt; NRECORDS, the total number of records in this scan.
&lt;LI&gt; N_SAMPLERS, the total number of unique sampler names in this scan.
&lt;LI&gt; SAMPLERS, the list of unique sampler names.
&lt;LI&gt; N_SAMPINTS, the number of integrations for each sampler.
&lt;LI&gt; N_CHANNELS, the number of channels in each spectrum for each sampler.
&lt;/UL&gt;</p>
<p>&#64;param scan {in}{required}{type=integer} Scan number to get
information on.</p>
<p>&#64;param file {in}{optional}{type=string} Limit the search for
matching scans to a specific file.  If omitted, scans are found in
all files currently opened through filein (a single file) or dirin
(possibly multiple files).</p>
<p>&#64;keyword keep {in}{optional}{type=boolean} If set, the scan
information comes from the keep file.</p>
<p>&#64;keyword quiet {in}{optional}{type=boolean} When set, suppress most
error messages.  Useful when being used within another procedure.</p>
<p>&#64;keyword count {in}{optional}{type=integer} Returns the number of
elements of the returned array of scan_info structures.</p>
<p>&#64;returns Scan information structure.  Returns -1 on error.</p>
<p>&#64;examples
Get all of the data associated with one scan.
&lt;pre&gt;</p>
<blockquote>
<div><p>a = scan_info(65)
indx = lindgen(a.nrecords) + a.index_start
d65 = getchunk(index=indx)
 do stuff with d65, but dont forget to free it when done
data_free, d65</p>
</div></blockquote>
<p>&lt;/pre&gt;
&lt;p&gt;
Find paired scans and their info structure (e.g. position switched)
&lt;pre&gt;</p>
<blockquote>
<div><p>a = scan_info(65)
b = find_paired_info(a)</p>
</div></blockquote>
<p>&lt;/pre&gt;</p>
<p>&#64;version $Id;-</p>
</dd></dl>

<dl class="idl function">
<dt class="sig sig-object idl" id="SDFITSIN">
<em class="property"><span class="pre">function</span></em><span class="sig-name descname"><span class="pre">SDFITSIN</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">directory=directory</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">continuum=continuum</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">new_index=new_index</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#SDFITSIN" title="Link to this definition">#</a></dt>
<dd><p>Create a new io_sdfits object and associate the indicated filename
with it.</p>
<p>If filename is a directory, the io_sdfits::set_project method is
used and hence the contents of all sdfits files in that directory 
will be accessible through this single io object.</p>
<p>&#64;param filename {in}{optional}{type=string}. If the filename is not 
suppled, a graphical file chooser will be launched to allow the user 
to select one.</p>
<p>&#64;keyword directory {in}{optional}{type=boolean}.  If this keyword
exists and filename was omitted, then the file chooser is launched
allowing the user to select a directory, otherwise a single, regular
file must be selected.</p>
<p>&#64;keyword continuum {in}{optional}{type=boolean}.  If this keyword 
exists then a continuum io_sdfits object will be returned.
Otherwise (the default), a line io_sdfits object will be returned.</p>
<p>&#64;keyword new_index {in}{optional}{type=boolean} When set,, a new
index is generated, whether it needed to be or not.  By
default, the io code tries to re-use an existing index unless it is
seen to be out of date.  Regenerating the index file can take some
time, but no information should be lost in the process.  Usually,
the io code can trusted to regenerate the index file only when
necessary.</p>
<p>&#64;returns io_sdfits (line or cntm) object on success or -1 on failure</p>
<p>&#64;private_file</p>
<p>&#64;version $Id;-</p>
</dd></dl>

<dl class="idl pro">
<dt class="sig sig-object idl" id="summary">
<em class="property"><span class="pre">pro</span></em><span class="sig-name descname"><span class="pre">summary</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bscan=bscan</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">escan=escan</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#summary" title="Link to this definition">#</a></dt>
<dd></dd></dl>

<dl class="idl pro">
<dt class="sig sig-object idl" id="listfind">
<em class="property"><span class="pre">pro</span></em><span class="sig-name descname"><span class="pre">listfind</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">param</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#listfind" title="Link to this definition">#</a></dt>
<dd><p>List a specified selection parameter or all selection parameter
values used by &lt;a href=find.html&gt;find&lt;/a&gt;</p>
<p>&lt;p&gt;This allows you to quickly tell the value of one or all of the
selection parameters used by FIND.  The set of parameters is the
column names as reported by &lt;a href=listcols.html&gt;listcols&lt;/a&gt;.</p>
<p>&lt;p&gt;&lt;b&gt;Note:&lt;/b&gt; Only those parameters that have actually been set
are listed unless a listing for specific parameters has been
requested.</p>
<p>&lt;p&gt;Use &lt;a href=setfind.html&gt;setfind&lt;/a&gt; to set selection parameters.</p>
<p>&lt;p&gt;Use &lt;a href=clearfind.html&gt;clearfind&lt;/a&gt; to clear selection parameters.</p>
<p>&#64;param param {in}{optional}{type=string} The selection parameter(s)
to list.  Minimum-matching is used to find the selection parameter
matching this value.  If param is not supplied or is an empty
string, all parameters are listed.  Only parameters appropriate for
the current mode (line or continuum) are shown unless a specific
parameter is requested.</p>
<p>&#64;examples
&lt;pre&gt;
listfind  ; show all set find parameters
listfind,scan  ; show the value of the SCAN selection parameter
listfind,[scan,int,plnum] ; show the values of 3 selection
params
&lt;/pre&gt;</p>
<p>&#64;version $Id;-</p>
</dd></dl>

<dl class="idl function">
<dt class="sig sig-object idl" id="find_scan_info">
<em class="property"><span class="pre">function</span></em><span class="sig-name descname"><span class="pre">find_scan_info</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">scan</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timestamp=timestamp</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">instance=instance</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file=file</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#find_scan_info" title="Link to this definition">#</a></dt>
<dd><p>Find a scan info from the current line filein matching the given scan,
file, timestamp, and instance values.  The matching scan_info is
returned.  See &lt;a href=scan_info.html&gt;scan_info&lt;/a&gt; for more
information on the returned structure.</p>
<p>&lt;p&gt;This is used by all of the standard calibration routines to get
the scan_info for the requested scan.  It is encapsulated here to
make it easy to adapt and understand those calibration routines.</p>
<p>If there was a problem, the return value will not be structure (it
will be -1).</p>
<p>Because this is designed to be called from another routine, any
error messages are displayed using the prefix appropriate to the
calling routine.</p>
<p>&#64;param scan {in}{required}{type=integer} Scan number to get
information on.  This must be provided unless timestamp is provided.
&#64;keyword timestamp {in}{optional}{type=string} The M&amp;C timestamp associated
with the desired scan. When supplied, scan and instance are ignored.
&#64;keyword instance {in}{optional}{type=integer} Which occurence
of this scan should be used.  Default is 0.
&#64;keyword file {in}{optional}{type=string} Limit the search for
matching scans to a specific file.  If omitted, scans are found in
all files currently opened through filein (a single file) or dirin
(possibly multiple files).
&#64;returns A single scan_info structure.  Returns -1 if a match can
not be found.</p>
<p>&#64;uses &lt;a href=../toolbox/select_data.html&gt;select_data&lt;/a&gt;
&#64;uses &lt;a href=scan_info.html&gt;scan_info&lt;/a&gt;</p>
<p>&#64;private_file</p>
<p>&#64;version $Id;-</p>
</dd></dl>

<dl class="idl pro">
<dt class="sig sig-object idl" id="flagspurs">
<em class="property"><span class="pre">pro</span></em><span class="sig-name descname"><span class="pre">flagspurs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">flagcenteradc=flagcenteradc</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#flagspurs" title="Link to this definition">#</a></dt>
<dd><p>Set the flags for the VEGAS spurs in the currently opened input data
source (either a single sdfits file or a directory).</p>
<p>&lt;p&gt;VEGAS produces spurs (spikes) at channels corresponding to
integer multiples of the ADC sampler frequency divided by 64.  The
normal behavior of sdfits is to flag these channels when the data
are filled (use &lt;a href=listflags&gt;listflags&lt;/a&gt; to see the list of
flags for the currently opened input data set). This routine can be
used to recreate those flags if the original flag file has been lost
or corrupted.</p>
<p>&lt;p&gt;A spur is also produced at the center channel (NCHAN/2 when
counting from 0).  That spur does not arise in the ADC in VEGAS and
so does not move as the spectral window is tuned across the ADC
bandpass. This routine does not flag that spur.  Normal
sdfits use will replace that spur with the average of the two
adjacent channels and so it generally is not necessary to flag that
spur.  Since that spur does not move as the spectral window is tuned
it can be flagged using the standard flag command if necessary.</p>
<p>&lt;p&gt;The routine first unflags all flags with the idstring
VEGAS_SPUR</p>
<p>&lt;p&gt;This routine expects to encounter uncalibrated VEGAS data filled
by sdfits.  It checks that there is both an SDFITVER keyword and an
INSTRUME keyword on the primary header of all SDFITS files.  The
value of the INSTRUME keyword must be VEGAS.</p>
<p>&lt;p&gt;This spur locations are determined using the VSPDELT, VSPRPIX,
and VSPRVAL columns.  For data filled using older versions of
sdfits, these values are not present in the SDFITS tables. Such
older data should be refilled using the most recent version of
sdfits to make use of this procedure.</p>
<p>&#64;keyword flagcenteradc {in}{optional}{type=boolean} When set, the
center ADC spur is also flagged.  Normally that spur is left
unflagged because sdfits usually replaces the value at that location
with an average of the two adjacent channels and so that spur does
not need to be flagged since its been interpolated.</p>
<p>&#64;version $Id;-</p>
</dd></dl>

<dl class="idl pro">
<dt class="sig sig-object idl" id="gmoment">
<em class="property"><span class="pre">pro</span></em><span class="sig-name descname"><span class="pre">gmoment</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bmoment</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">emoment</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">chan=chan</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">full=full</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">quiet=quiet</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ret=ret</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#gmoment" title="Link to this definition">#</a></dt>
<dd><p>Find the first 3 moments of a region of the data in buffer 0.</p>
<p>&lt;p&gt;The three moments are:
&lt;pre&gt;</p>
<blockquote>
<div><p>m[0] = sum(data(i) * delta_x(i))
m[1] = sum(data(i)*x(i))/m[0]
m[2] = sqrt(sum(data(i)*(x(i)-m[1])^2)/m[0])</p>
</div></blockquote>
<p>&lt;/pre&gt;
where the sums are over the region of interest, the x and delta_x
values are the channel centers and spacings in the currently
displayed x-axis units.  delta_x is calculated independently for
each channel and centered at that channel.  The results are printed
out and returned through the ret keyword. The display of the results
can be turned off through the use of the /quiet flag.</p>
<p>&lt;p&gt;The region is given in the currently displayed x-axis units and
the sum starts from the channel number nearest bmoment and ends at the
channel number nearest emoment.  If the /chan keyword is used, then
bmoment and emoment are given in channels.  If a region is not
specified the user is prompted to use the cursor on the plotter to
mark the region. /full can be used to force gmoment to use all channels.</p>
<p>&lt;p&gt;Blanked values are ignored.</p>
<dl>
<dt>&lt;p&gt;The structure returned through the ret keyword has these fields.</dt><dd><p>&lt;ul&gt;&lt;li&gt;&lt;b&gt;bchan&lt;/b&gt; The first channel used.
&lt;li&gt;&lt;b&gt;echan&lt;/b&gt; The last channel used.
&lt;li&gt;&lt;b&gt;nchan&lt;/b&gt; The total number of channels used.
&lt;li&gt;&lt;b&gt;xmin&lt;/b&gt; The minimum x-axis value (bchan or echan)
&lt;li&gt;&lt;b&gt;xmax&lt;/b&gt; The maximum x-axis value (bchan or echan)
&lt;li&gt;&lt;b&gt;moments&lt;/b&gt; A 3-element array giving the moments, in the</p>
<blockquote>
<div><p>order described above.</p>
</div></blockquote>
<dl class="simple">
<dt>&lt;li&gt;&lt;b&gt;moment_unts&lt;/b&gt; A 3-element string array giving the units</dt><dd><p>for each moment.</p>
</dd>
</dl>
<p>&lt;/ul&gt;</p>
</dd>
</dl>
<p>&lt;p&gt;gmoment was chosen because IDL already has a moment function.</p>
<p>&#64;param bmoment {in}{optional}{type=float} Start of region in x-axis units.
&#64;param emoment {in}{optional}{type=float} End of region in x-axis units.
&#64;keyword chan {in}{optional}{type=boolean} Range specified in channels?
&#64;keyword full {in}{optional}{type=boolean} Compute moments for full spectrum?
&#64;keyword quiet {in}{optional}{type=boolean} Suppress the printing of
the moments.
&#64;keyword ret {out}{optional}{type=structure} Structure containing
the results.</p>
<p>&#64;examples
&lt;pre&gt;</p>
<blockquote>
<div><p>gmoment, 1000, 1520, ret=ret</p>
</div></blockquote>
<p>&lt;/pre&gt;</p>
<p>&#64;version $Id;-</p>
</dd></dl>

<dl class="idl pro">
<dt class="sig sig-object idl" id="select">
<em class="property"><span class="pre">pro</span></em><span class="sig-name descname"><span class="pre">select</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">count</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keep=keep</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">quiet=quiet</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_EXTRA=ex</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#select" title="Link to this definition">#</a></dt>
<dd><p>This procedure is used to select data from the current data file for
later processing.</p>
<p>&lt;p&gt;Selection puts the index numbers that match the selection
criteria onto the end of the stack using &lt;a href=appendstack.html&gt;appendstack&lt;/a&gt;. Once the index 
numbers are there, the can be used in a call to &lt;a href=get.html&gt;get&lt;/a&gt; or to &lt;a href=kget.html&gt;kget&lt;/a&gt; to 
retrieve them from the data source.</p>
<p>&lt;p&gt;Data can be selected based on entries in the index file, such as
source name, polarization type, IF number, etc.  For a complete list
of eligible parameters use the procedure &lt;a href=listcols.html&gt;listcols&lt;/a&gt;</p>
<p>&lt;p&gt;See the discussion on Select in the &lt;a href=<a class="reference external" href="http://wwwlocal.gb.nrao.edu/GBT/DA/gbtidl/users_guide/node50.html">http://wwwlocal.gb.nrao.edu/GBT/DA/gbtidl/users_guide/node50.html</a> TARGET=_top&gt;Users Guide&lt;/a&gt; 
for a summary of selection syntax.</p>
<p>&lt;p&gt;The selection criteria are ultimately passed to the io classs
search_index via the _EXTRA parameter.</p>
<p>&#64;param count {out}{optional}{type=integer} The number of records
selected and added to the stack.
&#64;keyword keep {in}{optional}{type=boolean} If set, the selection comes from
the keep file.  If not set, the selection comes from the input file.
&#64;keyword quiet {in}{optional}{type=boolean} Turn off informational messages.
&#64;keyword _EXTRA {in}{optional}{type=extra keywords} These are
the selection parameters.</p>
<p>&#64;uses &lt;a href=../toolbox/select_data.html&gt;select_data&lt;/a&gt;
&#64;uses &lt;a href=appendstack.html&gt;appendstack&lt;/a&gt;</p>
<p>&#64;examples
&lt;pre&gt;
select,source=Orion*,/keep
for i=0,(!g.acount-1) do begin</p>
<blockquote>
<div><p>get,index=astack(i)
; do things here</p>
</div></blockquote>
<p>endfor
&lt;/pre&gt;</p>
<p>&#64;version $Id;-</p>
</dd></dl>

<dl class="idl pro">
<dt class="sig sig-object idl" id="deselect">
<em class="property"><span class="pre">pro</span></em><span class="sig-name descname"><span class="pre">deselect</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">keep=keep</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_EXTRA=ex</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#deselect" title="Link to this definition">#</a></dt>
<dd><p>This procedure is used to remove previously selected index numbers
from the stack.</p>
<p>&lt;p&gt;Data can be de-selected by using selection criteria in the same
way as in &lt;a href=select.html&gt;select&lt;/a&gt;.</p>
<p>&lt;p&gt;Data can be de-selected based on entries in the index file, such
as source  name, polarization type, IF number, etc.  For a complete
list of eligible parameters use the procedure &lt;a href=listcols.html&gt;listcols&lt;/a&gt;.</p>
<p>&lt;p&gt;See the discussion on Select in the &lt;a href=<a class="reference external" href="http://wwwlocal.gb.nrao.edu/GBT/DA/gbtidl/users_guide/node50.html">http://wwwlocal.gb.nrao.edu/GBT/DA/gbtidl/users_guide/node50.html</a> TARGET=_top&gt;Users Guide&lt;/a&gt; 
for a summary of selection syntax.</p>
<p>&lt;p&gt;The selection criteria are ultimately passed to the io classs
search_index via the _EXTRA parameter.</p>
<p>&#64;keyword keep {in}{optional}{type=boolean} If set, the selection comes from
the keep file.  If not set, the selection comes from the input file.
&#64;keyword _EXTRA {in}{optional}{type=extra keywords} These are
the selection parameters.</p>
<p>&#64;examples
&lt;pre&gt;</p>
<blockquote>
<div><p>select, source=ORION    ; select all ORION data
deselect, scan=15         ; remove scan 15, perhaps its bad
deselect, ifnum=1         ; remove the IFNUM=1 data</p>
</div></blockquote>
<p>&lt;/pre&gt;</p>
<p>&#64;uses &lt;a href=../toolbox/select_data.html&gt;select_data&lt;/a&gt;
&#64;uses &lt;a href=delete.html&gt;delete&lt;/a&gt;</p>
<p>&#64;version $Id;-</p>
</dd></dl>

<dl class="idl pro">
<dt class="sig sig-object idl" id="getfs">
<em class="property"><span class="pre">pro</span></em><span class="sig-name descname"><span class="pre">getfs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">scan</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ifnum=ifnum</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">intnum=intnum</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plnum=plnum</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fdnum=fdnum</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sampler=sampler</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tsys=tsys</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tau=tau</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ap_eff=ap_eff</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">smthoff=smthoff</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">units=units</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nofold=nofold</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">blankinterp=blankinterp</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nomask=nomask</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">eqweight=eqweight</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tcal=tcal</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">quiet=quiet</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keepints=keepints</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">useflag=useflag</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">skipflag=skipflag</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">instance=instance</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file=file</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timestamp=timestamp</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">status=status</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#getfs" title="Link to this definition">#</a></dt>
<dd><p>This procedure retrieves and calibrates a frequency switched
scan.</p>
<p>&lt;p&gt;This code could be used as a template for the user who may wish
to develop more sophisticated calibration schemes. The spectrum is
calibrated in Ta (K) by default.  Other recognized units are Ta* and
Jy.</p>
<dl>
<dt>&lt;p&gt;&lt;b&gt;Summary&lt;/b&gt;</dt><dd><p>&lt;ul&gt;&lt;li&gt;Data are selected using scan, ifnum, intnum, plnum and
fdnum or, alternatively, sampler and intnum if you know the
specific sampler name (e.g. A10).</p>
<dl class="simple">
<dt>&lt;li&gt;Individual integrations are processed separately.</dt><dd><p>Each integration is processed using &lt;a href=../toolbox/dofreqswitch.html&gt;dofreqswitch&lt;/a&gt;</p>
</dd>
<dt>&lt;li&gt;The integrations are calibrated in Ta (K) by default.  If</dt><dd><p>units of Ta* or Jy are requested via the units keyword, then 
&lt;a href=../toolbox/dcsetunits.html&gt;dcsetunits&lt;/a&gt; is used to convert to the desired units. 
This produces two spectra, one where the sig phase of the
integration was used as the signal and one where the ref
phase of the integration was used as the signal.</p>
</dd>
<dt>&lt;li&gt;The two resulting data containers are combined using </dt><dd><p>&lt;a href=../toolbox/dcfold.html&gt;dcfold&lt;/a&gt; unless the nofold keyword is set.  This step is also 
skipped if the there is no frequency overlap between the two
spectra (the frequency switching distance is more than the
total number of channels).  In that case (out-of-band
frequency switching), the data can not be folded and this
step is skipped.</p>
</dd>
<dt>&lt;li&gt;Averaging of individual integrations is then done using </dt><dd><p>&lt;a href=../toolbox/dcaccum.html&gt;dcaccum&lt;/a&gt;.  By default, integrations are weighted as described in dcaccum.  
If the eqweight keyword is set, then integrations are averaged with an
equal weight.  If the nofold keyword is set or the data is
out-of-band frequency-switched then the two results  are
averaged separately for each integration.</p>
</dd>
<dt>&lt;li&gt;The final average is left in the primary data container</dt><dd><p>(buffer 0), and a summary line is printed. If the nofold keyword
is set then the other result is left in buffer 1.  These results
can be combined later by the user using &lt;a href=fold.html&gt;fold&lt;/a&gt;  The printing of the
summary line can be suppressed by setting the quiet keyword.</p>
</dd>
<dt>&lt;li&gt;The individual integration results can be saved to the</dt><dd><p>currently opened output file by setting the keepints keyword.  The
final average is still produced in that case.  If the nofold
keyword is set, the signal result is kept first followed by the
reference result for each integration, otherwise only the
folded result is saved for each integration.  In the case of
out-of-band frequency-switched data only the signal result is
saved unless the nofold keyword is explicitly set.</p>
</dd>
</dl>
<p>&lt;/ul&gt;</p>
</dd>
</dl>
<p>&lt;p&gt;&lt;b&gt;Parameters&lt;/b&gt;
&lt;p&gt;
The only required parameter is the scan number.  Arguments to
identify the IF number, polarization number, and feed number are
optional. 
&lt;p&gt;
&lt;p&gt; If ifnum, fdnum, or plnum are not supplied then the lowest
values for each of those where data exists (all combinations may not
have data) will be used, using any user-supplied values.  The value
of ifnum is determined first, followed by fdnum and finally plnum.  If a
combination with data can not be found then &lt;a href=showiftab.html&gt;showiftab&lt;/a&gt;
is used to show the user what the set of valid combinations are.
The summary line includes the ifnum, fdnum, and plnum used.
&lt;p&gt;
&lt;b&gt;Tsys and Available Units&lt;/b&gt;
&lt;p&gt;
The procedure calculates Tsys based on the Tcal values
and the data.  The user can override this calculation by 
entering a zenith system temperature.  The procedure will then correct the 
user-supplied Tsys for the observed elevation.  If the data are
calibrated to Ta* or Jy,  additional parameters are used.  A zenith
opacity (tau) may be specified, and an aperture efficiency may be
specified.  The user is strongly encouraged to enter values for
these calibration parameters, but they will be estimated if none are
provided.  The user can also supply a mean tcal using the tcal
keyword.  That will override the tcal found in the data.
&lt;p&gt;
&lt;b&gt;Smoothing the Reference Spectra&lt;/b&gt;
&lt;p&gt;
A parameter called smthoff can be used to smooth the reference
spectrum in dofreqswitch.  In certain cases this can improve the
signal to noise ratio, but it may degrade baseline shapes and
artificially emphasize spectrometer glitches.  Use with care.  A
value of smthoff=16 is often a good choice. 
&lt;p&gt; 
&lt;b&gt;Weighting of Integrations in Scan Average&lt;/b&gt;
&lt;p&gt; 
By default, the averaging of integrations is weighted using tsys,
exposure, and frequency_resolution as described in the &lt;a href=../toolbox/dcaccum.html&gt;dcaccum&lt;/a&gt; 
documentation. To give all integrations equal weight instead of the
default weighting based on Tsys, use the /eqweight keyword.
&lt;p&gt;
If the data were taken with out-of-band frequency switching then no folding 
will be done and the nofold argument is ignored.
&lt;p&gt;
&lt;b&gt;Using or Ignoring Flags&lt;/b&gt;
&lt;p&gt;
Flags (set via &lt;a href=flag.html&gt;flag&lt;/a&gt;) can be selectively
applied or ignored using the useflag and skipflag keywords.  Only one of
those two keywords can be used at a time (it is an error to use both
at the same time).  Both can be either a boolean (/useflag or /skipflag)
or an array of strings.  The default is /useflag, meaning that all flag
rules that have been previously set are applied when the data is
fetched from disk, blanking data as described by each rule.  If
/skipflag is set, then all of the flag rules associated with this data
are ignored and no data will be blanked when fetched from disk (it
may still contain blanked values if the actual values in the disk
file have already been blanked by some other process).  If useflag is a
string or array of strings, then only those flag rules having the
same idstring value are used to blank the data.  If skipflag is a
string or array of strings, then all flag rules except those
with the same idstring value are used to blank the data.
&lt;p&gt;
&lt;b&gt;Dealing with flagged channels&lt;/b&gt;
&lt;p&gt;
When individual channels are flagged in the raw data (e.g. VEGAS
spikes at the expected spike locations) the data values at those
channels are replaced with Not a Number when the data is read from
disk.  That presents a challenge when processing frequency switched
data to avoid a spike appearing at the flagged channel locations
after the fold step done by this procedure (unless nofold is
selected).  When the data are combined at the fold step, each
channel data average is the weighted average (using Tsys) of two
data values, each from the same sky frequency but from different
original channels in the raw data.  When indivual channels are
flagged, that average can consist of just one finite value because
the frequency shift will seldom lead to overlapping flagged
channels. If there is any significant baseline structure across the
bandpass then that single finite channel will be noticeably
different from the local average of two channels.  That will lead to
a noticable spike (positive or negative) at the location of a
flagged channel, which is exactly the behavior that flagging the
channel was trying to avoid.</p>
<p>&lt;p&gt;
This procedure offers two ways of dealing with flagged channels to
avoid that problem.  The default makes sure that both the original
flagged channel and the corresponding channel in the other spectrum,
after one of them has been shifted to align in frequency, is also
flagged so that the final average has no finite values for that
channel (i.e. it appears as a flagged channel).  Alternatively, the
blankinterp keyword can be used to tell the fold procedure to
interpolate across all blanked values before doing any shifting and
averaging.  In the case of individually flagged channels, the
blanked channel is replaced by the average of the two adjacent
channels.  This obviously adds a new data value at the previously
unknown (flagged) channel but it can make downstream data processing
simpler by not having to worry that some of the channels contain
non-finite values.  That may be important if the data are exported
out of GBTIDL.  Finally, the nomask keyword can be used to turn
off this special handling (masking) of flagged channels before the
average (where spikes may result).  If blankinterp is used then
nomask has no effect because the data are interpolated before the
masking step happens.  If nofold is used then the data are never
masked or interpolated.
&lt;p&gt;
&lt;b&gt;Dealing With Duplicate Scan Numbers&lt;/b&gt;
&lt;p&gt;
There are 3 ways to attempt to resolve ambiguities when the
same scan number appears in the data source.  The instance keyword
refers to the element of the returned array of scan_info structures
that &lt;a href=scan_info.html&gt;scan_info&lt;/a&gt; returns.  So, if scan 23
appears 3 times then instance=1 refers to the second time that scan 23
appears as returned by scan_info.  The file keyword is useful if a 
scan is unique to a specific file and multiple files have been accessed
using &lt;a href=dirin.html&gt;dirin&lt;/a&gt;.  If file is specified and instance
is also specified, then instance refers to the instance of that scan
just within that file (which may be different from its instance within
all opened files when dirin is used).  The timestamp keyword is another
way to resolve ambiguous scan numbers.  The timestamp here is a string
used essentially as a label by the monitor and control system and is
unique to each scan.  The format of the timestamp string is
YYYY_MM_DD_HH:MM:SS.  When timstamp is given, scan and instance
are ignored.  If more than one match is found, an error is 
printed and this procedure will not continue.</p>
<p>&#64;param scan {in}{required}{type=integer} scan number
&#64;keyword ifnum {in}{optional}{type=integer} IF number
(starting with 0). Defaults to the lowest value associated with data
taking into account any user-supplied values for fdnum, and plnum.
&#64;keyword intnum {in}{optional}{type=integer} integration number,
default is all integrations.
&#64;keyword plnum {in}{optional}{type=integer} Polarization number
(starting with 0).  Defaults to the lowest value with data after
determining the values of ifnum and fdnum if not supplied by the
user.
&#64;keyword fdnum {in}{optional}{type=integer} Feed number.  Defaults
to the lowest value with data after determining the value of ifnum
if not supplied by the user and using any value of plnum supplied by
the user.  
&#64;keyword sampler {in}{optional}{type=string} sampler name, this is
an alternative way to specify ifnum,plnum, and fdnum.  When sampler
name is given, ifnum, plnum, and fdnum must not be given.
&#64;keyword tsys {in}{optional}{type=float} tsys at zenith, this is
converted to a tsys at the observed elevation.  If not suppled, the
tsys for each integration is calculated as described elsewhere.
&#64;keyword tau {in}{optional}{type=float} tau at zenith, if not
supplied, it is estimated using &lt;a href=../toolbox/get_tau.html&gt;get_tau&lt;/a&gt;
tau is only used when the requested units are other than the default
of Ta and when a user-supplied tsys value at zenith is to be used.
&#64;keyword ap_eff {in}{optional}{type=float} aperture efficiency, if
not suppled, it is estimated using &lt;a href=../toolbox/get_ap_eff.html&gt;get_ap_eff&lt;a&gt;
ap_eff is only used when the requested units are Jy.
&#64;keyword smthoff {in}{optional}{type=integer} smooth factor for reference spectrum
&#64;keyword units {in}{optional}{type=string} takes the value Jy,
Ta, or Ta*, default is Ta.
&#64;keyword nofold {in}{optional}{type=boolean} When set, getfs does not fold
the calibrated spectrum.  Buffer 0 then contains the result of
(sig-ref)/ref while buffer 1 contains the result of
(ref-sig)/sig, calibrated independently and averaged over all
integrations.  Only data container 0 will be shown on the plotter.
Default is unset (folded result).
&#64;keyword blankinterp {in}{optional}{type=boolean} When set, blanks
are replaced, before the fold step, by a linear interpolation
using the finite values found in the two spectra.  For isolated blanked
channels, the replacement value is the average of the two adjacent
channel values.  This argument is ignored if nofold is used.
&#64;keyword nomask {in}{optional}{type=boolean} When set, turn off the
masking of blank channels from each spectrum on to the other, after
the shift, when folding the data.  This may result in spikes at the
location of blanked channels. This was the original behavior of this
routine. This keyword is ignored if /nofold is used.
&#64;keyword eqweight {in}{optional}{type=boolean} When set, all
integrations are averaged with equal weight (1.0).  Default is unset.
&#64;keyword tcal {in}{optional}{type=float} Cal temperature (K) to use
in the Tsys calculation.  If not supplied, the mean_tcal value from
the header of the cal_off switching phase data in each integration
is used.  This must be a scalar, vector tcal is not yet supported.
The resulting data container(s) will have its mean_tcal header value
set to this keyword when it is set by the user.
&#64;keyword quiet {in}{optional}{type=boolean} When set, the normal
status message on successful completion is not printed.  This keyword will
not affect error messages.  Default is unset.
&#64;keyword keepints {in}{optional}{type=boolean} When set, the
individual integrations are saved to the current output file
(as set by fileout).  This keyword is ignored if an integration is
specified using the intnum keyword.  Default is unset.
&#64;keyword useflag {in}{optional}{type=boolean or string}
Apply all or just some of the flag rules?  Default is set.
&#64;keyword skipflag {in}{optional}{type=boolean or string} Do not apply
any or do not apply a few of the flag rules?  Default is unset.
&#64;keyword instance {in}{optional}{type=integer} Which occurence
of this scan should be used.  Default is 0.
&#64;keyword file {in}{optional}{type=string} When specified, limit the search 
for this scan (and instance) to this specific file.  Default is all files.
&#64;keyword timestamp {in}{optional}{type=string} The M&amp;C timestamp associated
with the desired scan. When supplied, scan and instance are ignored.
&#64;keyword status {out}{optional}{type=integer} An output value to indicate
whether the procedure finished as expected.  A value of 1 means there were
no problems, a value of -1 means there were problems with the
arguments before any data was processed, and a value of 0 means that
some of the individual integrations were processed (and possibly
saved to the output file if keepints was set) but there was a
problem with the final average, and the contents of the PDC remain
unchanged.</p>
<p>&#64;examples
Typical use of getfs:
&lt;pre&gt;</p>
<blockquote>
<div><p>getfs,76
accum
getfs,77
accum
ave
show</p>
</div></blockquote>
<p>&lt;/pre&gt;</p>
<p>In the following example, the spectrum is not folded and the two components
of the calibration are shown overlaid on the plotter.  Then the data are
folded by hand. This example also shows how /skipflag can be used to
ignore all previously set flags.</p>
<dl class="simple">
<dt>&lt;pre&gt;</dt><dd><p>getfs,76,/nofold,/skipflag
oshow,1
fold</p>
</dd>
</dl>
<p>&lt;/pre&gt;</p>
<p>&#64;uses &lt;a href=../toolbox/accumave.html&gt;accumave&lt;/a&gt;
&#64;uses &lt;a href=../toolbox/accumclear.html&gt;accumclear&lt;/a&gt;
&#64;uses &lt;a href=../../devel/guide/calsummary.html&gt;calsummary&lt;/a&gt;
&#64;uses &lt;a href=../../devel/guide/check_calib_args.html&gt;check_calib_args&lt;/a&gt;
&#64;uses &lt;a href=../toolbox/data_free.html&gt;data_free&lt;/a&gt;
&#64;uses &lt;a href=../toolbox/dcaccum.html&gt;dcaccum&lt;/a&gt;
&#64;uses &lt;a href=../toolbox/dcfold.html&gt;dcfold&lt;/a&gt;
&#64;uses &lt;a href=../toolbox/dcscale.html&gt;dcscale&lt;/a&gt;
&#64;uses &lt;a href=../toolbox/dcsetunits.html&gt;dcsetunits&lt;/a&gt;
&#64;uses &lt;a href=../toolbox/dofreqswitch.html&gt;dofreqswitch&lt;/a&gt;
&#64;uses &lt;a href=../../devel/guide/find_scan_info.html&gt;find_scan_info&lt;/a&gt;
&#64;uses &lt;a href=../../devel/guide/get_calib_data.html&gt;get_calib_data&lt;/a&gt;
&#64;uses &lt;a href=set_data_container.html&gt;set_data_container&lt;/a&gt;
&#64;uses &lt;a href=showiftab.html&gt;showiftab&lt;/a&gt;</p>
<p>&#64;version $Id;-</p>
</dd></dl>

<dl class="idl pro">
<dt class="sig sig-object idl" id="gregion">
<em class="property"><span class="pre">pro</span></em><span class="sig-name descname"><span class="pre">gregion</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">regions</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#gregion" title="Link to this definition">#</a></dt>
<dd><p>Set some regions for use by GUIDE gaussian procedures and functions.
&lt;p&gt;
This sets the !g.gauss.regions structure with the regions described
by the regions argument.  Overlaps in regions are eliminated and the
resulting content of !g.gauss.regions is a set of unique,
non-overlapping regions.  Regions are expressed as channel numbers.  
This procedure always clears the contents of !g.gauss.regions before
starting.</p>
<p>&lt;p&gt;&lt;B&gt;Note: there is a limit of 100 regions.&lt;/B&gt;  If you need to use
more regions you will need to either use the fitting functions
directly or make a local copy of the guide_struct file which defines
the !g structure and edit the sizes in there.</p>
<p>&#64;param regions {in}{required}{type=integer array} The regions to
set.  If this is a 1D array, then it is interpreted as a sequence of
beginning and ending channels which define n_elements/2 regions,
inclusive.  A warning is issued in that case if n_elements is not a
multiple of 2.  The trailing, unmatched value will be ignored.
Values after the first negative value encountered are also ignored.
If this is a 2D array, then the first dimension must be 2 and the
second dimension is the number of regions.  A warning is issued if
this argument gives more than 100 regions.  Only the first 100
regions are used in that case.  Overlapping regions are eliminated.</p>
<p>&#64;examples
All of these produce identical results
&lt;pre&gt;</p>
<blockquote>
<div><p>; as 1-D array
gregion, [125,180,215,300,320,475]
; as 2-D array
gregion, [[125,180],[215,300],[320,475]]
; same regions, beginning and end channels swapped
gregion, [180,125,300,215,320,475]
; overlapping regions
gregion, [125,160,150,180,215,300,320,420,400,475]</p>
</div></blockquote>
<p>&lt;/pre&gt;</p>
<p>&#64;version $Id;-</p>
</dd></dl>

<dl class="idl pro">
<dt class="sig sig-object idl" id="bsubtract">
<em class="property"><span class="pre">pro</span></em><span class="sig-name descname"><span class="pre">bsubtract</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">nfit=nfit</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ok=ok</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#bsubtract" title="Link to this definition">#</a></dt>
<dd><p>Subtract a baseline using the stored coefficients in !g.polyfit and
!g.nfit from the data in the primary data container.</p>
<p>&lt;p&gt;Note that bsubtract does not itself do any fitting.  This only
subtracts the result of the most recent fit.  Since the fitted
polynomials are orthogonal, using up to !g.nfit of them is itself a
valid fit at the lower order.</p>
<p>&#64;keyword nfit {in}{optional}{type=integer} Only use at most nfit 
parameters.  If !g.nfit is less then nfit, then only !g.nfit
parameters will be used and a warning will be issued.</p>
<p>&#64;keyword ok {out}{optional}{type=boolean} 1 on success, 0 on failure.</p>
<p>&#64;examples
&lt;pre&gt;
nfit=7
bshape                        ; generate a 7th order fit
copy,0,10                     ; keep for later use
; subtract the baseline
bsubtract
; or, subtract a lower order fit
copy,10,0
bsubtract, nfit=2
&lt;/pre&gt;</p>
<p>&#64;uses &lt;a href=getbasemodel.html&gt;getbasemodel&lt;/a&gt;</p>
<p>&#64;version $Id;-</p>
</dd></dl>

<dl class="idl pro">
<dt class="sig sig-object idl" id="kgetrec">
<em class="property"><span class="pre">pro</span></em><span class="sig-name descname"><span class="pre">kgetrec</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">index</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">useflag=useflag</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">skipflag=skipflag</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#kgetrec" title="Link to this definition">#</a></dt>
<dd><p>Gets the data associated with a given index number in the 
input data set from the output (keep) file.</p>
<p>&lt;p&gt;This is shorthand for kget,index=index with optional use of
useflag or skipflag.  See the documentation for
&lt;a href=kget.html&gt;kget&lt;/a&gt; for more information.</p>
<p>&#64;param index {in}{required}{type=integer} The index number of the 
record to be retrieved.
&#64;keyword useflag {in}{optional}{type=boolean or string}{default=true}
Apply all or just some of the flag rules?
&#64;keyword skipflag {in}{optional}{type=boolean or string} Do not apply
any or do not apply a few of the flag rules?</p>
<p>&#64;examples
&lt;pre&gt;</p>
<blockquote>
<div><p>kgetrec,1
show
kgetrec,1,/skipflag ; ignore all flags
show</p>
</div></blockquote>
<p>&lt;/pre&gt;</p>
<p>&#64;version $Id;-</p>
</dd></dl>

<dl class="idl pro">
<dt class="sig sig-object idl" id="online">
<em class="property"><span class="pre">pro</span></em><span class="sig-name descname"><span class="pre">online</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">acs=acs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sp=sp</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vegas=vegas</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#online" title="Link to this definition">#</a></dt>
<dd><p>Set the line io object to look at the online file.</p>
<p>&lt;p&gt;The online file is determined by finding the most recently 
updated spectral line file (ACS, VEGAS, or SP) in the online directory
(/home/sdfits).  Once a file is connected to, this command must be
used again to connect to a more recent spectral line sdfits file
(from switching projects or switching backends).  The default is to
use the most recent file for either spectral line backend.  Use one
of the two keywords to attach to the most recent file for a specific
backend.  If both keywords are true, a message will be printed and
this procedure will return without changing the attached file.</p>
<p>&lt;p&gt;Note that any file previously attached using filein or
offline will be closed as a result of using this procedure.  There
can be only one input spectral line data file at a time.</p>
<p>&lt;p&gt;The online file may be a directory of FITS files if the vegas
backend is the most recently updated file or is chosen as an option
here.</p>
<p>&#64;keyword acs {in}{optional}{type=boolean} the most recent
spectrometer sdfits file will be connected to. 
&#64;keyword sp {in}{optional}{type=boolean} the most recent spectral
processor sdfits file will be connected to.
&#64;keyword vegas {in}{optional}{type=boolean} the most recent
vegas sdfits directory will be connected to.</p>
<p>&#64;version $Id;-</p>
</dd></dl>

<dl class="idl function">
<dt class="sig sig-object idl" id="getdata">
<em class="property"><span class="pre">function</span></em><span class="sig-name descname"><span class="pre">getdata</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">buffer</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">elements</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">count=count</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#getdata" title="Link to this definition">#</a></dt>
<dd><p>Extract some or all of the data array from one of the global buffers.</p>
<p>&lt;p&gt;Use of getdata frees the user from having to deal with pointers
by providing a copy of some or all of the data array in one of the
global buffers (data containers).</p>
<p>&#64;param buffer {in}{optional}{type=integer}{default=0} The data
container buffer from which the data are retrieved (defaults to
buffer 0).</p>
<p>&#64;param elements {in}{optional}{type=integer}{default=all} A subset
of the full data array can be retrieved by specifying either a
single data array index, or a two-element array to specify a range
of data array indices.  Defaults to all elements.</p>
<p>&#64;keyword count {out}{optional}{type=integer} The total number of
elements returned.  On error, this will be 0 and the returned value
for this function will be -1.</p>
<p>&#64;returns The extracted data.</p>
<p>&#64;examples</p>
<dl class="simple">
<dt>&lt;pre&gt;</dt><dd><p>filein,file.fits
getrec,0
x = getdata()
help, x
X               FLOAT     = Array[1026]
y = getdata(0,0)
help, y
Y               FLOAT     = 34.5000
z = getdata(0,[0,2])
help, z
z               FLOAT     = Array[3]</p>
</dd>
</dl>
<p>&lt;/pre&gt;</p>
<p>&#64;uses &lt;a href=../toolbox/data_valid.html&gt;data_valid&lt;/a&gt;
&#64;uses &lt;a href=../toolbox/getdcdata.html&gt;getdcdata&lt;/a&gt;</p>
</dd></dl>

<dl class="idl pro">
<dt class="sig sig-object idl" id="flagrec">
<em class="property"><span class="pre">pro</span></em><span class="sig-name descname"><span class="pre">flagrec</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">record</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bchan=bchan</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">echan=echan</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">chans=chans</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">chanwidth=chanwidth</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">idstring=idstring</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keep=keep</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#flagrec" title="Link to this definition">#</a></dt>
<dd><p>Flag a specific record or records in the currently open spectral
line data file.</p>
<p>&lt;p&gt;A record number or array of record numbers must be supplied.
This routine will flag the indicated channels (or all channels, if
bchan and echan are not used) in those record numbers.  This is
appropriate if you know exactly which specific records need to be
flagged.  It is usually easier to use  &lt;a href=flag.html&gt;flag&lt;/a&gt; and let flag work out which 
records should be flagged.  A record number is simply the index
number for that spectrum in the input data set.</p>
<p>&lt;p&gt;Flags are applied when the data is actually read into a data
container (e.g. get, getrec, getps, getnod, etc).  At that point,
any flagged data is replaced with the blanked value (not a number,
NaN).  GBTIDL ignores blanked data.  If that data is saved back to a
data file, it will be saved as blanked values and no further
flagging is necessary.  Flags are associated with the data in the
file, not with the data in a data container.  Once the data is in
GBTIDL in a data container, it can be blanked (e.g.
&lt;a href=replace.html&gt;replace&lt;/a&gt;) but not flagged.</p>
<p>&lt;p&gt;Continuum flagging is not supported.</p>
<p>&lt;p&gt;&lt;b&gt;See Also:&lt;/b&gt; &lt;a href=<a class="reference external" href="http://wwwlocal.gb.nrao.edu/GBT/DA/gbtidl/users_guide/node47.html">http://wwwlocal.gb.nrao.edu/GBT/DA/gbtidl/users_guide/node47.html</a> TARGET=_top&gt;Introduction to Blanking and Flagging&lt;/a&gt; 
in the GBTIDL users guide</p>
<p>&#64;param record {in}{required}{type=integer} The record numbers to be flagged.
&#64;keyword bchan {in}{optional}{type=integer} Starting channel number
(default=0)
&#64;keyword echan {in}{optional}{type=integer} Ending channel number
(default=last channel)
&#64;keyword chans {in}{optional}{type=integer} Channels to flag. Mutually exclusive to 
bchan and echan keywords.
&#64;keyword chanwidth {in}{optional}{type=integer} Buffer of channels surrounding the 
channels specified in chans keyword. (default=1)
&#64;keyword idstring {in}{optional}{type=string}{default=unspecified}
A short string describing the flag.
&#64;keyword keep {in}{optional}{type=boolean} Flag the keep (output)
data source.</p>
<p>&#64;examples
&lt;pre&gt;</p>
<blockquote>
<div><p>; flags all the channels in record number one
flagrec, 1</p>
<p>; flags just the first ten channels in record two
flagrec, 2, echan=10, idstring=flag first 10 channels</p>
<p>; flags the first ten channels, and channels 50 to 60
flagrec, 3, bchan=[0,50], echan=[10,60]</p>
<p>; flags the same channels as the above example in record four
flagrec, 4, chans=[5,55], width=5</p>
</div></blockquote>
<p>&lt;/pre&gt;</p>
<p>&#64;version $Id;-</p>
</dd></dl>

<dl class="idl pro">
<dt class="sig sig-object idl" id="setfframe">
<em class="property"><span class="pre">pro</span></em><span class="sig-name descname"><span class="pre">setfframe</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">buffer</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">toframe=toframe</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#setfframe" title="Link to this definition">#</a></dt>
<dd></dd></dl>

<dl class="idl function">
<dt class="sig sig-object idl" id="get_calib_data">
<em class="property"><span class="pre">function</span></em><span class="sig-name descname"><span class="pre">get_calib_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">info</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ifnum</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plnum</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fdnum</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sampler</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">count</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">intnum=intnum</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">useflag=useflag</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">skipflag=skipflag</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">twofeeds=twofeeds</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sig_state=sig_state</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wcalpos=wcalpos</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">subref=subref</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#get_calib_data" title="Link to this definition">#</a></dt>
<dd><p>Used by the calibration routines to actually fetch the necessary
data.</p>
<p>This is not meant to be called directly by the user.  Error messages
generated here are displayed using the prefix from the calling
routine.  It is expected that some argument checking will have
happened prior to this function being called.  The only checks done
here are that the requested data (ifnum, plnum, fdnum, and intnum)
are consistent with the given scan info.</p>
<p>&lt;p&gt;The returned values are the array of data containers found in the
current line data source that satisfy the request using the provided
scan info structure to indentify the scan.</p>
<p>&lt;p&gt;If there is a problem, the returned value is -1 and count is 0.</p>
<p>&#64;param info {in}{required}{type=structure} The scan_info
structure that describes the scan.  Use
&lt;a href=find_scan_info.html&gt;find_scan_info&lt;/a&gt; to get this
scan_info.
&#64;param ifnum {in}{required}{type=integer} The IF number to
fetch
&#64;param plnum {in}{required}{type=integer} The polarization
number to fetch.
&#64;param fdnum {in}{required}{type=integer} The feed number to
fetch.  Ignored when twofeeds is set.
&#64;param sampler {in}{required}{type=string} The sampler name, an
alternative to ifnum, plnum and fdnum.  This is used (and the others
are ignored) when it is not empty.
&#64;param count {out}{optional}{type=integer} The number of data
containers returned.  This is 0 when there is a problem.
&#64;keyword intnum {in}{optional}{type=integer} The specific
integration to fetch.  If not supplied then fetch data from all
integrations that match the other parameters.
&#64;keyword useflag {in}{optional}{type=boolean or string}{default=true}
Apply all or just some of the flag rules?
&#64;keyword skipflag {in}{optional}{type=boolean or string} Do not apply
any or do not apply a few of the flag rules?
&#64;keyword twofeeds {in}{optional}{type=boolean} When set (1), then
this data must contain 2 and only two feeds and all data from both
feeds is returned by this call.  In that case, fdnum is ignored.
&#64;keyword sig_state {in}{optional}{type=integer} When -1, this
keyword is ignored, when 0 then the reference state is selected,
when 1 then the sig state is selected.
&#64;keyword wcalpos {in}{optional}{type=string} When set, then only
data matching this wcalpos string is fetched.  Ignored when fetching
data from an individual integration.
&#64;keyword subref {in}{optional}{type=integer} When set, then only
data matching this subref value is fetched.  Ignored when fetching
data from an individual integration.
&#64;returns an array of spectral line data containers that satisfy this
request.  Returns -1 on error (count will also be 0 in that case).</p>
<p>&#64;private_file</p>
<p>&#64;version $Id;-</p>
</dd></dl>

<dl class="idl pro">
<dt class="sig sig-object idl" id="gauss">
<em class="property"><span class="pre">pro</span></em><span class="sig-name descname"><span class="pre">gauss</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">buffer=buffer</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">modelbuffer=modelbuffer</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ok=ok</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">quiet=quiet</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fit</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fitrms</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#gauss" title="Link to this definition">#</a></dt>
<dd><p>Fits Gaussians to the data in the primary data container (!g.s[0])
based on initial values that can be set by procedures &lt;a href=gregion.html&gt;gregion&lt;/a&gt;,
&lt;a href=ngauss.html&gt;ngauss&lt;/a&gt;, &lt;a href=gmaxiter.html&gt;gmaxiter&lt;/a&gt;, and &lt;a href=gparamvalues.html&gt;gparamvalues&lt;/a&gt;.</p>
<p>&lt;p&gt;Other data containers can be fit using the buffer keyword.</p>
<p>&lt;p&gt;Multiple gaussians in multiple regions can be fit at the same
time.</p>
<p>&lt;p&gt;The initial guesses and the most recent fit are available in the
!g.gauss structure.</p>
<p>&#64;keyword buffer {in}{optional}{type=long}{default=0} global buffer
number whose data is to be fit. Defaults to the primary data
container.
&#64;keyword modelbuffer {in}{optional}{type=long}{default=-1} buffer
number to hold the resulting model.  If not set (the default) then
no global buffer is filled with the model.   
&#64;param fit {out}{optional}{type=array} results of fit. identical to
!g.gauss.fit 
&#64;param fitrms {out}{optional}{type=array} errors of fit. identical
to !g.gauss.fitrms 
&#64;keyword ok {out}{optional}{type=long} result; 1 - good, 0 - bad 
&#64;keyword quiet {in}{optional}{type=boolean}{default=F} When set, no
report of the fits and initial guesses is printed.</p>
<p>&#64;examples
Typically, fitgauss will be used to set the initial guesses and do
the fit, using gauss.  Internally, fitgauss does these steps.
&lt;pre&gt;</p>
<blockquote>
<div><p>; using the user-identified points, set the region(s)
gregion,[4120,4400]   ; channels 4120 through 4400 inclusive
ngauss,2              ; fit 2 gaussians
; for each gaussian, do this
gparamvalues, 0, [2.4, 4359.0, 12.3]  ; [height, center, fwhm]
gparamvalues, 1, [0.5, 4370.0, 9.2] 
gauss
gshow</p>
</div></blockquote>
<p>&lt;/pre&gt;</p>
<p>&lt;p&gt;Continuum data containers can also be fit (must be in continuum mode).
&lt;pre&gt;</p>
<blockquote>
<div><p>cont                ; switch to cont mode
filein,peaks.fits
get,buffer=1        ; get some data
; setup the gauss fit
gregion,[60,80]
ngauss,1
gmaxiter,500
gparamvalues, 0, [400000.,70.,100.]
; find and show the fit
gauss
gshow</p>
</div></blockquote>
<p>&lt;/pre&gt;</p>
<p>&#64;uses gauss_fits
&#64;uses report_gauss</p>
<p>&#64;version $Id;-</p>
</dd></dl>

<dl class="idl pro">
<dt class="sig sig-object idl" id="invert">
<em class="property"><span class="pre">pro</span></em><span class="sig-name descname"><span class="pre">invert</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">buffer=buffer</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#invert" title="Link to this definition">#</a></dt>
<dd><p>Flip the data end-to-end in the indicated buffer in the global data
containers.</p>
<p>&lt;p&gt;For line data the value of frequency_increment and reference_channel
are also changed appropriately so that, as displayed, there will be
no change in appearance.  This is useful if you need to combine
(e.g. average) two data containers where the frequency increments
have opposite signs.</p>
<p>&lt;p&gt;For continuum data (where the need to invert is less obvious), all
of the time-dependent arrays are also flipped (utc, mjd, etc).</p>
<p>&lt;p&gt;The invert is done in place. Use &lt;a href=../toolbox/dcinvert.html&gt;dcinvert&lt;/a&gt; to flip a data
container that is not one of the global data containers.</p>
<p>&lt;p&gt;Note that when displayed, this will only be noticable when the
x-axis is channels.  The velocity and frequency axes always increases
from left to right, independent of the actual channel increment from
low channel number to high channel number.</p>
<p>&#64;keyword buffer {in}{optional}{type=integer}{default=0} guide data
container to use.  Defaults to buffer 0.</p>
<p>&#64;uses &lt;a href=../toolbox/dcinvert.html&gt;dcinvert&lt;/a&gt;</p>
<p>&#64;examples
&lt;pre&gt;</p>
<blockquote>
<div><p>invert             ; invert buffer 0
invert, buffer=10  ; invert buffer 10</p>
</div></blockquote>
<p>&lt;/pre&gt;</p>
<p>&#64;version $Id;-</p>
</dd></dl>

<dl class="idl pro">
<dt class="sig sig-object idl" id="calsummary">
<em class="property"><span class="pre">pro</span></em><span class="sig-name descname"><span class="pre">calsummary</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">scan</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tsys</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">units</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tsysInts=tsysInts</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tauInts=tauInts</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">apEffInts=apEffInts</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">missingInts=missingInts</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">missingBeams=missingBeams</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">missingRefInts=missingRefInts</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">eqweight=eqweight</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bswitch=bswitch</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">refScan=refScan</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ifnum=ifnum</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plnum=plnum</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fdnum=fdnum</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#calsummary" title="Link to this definition">#</a></dt>
<dd><p>Used by the calibration routines (getfs,getps,getnod,etc) to
summarize things at the end, just before they return.</p>
<p>&lt;p&gt;End users should never use this directly although users
modifying the calibration routines may need to modify this routine
or at least understand the arguments involved in this routine.</p>
<p>&lt;p&gt;There is no argument checking here for the required parameters.</p>
<p>&#64;param scan {in}{required}{type=integer} The scan number (in the
case of a refScan keyword being supplied, this is the signal scans
keyword - used by getsigref).
&#64;param tsys {in}{required}{type=float} The system temperature (K) of
the result.
&#64;param units {in}{required}{type=string} The units of the result.
Recognized units are Ta,Ta*, and Jy.  A summary line without
any units will be printed for any other value of this parameter.
&#64;keyword tsysints {in}{optional}{type=float} An array of system
temperatures from each integration to be output at the end of the
other summary information.  The second dimension is the number of
independent Tsyss to be summarized.  So, if Tsys has dimensions of
[11,2] then 2 summary Tsys values will be printed and the Tsys
values will be averaged according to the eqweight keyword.  If this
is omitted, no extra Tsys information is printed.  This is typically
used to summarize the system temperature in the signal scan or in
each of the beam combinations (e.g. Nod).  Formatting is such that
for up to 4 Tsys values the result should be less than 80
characters.
&#64;keyword tauInts {in}{optional}{type=float} The tau (opacity) used
in each integration when unit conversion was done, if any.  Only
used if units are Jy or Ta*. The printed value is a simple
average of this keyword.
&#64;keyword apEffInts {in}{optional}{type=float} The aperture
efficiency used in each integration when unit conversion was done,
if any.  Only used if units are Jy.  The printed value is a simple
average of this keyword.
&#64;keyword missingInts {in}{optional}{type=integer} The number of missing
integrations to be reported (if missingRefInts is set then this is
assumed to be the missing integrations from the signal beam - used
by getbs only).
&#64;keyword missingBeams {in}{optional}{type=integer} The number of
integrations that were processed with only one beam (used by getnod
and getbs).
&#64;keyword missingRefInts {in}{optional}{type=integer} The number of
missing integrations from the reference beam to be reported (used by
getbs only).
&#64;keyword eqweight {in}{optional}{type=boolean} When set, then the
tsysInts are averaged with equal weight, otherwise they are averaged
similarly to the way accum does it (assuming equal exposure) so that
the resulting tsys is as if the spectra having those tsys values had
been averaged - so that these values can be more directly compared
with the results tsys value.
&#64;keyword bswitch {in}{optional}{type=integer} Same meaning as in
getbs.  In the bswitch=0 case, then the tsysInts will have 8 as the
second dimension and the tsys values from each beam are first
averaged before the tsys values from integration are averaged.
&#64;keyword refScan {in}{optional}{type=integer} The scan number of the
reference scan.  Used by getsigref.</p>
<p>&#64;private_file
&#64;version $Id;-</p>
</dd></dl>

<dl class="idl pro">
<dt class="sig sig-object idl" id="subtract">
<em class="property"><span class="pre">pro</span></em><span class="sig-name descname"><span class="pre">subtract</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">in1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">in2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">out</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#subtract" title="Link to this definition">#</a></dt>
<dd><p>This procedure subtracts the data from two data containers stored in
the global buffers 0-15.</p>
<p>&lt;p&gt;If no parameters are passed, then the data from buffer 1 is
subtracted from buffer 0 and the result is stored in buffer 0.  If
two parameters are supplied, the second is subtracted from the first
and the result is stored in buffer 0.  If three parameters are
supplied, the second is subtracted from the first and the result is
stored in the third.</p>
<p>&lt;p&gt; out = in1 - in2</p>
<p>&#64;param in1 {in}{optional}{type=integer} Input data container #1
&#64;param in2 {in}{optional}{type=integer} Input data container #2
&#64;param out {in}{optional}{type=integer} Output data container</p>
<p>&#64;examples
&lt;pre&gt;</p>
<blockquote>
<div><p>getrec,1
copy,0,1
getrec,2
subtract</p>
<p>getrec,1
copy,0,10
getrec,2
copy,0,11
subtract,10,11,12   ; The data from buffer 11 is subtracted from buffer 10</p>
<blockquote>
<div><p>; and the result is stored in buffer 12</p>
</div></blockquote>
</div></blockquote>
<p>&lt;/pre&gt;</p>
<p>&#64;uses &lt;a href=../toolbox/dcsubtract.html&gt;dcsubtract&lt;/a&gt;
&#64;uses &lt;a href=../toolbox/dcpaircheck.html&gt;dcpaircheck&lt;/a&gt;</p>
<p>&#64;version $Id;-</p>
</dd></dl>

<dl class="idl pro">
<dt class="sig sig-object idl" id="copy">
<em class="property"><span class="pre">pro</span></em><span class="sig-name descname"><span class="pre">copy</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">in</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">out</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#copy" title="Link to this definition">#</a></dt>
<dd><p>Copy the data from the in buffer to the out buffer.  Anything in
out is lost.</p>
<p>&lt;p&gt;This uses the value of !g.line.  If it is set (1) then the array
of line data (!g.s) is used, otherwise the array of continuum data
(!g.c) is used.  The contents of the in buffer remain unchanged by
this operation.</p>
<p>&lt;p&gt;There are 16 buffers total, numbered from 0 through 15.</p>
<p>&#64;param in {in}{required}{type=integer} The buffer to copy values
from.</p>
<p>&#64;param out {in}{required}{type=integer} The buffer to copy the
values to.</p>
<p>&#64;examples
Copy the contents of buffer 0 to buffer 10.  Then copy the
contents of 9 to buffer 0.
&lt;pre&gt;</p>
<blockquote>
<div><p>copy, 0, 10
copy, 9, 0</p>
</div></blockquote>
<p>&lt;/pre&gt;</p>
<p>&#64;uses &lt;a href=set_data_container.html&gt;set_data_container&lt;/a&gt;</p>
<p>&#64;version $Id;-</p>
</dd></dl>

<dl class="idl pro">
<dt class="sig sig-object idl" id="appendstack">
<em class="property"><span class="pre">pro</span></em><span class="sig-name descname"><span class="pre">appendstack</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">index</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#appendstack" title="Link to this definition">#</a></dt>
<dd><p>Append entries to the stack.</p>
<p>&lt;p&gt;See also &lt;a href=addstack.html&gt;addstack&lt;/a&gt;.</p>
<p>&#64;param index {in}{required}{type=long integer} Entries to add</p>
<p>&#64;examples
&lt;pre&gt;</p>
<blockquote>
<div><p>addstack,10,14,2
appendstack,20
appendstack,[25,28]
tellstack
; The stack now contains [ 10,  12,  14,  20,  25, 28]</p>
</div></blockquote>
<p>&lt;/pre&gt;</p>
<p>&#64;version $Id;-</p>
</dd></dl>

<dl class="idl pro">
<dt class="sig sig-object idl" id="bshow">
<em class="property"><span class="pre">pro</span></em><span class="sig-name descname"><span class="pre">bshow</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">nfit=nfit</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ok=ok</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">color=color</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#bshow" title="Link to this definition">#</a></dt>
<dd><p>Overplot a baseline using the stored coefficients in !g.polyfit and
!g.nfit and the data in the primary data container (number of
channels only).</p>
<p>&lt;p&gt;Note that bshow does not itself do any fitting.  This only show
the result of the most recent fit.  Since the fitted polynomials are
orthogonal, using up to !g.nfit of them is itself a valid fit at the
lower order.</p>
<p>&#64;keyword nfit {in}{optional}{type=integer} Only use at most nfit
parameters.  If !g.nfit is less then nfit, then only !g.nfit
parameters will be used and a warning will be issued.</p>
<p>&#64;keyword ok {out}{optional}{type=boolean} This is set to 1 on
success and 0 on failure.</p>
<p>&#64;keyword color {in}{optional}{type=color}{default=!g.oshowcolor} The
color to use for the overplot.</p>
<p>&#64;examples
&lt;pre&gt;</p>
<blockquote>
<div><p>bshape, nfit=7, /noshow     ; fit a 7th order polynomial
bshow                       ; show it
bshow, nfit=5, color=!blue  ; show the 5th order fit</p>
</div></blockquote>
<p>&lt;/pre&gt;</p>
<p>&#64;uses &lt;a href=getbasemodel.html&gt;getbasemodel&lt;/a&gt;
&#64;uses &lt;a href=../plotter/gbtoplot.html&gt;gbtoplot&lt;/a&gt;</p>
<p>&#64;version $Id;-</p>
</dd></dl>

<dl class="idl pro">
<dt class="sig sig-object idl" id="powspec">
<em class="property"><span class="pre">pro</span></em><span class="sig-name descname"><span class="pre">powspec</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">buffer</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#powspec" title="Link to this definition">#</a></dt>
<dd><p>Compute the power spectrum for the indicated data container, which
is overwritten with the result.  Uses &lt;a href=../toolbox/dcfft.html#_dcfft&gt;dcfft&lt;/a&gt; to do the fft.  This is simply
the sum of squares of the real and imaginary parts of the fft on the
data.</p>
<p>&lt;p&gt;Use &lt;a href=../toolbox/dcpowspec.html&gt;dcpowspec&lt;/a&gt; to get the power spectrum for a non-global 
data container.</p>
<p>&#64;param buffer {in}{out}{optional}{type=integer}{default=0} The
global buffer number to use for both input and output.</p>
<p>&#64;uses &lt;a href=../toolbox/dcfft.html#_dcfft&gt;dcfft&lt;/a&gt;</p>
<p>&#64;version $Id;-</p>
</dd></dl>

<dl class="idl pro">
<dt class="sig sig-object idl" id="set_data_container">
<em class="property"><span class="pre">pro</span></em><span class="sig-name descname"><span class="pre">set_data_container</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">buffer=buffer</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ignore_line=ignore_line</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">noshow=noshow</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#set_data_container" title="Link to this definition">#</a></dt>
<dd><p>Set the element of the appropriate GUIDE data structure array.</p>
<p>If !g.line is true, the value is copied into the desired buffer in
!g.s, otherwise it is copied in to !g.c.  This is most often used
when working with toolbox procedures and function where a data
container is used directly as an IDL variable and then copied into
the guide structure so that it can be used with guide procedures and
functions (e.g. show).</p>
<p>&#64;param data {in}{required} A data container (continuum or spectrum)
to put into the indicated location.</p>
<p>&#64;keyword buffer {in}{optional}{type=integer} The location to put the
data.  When not supplied the 0 location is used.</p>
<p>&#64;keyword ignore_line {in}{optional}{type=boolean}  When set, the
value of !g.line is ignored and the choice of which data array to
use is determined by the contents of data.</p>
<p>&#64;keyword noshow {in}{optional}{type=boolean} Normally, if buffer is 0
and !g.frozen is 0 then show is called at the end.  If this is set,
that behavior is turned off.</p>
<p>&#64;version $Id;-</p>
</dd></dl>

<dl class="idl function">
<dt class="sig sig-object idl" id="getchunk">
<em class="property"><span class="pre">function</span></em><span class="sig-name descname"><span class="pre">getchunk</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">count=count</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keep=keep</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">useflag=useflag</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">skipflag=skipflag</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">indicies=indicies</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_EXTRA=ex</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#getchunk" title="Link to this definition">#</a></dt>
<dd><p>A function to get several data containers from an input file in one call.</p>
<p>&lt;p&gt;It is more efficient to retrieve multiple data containers in one 
call.  Because the global data buffers all contain a single data 
container, this function does not interact directly with the global 
buffers, as other data retrieval procedures do.  Instead, it returns
an array of data containers that must then be handled appropriately
by the user.</p>
<p>&lt;p&gt;Note that it is the responsibility of the caller to explicitly
free the pointers used in this array of data containers.  Simply use
&lt;a href=../toolbox/data_free.html&gt;data_free&lt;/a&gt; as shown in the examples below.</p>
<p>&lt;p&gt;The usual data selection operations can be specified in this
function.</p>
<p>&lt;p&gt;&lt;b&gt;There is no protection against running out of memory.&lt;/b&gt;  If
one does not carefully select the data to be fetched or even avoids
specifying any arguments to getchunk, all of the data that matches
that selection (which might be all of the data in the file) will be
read from disk into memory.  That might be more memory than you have
and this procedure does not protect you against that.  Use this
function carefully.</p>
<p>&lt;p&gt;
Flags (set via &lt;a href=flag.html&gt;flag&lt;/a&gt;) can be selectively applied or ignored using the useflag 
and skipflag keywords.  Only one of those two keywords can be used
at a time (it is an error to use both at the same time).  Both can
be either a boolean (/useflag or /skipflag) or an array of strings.
The default is /useflag, meaning that all flag rules that have been
previously set are applied when the data is fetched from disk,
blanking any data as described by each rule.  If /skipflag is set,
then all of the flag rules associated with this data are ignored and
no data will be blanked when fetched from disk (it may still contain
blanked values if the actual values in the disk file have already
been blanked by some other process).  If useflag is a string or
array of strings, then only those flag rules having the same
idstring value are used to blank the data.  If skipflag is a string
or array of strings, then all flag rules except those with the same
idstring value are used to blank the data.</p>
<p>&#64;keyword count {out}{optional}{type=integer} An output value giving the 
number of data containers actually returned.
&#64;keyword keep {in}{optional}{type=boolean} When set, the data are
fetched from the output file.
&#64;keyword useflag {in}{optional}{type=boolean or string}{default=true}
Apply all or just some of the flag rules?
&#64;keyword skipflag {in}{optional}{type=boolean or string} Do not apply
any or do not apply a few of the flag rules?
&#64;keyword indicies {out}{optional}{type=long} Array of index numbers,
one for each spectrum retrieved.  Returns -1 when no spectra were returned.
&#64;keyword _EXTRA {in}{optional}{type=extra keywords} These are
selection parameters to specify which data to retrieve.  See
&lt;a href=listcols.html&gt;listcols&lt;/a&gt; for a
complete list of the columns available.  Also 
&lt;p&gt;see the discussion on Select in the &lt;a href=<a class="reference external" href="http://wwwlocal.gb.nrao.edu/GBT/DA/gbtidl/users_guide/node50.html">http://wwwlocal.gb.nrao.edu/GBT/DA/gbtidl/users_guide/node50.html</a> TARGET=_top&gt;Users Guide&lt;/a&gt; 
for a summary of selection syntax.</p>
<p>&#64;returns An array of data containers.  If no data satisfy the
selection criteria, count will be 0 and the returned value will be
-1.</p>
<p>&#64;examples
In the first example, we copy the input file to the keep file (currently only
possible in line mode), one scan at a time.  This would be done in a
procedure, not at the command line, because of the loop.</p>
<dl>
<dt>&lt;pre&gt;</dt><dd><p>scans=get_scan_numbers(/unique)
for i=0,(n_elements(scan)-1) do begin</p>
<blockquote>
<div><p>a = getchunk(scan=scans[i])
putchunk, a
data_free, a</p>
</div></blockquote>
<p>endfor</p>
</dd>
</dl>
<p>&lt;/pre&gt;</p>
<p>In the next example, we average all of the data for a given scan.
This example also shows that we have choosen to ignore any
flags with idstring=wind.  This could be done at the command line
because the loop is contained on a single line.</p>
<dl class="simple">
<dt>&lt;pre&gt;</dt><dd><p>sclear
a = getchunk(scan=6000,count=count,skipflag=wind)
accum,dc=a[0]
for i=1,(count-1) do accum,dc=a[i]
ave
data_free,a</p>
</dd>
</dl>
<p>&lt;/pre&gt;</p>
<p>&#64;version $Id;-</p>
</dd></dl>

<dl class="idl pro">
<dt class="sig sig-object idl" id="emptystack">
<em class="property"><span class="pre">pro</span></em><span class="sig-name descname"><span class="pre">emptystack</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">reset=reset</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shrink=shrink</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#emptystack" title="Link to this definition">#</a></dt>
<dd><p>Clear the stack.</p>
<p>&lt;p&gt;Normally this simply sets !g.acount to 0, and this is all that is
needed for typical use of the stack.  Optionally, the procedure can
also reset the stack array to zeros and it can shrink the size of
the stack to its initial size of 5120 elements.  That could be
useful if the stack grew to an unexpectedly large size and you want
to release the memory.  The stack will grow as needed when addstack
and appendstack are called.  Only the !g.acount elements are ever
used.</p>
<p>&#64;keyword reset {in}{optional}{type=boolean} When set, the values will be
reset to 0.  This is not required for typical use of the stack.</p>
<p>&#64;keyword shrink {in}{optional}{type=boolean} When set, the size of the
array will be reset to its initial size of 5120 elements.  This is to
reverse any automatic expansion that may have occurred during previous
stack operations.</p>
<p>&#64;examples
&lt;pre&gt;</p>
<blockquote>
<div><p>addstack,1,100
emptystack
addstack,1,100000
emptystack,/shrink   ; reduce it to 5120 elements</p>
</div></blockquote>
<p>&lt;/pre&gt;</p>
<p>&#64;version $Id;-</p>
</dd></dl>

<dl class="idl pro">
<dt class="sig sig-object idl" id="table">
<em class="property"><span class="pre">pro</span></em><span class="sig-name descname"><span class="pre">table</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">buffer</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">brange=brange</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">erange=erange</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#table" title="Link to this definition">#</a></dt>
<dd><p>List the displayed data container or a global data container in
tabular form.  See the documentation for  &lt;a href=../toolbox/dcascii.html#_dcascii&gt;dcascii&lt;/a&gt; for an explanation
of the output.  Use &lt;a href=../plotter/write_ascii.html&gt;write_ascii&lt;/a&gt; to save this output to a file.</p>
<p>&#64;param buffer {in}{optional}{type=integer} The global buffer number.
If not set, it uses the most recently displayed data as shown in 
the plotter.</p>
<p>&#64;keyword brange {in}{optional}{type=float}{default=all} Beginning of
the range to use, in units of the current plotter X-axis</p>
<p>&#64;keyword erange {in}{optional}{type=float}{default=all} End of
the range to use, in units of the current plotter X-axis</p>
<p>&#64;uses &lt;a href=../toolbox/dcascii.html#_dcascii&gt;dcascii&lt;/a&gt;</p>
<p>&#64;version $Id;-</p>
</dd></dl>

<dl class="idl pro">
<dt class="sig sig-object idl" id="molecule">
<em class="property"><span class="pre">pro</span></em><span class="sig-name descname"><span class="pre">molecule</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">formula=formula</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name=name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">doprint=doprint</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">elimit=elimit</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">indices=indices</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">novsource=novsource</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#molecule" title="Link to this definition">#</a></dt>
<dd><p>Plot the molecular line frequencies for previously detected
molecular lines stored in !g.molecules on the currently displayed
plot at the appropriate location given the current x-axis.</p>
<p>&lt;p&gt;&lt;b&gt;Note:&lt;/b&gt; The display is changed to show frequency as the x-axis
if it is not already doing so.</p>
<p>&lt;p&gt;&lt;b&gt;Note:&lt;/b&gt; It is assumed that you want them shown
at their rest frequency in the frequency reference frame current in
use on the plotter adjusted for any source velocity.  If the source
velocity has already been used to adjust the x-axis display then
this routine will plot the molecule lines at their rest frequencies
without any offset.  Use the &lt;i&gt;/novsource&lt;/i&gt; keyword to turn off
any consideration of the source velocity - lines are simply plotted
at their rest frequencies no matter what the source velocity is or 
what the displayed x-axis is.</p>
<p>&lt;p&gt;The set of lines to be search can be narrowed by supplying a formula
or name.  Wildcards are allowed and arrays of formula and names can
be supplied.</p>
<p>&lt;p&gt;Only lines with an upper state energy less than or equal to the
&lt;i&gt;elimit&lt;/i&gt; value (in K) are shown.  The default value for this keyword is 50 K.</p>
<p>&lt;p&gt;To show fewer lines use a lower &lt;i&gt;elimit&lt;/i&gt; value or select specific
lines using the &lt;i&gt;formula&lt;/i&gt; or &lt;i&gt;name&lt;/i&gt; keywords.</p>
<p>&lt;p&gt;The &lt;i&gt;indices&lt;/i&gt; keyword can be used to return the set of indices in the
!g.molecules array of molecule_struct structures.  This can be used
to get access to full information if desired.  See &lt;a href=moleculeread.html&gt;moleculeread&lt;/a&gt; 
for a description of the contents of the molecule_struct structure.</p>
<p>&lt;P&gt;The line information was extracted from the Database for
Astronomical Spectroscopy - Splatalogue available at &lt;a href=<a class="reference external" href="http://www.splatalogue.net">http://www.splatalogue.net</a> TARGET=_top&gt;www.splatalogue.net&lt;/a&gt; 
specifically tailored for the available spectral line coverage of
the GBT. Splatalogue is a fully rationalized and extended
compilation of existing spectroscopic resources for use by the
astronomical community including, but not limited too, the JPL,
CDMS, Lovas/NIST, Frank Lovas own Spectral Line Atlas of
Interstellar Molecules (SLAIM) catalogs.</p>
<p>&lt;p&gt;Splatalogue is maintained at the North American ALMA Science Center
with cooperation from the East Asian and European ALMA Regional
Centers.  The Splatalogue Subsystem Scientist is Anthony Remijan.</p>
<p>&lt;p&gt;For questions, comments, suggestions or concerns about Splatalogue
please submit a Helpdesk ticket through the ALMA Science Portal at
&lt;a href=<a class="reference external" href="http://help.almascience.org">http://help.almascience.org</a> TARGET=_top&gt;help.almascience.org&lt;/a&gt;.</p>
<p>&lt;p&gt;The text file containing the line information is found at
$GBT_IDL_DIR/pro/guide/GBTIDL_RFF.csv</p>
<p>&#64;keyword formula {in}{optional}{type=string(s)}{default=} optionally
filter the list of molecules to those whose formula matches this
string. Wildcards are allowed following the rules of the IDL
STRMATCH function.  If formula is array of strings, each element is
used separately and the final list is the set of all lines with
a formula matching any of the strings on that list.  If not supplied,
the entire list is used.  The filter is case insensitive.
&#64;keyword name {in}{optional}{type=string(s)}{default=} optionally
filter the list of molecules to those whose name matches this
string. Wildcards are allowed following the rules of the IDL
STRMATCH function.  If name is array of strings, each element is
used separately and the final list is the set of all lines with
a name matching any of the strings on that list.  If not supplied,
the entire list is used.  The filter is case-insensitive.
&#64;keyword doprint {in}{optional}{type=boolean}{default=0} optionally print
the line frequencies.  The printed frequencies are the line
frequencies in the frame being displayed on the plotter.
&#64;keyword elimit {in}{optional}{type=double}{default=50.0} Only lines
with an upper state energy less than or equal to this limit will be
plotted.  The units are Kelvin.  Lowering this limit reduces the
number of lines plotted. 
&#64;keyword indices {out}{optional}{type=integer} The list of indices
in !g.molecules of the lines that were plotted.  This can be used to
get the original information (e.g. rest frequency) of the lines
marked on the plot.  This has a value of -1 when no lines were
plotted.
&#64;keyword novsource {in}{optional}{type=boolean} Optionally set this
to turn off any consideration of the source velocity when marking
the locations of any molecule lines.</p>
<p>&#64;examples
&lt;pre&gt;</p>
<blockquote>
<div><p>;    All instances of ammonia
molecule,formula=NH3*
;    Two formulas to match
molecule,formula=[NH3*,HCCCHO*]
;    Alternatively
molecule,name=[ammonia,2-propynal]
; lower the upper state energy cutoff to 20 K
molecule,elimit=20
; get the indices of the species plotted
molecule,indices=indices
; print out their names
print,!g.molecules[indices].name</p>
</div></blockquote>
<p>&lt;/pre&gt;</p>
<p>&#64;uses &lt;a href=moleculeread.html&gt;moleculeread&lt;/a&gt;
&#64;uses &lt;a href=freq.html&gt;freq&lt;/a&gt;
&#64;uses &lt;a href=../toolbox/veltovel.html&gt;veltovel&lt;/a&gt;
&#64;uses &lt;a href=../toolbox/shiftvel.html&gt;shiftvel&lt;/a&gt;
&#64;uses &lt;a href=../toolbox/shiftfreq.html&gt;shiftfreq&lt;/a&gt;
&#64;uses &lt;a href=../toolbox/decode_veldef.html&gt;decode_veldef&lt;/a&gt;
&#64;uses &lt;a href=../plotter/show.html&gt;show&lt;/a&gt;
&#64;uses &lt;a href=../plotter/vline.html&gt;vline&lt;/a&gt;
&#64;uses &lt;a href=../plotter/getstate.html#_getxrange&gt;getxrange&lt;/a&gt;
&#64;uses &lt;a href=../plotter/getstate.html#_getyrange&gt;getyrange&lt;/a&gt;
&#64;uses &lt;a href=../plotter/getstate.html#_getxvoffset&gt;getxvoffset&lt;/a&gt;
&#64;uses &lt;a href=../plotter/getstate.html#_getxunits&gt;getxunits&lt;/a&gt;
&#64;uses &lt;a href=../plotter/getstate.html#_getxoffset&gt;getxoffset&lt;/a&gt;
&#64;uses &lt;a href=../plotter/getstate.html#_getplotterdc&gt;getplotterdc&lt;/a&gt;
&#64;uses textoidl</p>
<p>&#64;version $Id;-</p>
</dd></dl>

<dl class="idl pro">
<dt class="sig sig-object idl" id="recombhe">
<em class="property"><span class="pre">pro</span></em><span class="sig-name descname"><span class="pre">recombhe</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dn</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">doPrint=doPrint</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#recombhe" title="Link to this definition">#</a></dt>
<dd><p>Plot the Helium recombination lines for quantum jump of dN.
Defaults to plotting the alpha lines (dN=1).</p>
<p>&lt;p&gt;Originally by Glen Langston, glangsto&#64;nrao.edu</p>
<p>&lt;p&gt;Molecular Formula from Tools of RadioAstronomy, Rolfs and Wilson,
2000, pg 334
&lt;pre&gt;
v_ki = Z^2 R_M ( 1/i^2  - 1/k^2), where R_M = R_infinity/(1 + m/M)
v_ki = R_A     ( 1/i^2  - 1/k^2) (k &gt; i)
&lt;pre&gt;
where for helium values (MHz), R_a = 3.28939118E9</p>
<p>&#64;param dn {in}{optional}{type=integer}{default=1} The quantum jump
to calculate (1 is alpha, 2 is beta, etc).
&#64;keyword doPrint {in}{optional}{type=boolean}{default=0} optionally print
the line frequencies.  The printed frequencies are the line
frequencies in the frame being displayed on the plotter.</p>
<dl class="simple">
<dt>&#64;examples</dt><dd><p>recombh,2,/doprint</p>
</dd>
</dl>
<p>&#64;uses &lt;a href=freq.html&gt;freq&lt;/a&gt;
&#64;uses &lt;a href=../toolbox/veltovel.html&gt;veltovel&lt;/a&gt;
&#64;uses &lt;a href=../toolbox/shiftvel.html&gt;shiftvel&lt;/a&gt;
&#64;uses &lt;a href=../toolbox/shiftfreq.html&gt;shiftfreq&lt;/a&gt;
&#64;uses &lt;a href=../toolbox/decode_veldef.html&gt;decode_veldef&lt;/a&gt;
&#64;uses &lt;a href=../plotter/show.html&gt;show&lt;/a&gt;
&#64;uses &lt;a href=../plotter/vline.html&gt;vline&lt;/a&gt;
&#64;uses &lt;a href=../plotter/getstate.html#_getxrange&gt;getxrange&lt;/a&gt;
&#64;uses &lt;a href=../plotter/getstate.html#_getyrange&gt;getyrange&lt;/a&gt;
&#64;uses &lt;a href=../plotter/getstate.html#_getxvoffset&gt;getxvoffset&lt;/a&gt;
&#64;uses &lt;a href=../plotter/getstate.html#_getxunits&gt;getxunits&lt;/a&gt;
&#64;uses &lt;a href=../plotter/getstate.html#_getxoffset&gt;getxoffset&lt;/a&gt;
&#64;uses &lt;a href=../plotter/getstate.html#_getplotterdc&gt;getplotterdc&lt;/a&gt;
&#64;uses textoidl</p>
<p>&#64;version $Id;-</p>
</dd></dl>

<dl class="idl pro">
<dt class="sig sig-object idl" id="clearfind">
<em class="property"><span class="pre">pro</span></em><span class="sig-name descname"><span class="pre">clearfind</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">param</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#clearfind" title="Link to this definition">#</a></dt>
<dd><p>Clear a selection parameter or several selection parameters used by
&lt;a href=find.html&gt;find&lt;/a&gt;
&lt;p&gt;
Use &lt;a href=setfind.html&gt;setfind&lt;/a&gt; to set a selection parameter.
&lt;p&gt;
Use &lt;a href=listfind.html&gt;listfind&lt;/a&gt; to list a selection parameter.</p>
<p>&#64;param param {in}{optional}{type=string} The selection parameter(s)
to clear.  Minimum-matching is used to find the selection parameters
matching this value.  If param is not supplied or is an empty
string, all parameters are cleared.  If all parameters are to be
cleared (param is not set or is an empty string) then only those
parameters appropriate for the given mode (line or continuum) are
cleared.</p>
<p>&#64;examples
See &lt;a href=find.html&gt;find&lt;/a&gt;</p>
<p>&#64;version $Id;-</p>
</dd></dl>

<dl class="idl pro">
<dt class="sig sig-object idl" id="getcal">
<em class="property"><span class="pre">pro</span></em><span class="sig-name descname"><span class="pre">getcal</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">scan</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ifnum=ifnum</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">intnum=intnum</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plnum=plnum</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fdnum=fdnum</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sampler=sampler</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">eqweight=eqweight</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tcal=tcal</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sig_state=sig_state</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">quiet=quiet</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keepints=keepints</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">useflag=useflag</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">skipflag=skipflag</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">instance=instance</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file=file</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timestamp=timestamp</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">status=status</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#getcal" title="Link to this definition">#</a></dt>
<dd></dd></dl>

<dl class="idl pro">
<dt class="sig sig-object idl" id="gmaxiter">
<em class="property"><span class="pre">pro</span></em><span class="sig-name descname"><span class="pre">gmaxiter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">maxiter</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#gmaxiter" title="Link to this definition">#</a></dt>
<dd><p>Sets the maximum iterations for fitting guassians: !g.gauss.maxiter</p>
<p>&#64;param maxiter {in}{required}{type=long} maximum iterations for fitting gaussians</p>
<p>&#64;examples
&lt;pre&gt;
; get some continuum data
cont
filein,peaks.fits
get,index=1
; setup the gauss fit
gregion,[60,80]
ngauss,[1]
gmaxiter,500
gparamvalues, 0, 0, [400000.,70.,100.]
; find and show the fit
gauss
gshow
&lt;/pre&gt;</p>
<p>&#64;version $Id;-</p>
</dd></dl>

<dl class="idl pro">
<dt class="sig sig-object idl" id="unflag">
<em class="property"><span class="pre">pro</span></em><span class="sig-name descname"><span class="pre">unflag</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">id</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keep=keep</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">all=all</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unflag" title="Link to this definition">#</a></dt>
<dd><p>Remove all flags with the same idstring value, or id number,
from the flag file associated with the current input spectral 
line data file or output (keep) data file.</p>
<p>&lt;p&gt;The flag is completely removed from the flag file using this
command.  Use &lt;a href=flag.html&gt;flag&lt;/a&gt; or &lt;a href=flagrec.html&gt;flagrec&lt;/a&gt; to re-flag the data.</p>
<p>&lt;p&gt;If ID is an integer, then that is the first value given in the &lt;a href=listflags.html&gt;listflag&lt;/a&gt;
output.  Note that this ID reflects the state of the flags at that
particular moment.  A particular rules ID number will change if a
rule appearing earlier in the flags (having a lower ID number) is
unflagged.  ID numbers always run from 0 to one less than the total
number of flag rules.  IDs given in a single call to unflag (i.e. as
a vector of IDs) are valid  for that use of unflag - renumbering
effectively does not happen until unflag returns. Note that this
behavior of ID has a practical consequence that may not be obvious,
see the examples.</p>
<p>&lt;p&gt;Continuum flagging is not supported.</p>
<p>&lt;p&gt;If /all is set then all flags are unflagged and ID is ignored if
set.</p>
<p>&#64;param id {in}{required}{type=string,long} The idstring to match, or
a unique id integer. If this parameter is of type string, all flags
that match this string will be removed from the flag file.  If it is
an integer type, only that particular id will be removed.  An array
of IDs can be used here.  All of those IDs will be unflagged. 
&#64;keyword keep {in}{optional}{type=boolean} Unflag the keep (output)
data source.
&#64;keyword all {in}{optional}{type=boolean} Unflag all IDs (ignoring
id) when set.</p>
<p>&#64;examples
You use list flags and see that there are 5 flags, numbered from 0
to 4.  For this example, assume that you did not specify an
idstring when the current 1, 2, and 4 rules were made using &lt;a href=flag.html&gt;flag&lt;/a&gt; and 
so the idstring for those 3 rules is unspecified.</p>
<p>&lt;p&gt;Unflag all of these rules in one use of unflag.</p>
<dl class="simple">
<dt>&lt;pre&gt;</dt><dd><p>unflag,unspecified</p>
</dd>
</dl>
<p>&lt;/pre&gt;</p>
<p>Flags are now numbered just 0 and 1.</p>
<p>&lt;p&gt;Alternatively, starting from the same place as the previous
example, suppose you just want to unflag one of those unspecified
ID rules.  This example does that for ID number 2.</p>
<dl class="simple">
<dt>&lt;pre&gt;</dt><dd><p>unflag, 2</p>
</dd>
</dl>
<p>&lt;/pre&gt;</p>
<p>Flags are now numbered 0 through 3 and the unspecified rules are
now 1 and 3.</p>
<p>&lt;p&gt;Finally, again starting from the same starting place, suppose
you want to unflag IDs 2 and 4 but leave ID from the set of
unspecified rules.  There are two ways you can do this.</p>
<dl class="simple">
<dt>&lt;pre&gt;</dt><dd><p>unflag, [2,4]</p>
</dd>
</dl>
<p>&lt;/pre&gt;</p>
<p>That is the easiest way.  Flags are now numbered from 0 to 2 and ID
1 is still unspecified.</p>
<p>This is the other way to achieve the same result.</p>
<dl class="simple">
<dt>&lt;pre&gt;</dt><dd><p>unflag, 4
unflag, 2</p>
</dd>
</dl>
<p>&lt;/pre&gt;</p>
<p>Note here that doing it one ID at a time, you must make sure that
you remove the IDs in  reverse order or re-check the IDs using
listflags prior to each use of unflag.  That is because the IDs are
renumbered as a consequence of each use of unflag.</p>
<p>This generates an error:</p>
<dl class="simple">
<dt>&lt;pre&gt;</dt><dd><p>unflag, 2
unflag, 4</p>
</dd>
</dl>
<p>&lt;/pre&gt;</p>
<p>because after the first call, IDs run from 0 to 3 and ID 4 no longer
exists.  If there were more than 5 IDs to start with, this last call
would not generate any error and would also not be what you thought
you were doing.</p>
<p>Always make sure that you use &lt;a href=listflags.html&gt;listflag&lt;/a&gt; 
before each use of unflag and when you want to unflag several IDs,
use the array syntax and remove them all with a single use of unflag
to avoid confusion.</p>
<p>&#64;version $Id;-</p>
</dd></dl>

<dl class="idl pro">
<dt class="sig sig-object idl" id="header">
<em class="property"><span class="pre">pro</span></em><span class="sig-name descname"><span class="pre">header</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dc</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#header" title="Link to this definition">#</a></dt>
<dd><p>Show header information for the primary data container or any other
data container.</p>
<p>&#64;param dc {in}{type=data container}{optional} The data container to
use.  Defaults to the primary data container.</p>
<p>&#64;examples
&lt;pre&gt;</p>
<blockquote>
<div><p>header
; or, this is the same thing
header, !g.s[0]</p>
</div></blockquote>
<p>&lt;/pre&gt;</p>
<p>&#64;uses &lt;a href=../toolbox/scalevals.html&gt;scalevals&lt;/a&gt;
&#64;uses &lt;a href=../toolbox/eqtogal.html&gt;eqtogal&lt;/a&gt;
&#64;uses &lt;a href=../toolbox/getradec.html&gt;getradec&lt;/a&gt;
&#64;uses &lt;a href=../toolbox/getradec.html&gt;getgal&lt;/a&gt;
&#64;uses &lt;a href=../toolbox/ra2ha.html&gt;ra2ha&lt;/a&gt;
&#64;uses &lt;a href=<a class="reference external" href="http://idlastro.gsfc.nasa.gov/ftp/pro/astro/adstring.pro">http://idlastro.gsfc.nasa.gov/ftp/pro/astro/adstring.pro</a>&gt;adstring&lt;/a&gt;</p>
</dd></dl>

<dl class="idl pro">
<dt class="sig sig-object idl" id="decimate">
<em class="property"><span class="pre">pro</span></em><span class="sig-name descname"><span class="pre">decimate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">nchan</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">startat=startat</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">buffer=buffer</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ok=ok</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#decimate" title="Link to this definition">#</a></dt>
<dd></dd></dl>

<dl class="idl function">
<dt class="sig sig-object idl" id="lastrec">
<em class="property"><span class="pre">function</span></em><span class="sig-name descname"><span class="pre">lastrec</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">keep=keep</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lastrec" title="Link to this definition">#</a></dt>
<dd><p>Returns the record number (index) of the most recently
retrieved data container.</p>
<p>&lt;p&gt;In line mode, this is the most recently retrieved record number
from the input line file.  In continuum mode, this is the most
recently retrieved record number from the input continuum file.  If
the /keep keyword is used, this is the most recently retrieved
record number from the output line file (the keep file).</p>
<p>&lt;p&gt;This is -1 if nothing has been retrieved from that data source or
if the data source is empty.</p>
<p>&lt;p&gt;If multiple data containers were retrieved in a single call
(e.g. using one of the calibration routines such as getfs) then this
will be the largest record number in the set of records that were
retrieved.</p>
<p>&#64;keyword keep {in}{optional}{type=boolean}  If set, returns the
record number (index) of the data container most recently retrieved
from the output line file (the keep file).</p>
<p>&#64;returns An integer giving the record number (index) of the last
record fetched from the data source.  Returns -1 if nothing has been
fetched so far from that data source.</p>
<p>&#64;examples
&lt;pre&gt;</p>
<blockquote>
<div><p>getps, 6000
a = lastrec()</p>
</div></blockquote>
<p>&lt;/pre&gt;</p>
<p>&#64;version $Id;-</p>
</dd></dl>

<dl class="idl pro">
<dt class="sig sig-object idl" id="replace">
<em class="property"><span class="pre">pro</span></em><span class="sig-name descname"><span class="pre">replace</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bchan</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">echan</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">zero=zero</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">blank=blank</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#replace" title="Link to this definition">#</a></dt>
<dd></dd></dl>

<dl class="idl pro">
<dt class="sig sig-object idl" id="replace_chans">
<em class="property"><span class="pre">pro</span></em><span class="sig-name descname"><span class="pre">replace_chans</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bchan</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">echan</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">zero=zero</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">blank=blank</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#replace_chans" title="Link to this definition">#</a></dt>
<dd><p>Used internally in replace</p>
<p>&#64;param bchan {in}{required}{type=integer} Beginning channel number.  Value is rounded (using IDL round function) to accomodate floating point values.
&#64;param echan {in}{required}{type=integer} End channel number.  Value is rounded (using IDL round function) to accomodate floating point values.
&#64;keyword zero {in}{optional}{type=boolean} When set, set the data to
0 in the channel range.
&#64;keyword blank {in}{optional}{type=boolean} When set, set the data to
NaN in the channel range.  Has no effect if zero is also set.</p>
<p>&#64;private</p>
</dd></dl>

<dl class="idl pro">
<dt class="sig sig-object idl" id="getscan">
<em class="property"><span class="pre">pro</span></em><span class="sig-name descname"><span class="pre">getscan</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">scan</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">useflag=useflag</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">skipflag=skipflag</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#getscan" title="Link to this definition">#</a></dt>
<dd><p>Gets the data associated with a given scan number.  In general this
procedure is used on data that have already been calibrated and
written o a new data file.</p>
<p>To retrieve scans from a raw data file, as produced by the sdfits
program on the GBT, use getfs, gettp, getnod, or one of the other
procedures that does both retrieval and calibration.</p>
<p>&lt;p&gt;This is shorthand for get,scan=scan with optional use of
useflag or skipflag.  See the documentation for &lt;a href=get.html&gt;get&lt;/a&gt; for more 
information.  If there is more than one record that has the
requested scan number, only the first is saved to the primary data
container.  This is discussed in more detail in the documentation
for get.</p>
<p>&#64;param scan {in}{required}{type=integer} The scan number of the 
record to be retrieved
&#64;keyword useflag {in}{optional}{type=boolean or string}{default=true}
Apply all or just some of the flag rules?
&#64;keyword skipflag {in}{optional}{type=boolean or string} Do not apply
any or do not apply a few of the flag rules?;</p>
<p>&#64;examples
&lt;pre&gt;</p>
<blockquote>
<div><p>filein,my_processed_data.fits
getscan,101
copy, 0, 10
getscan,102
oshow, 10
getscan,103,/skipflag ; ignore all flags</p>
</div></blockquote>
<p>&lt;/pre&gt;</p>
<p>&#64;version $Id;-</p>
</dd></dl>

<dl class="idl pro">
<dt class="sig sig-object idl" id="kgetscan">
<em class="property"><span class="pre">pro</span></em><span class="sig-name descname"><span class="pre">kgetscan</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">scan</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">useflag=useflag</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">skipflag=skipflag</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#kgetscan" title="Link to this definition">#</a></dt>
<dd><p>Gets the data associated with a given scan number in the 
input data set from the output (keep) file.</p>
<p>&lt;p&gt;This is shorthand for kget,scan=scan with optional use of
useflag or skipflag.  See the documentation for
&lt;a href=kget.html&gt;kget&lt;/a&gt; for more information. If there is more
than one record that has the requested scan number, only the first
is saved to the primary data container.  This is discussed in more
detail in the documentation for kget.</p>
<p>&#64;param scan {in}{required}{type=integer} The scan number of the 
record to be retrieved.
&#64;keyword useflag {in}{optional}{type=boolean or string}{default=true}
Apply all or just some of the flag rules?
&#64;keyword skipflag {in}{optional}{type=boolean or string} Do not apply
any or do not apply a few of the flag rules?;</p>
<p>&#64;examples
&lt;pre&gt;</p>
<blockquote>
<div><p>kgetscan,1
show
kgetscan,1,/skipflag ; ignore all flags
show</p>
</div></blockquote>
<p>&lt;/pre&gt;</p>
<p>&#64;version $Id;-</p>
</dd></dl>

<dl class="idl pro">
<dt class="sig sig-object idl" id="resample">
<em class="property"><span class="pre">pro</span></em><span class="sig-name descname"><span class="pre">resample</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">newinterval</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keychan</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">buffer=buffer</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nearest=nearest</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">linear=linear</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lsquadratic=lsquadratic</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">quadratic=quadratic</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">spline=spline</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#resample" title="Link to this definition">#</a></dt>
<dd><p>Resample a spectrum data container onto a new frequency axis using
one of four possible interpolation methods.</p>
<p>&lt;p&gt;Takes the data values in the data container indicated by 
the parameter buffer and interpolates them onto a new frequency axis 
derived from the newinterval and keychan arguments.  The 
reference_frequency is unchanged by this operation.  
The new frequency_interval is given by the &lt;b&gt;newinterval&lt;/b&gt; 
argument.  The new frequency axis is determined by choosing 
one channel in the original frequency axis and requiring
that the frequency at that channel be centered on one of the
channels in the interpolated data (the &lt;b&gt;keychan&lt;/b&gt;
argument).  This sets the new reference frequency. When not
supplied, &lt;b&gt;keychan&lt;/b&gt; defaults to the channel nearest to the
original reference channel.</p>
<p>&lt;p&gt;The data container indicated by the buffer parameter is altered
by this procedure.  The data values will contain the interpolated
values and the header will describe the new frequency axis.  The
number of channels in the resulting interpolated data is just enough
to use as much of the original data as possible without trying to
interpolate beyond the ends of that data.</p>
<p>&lt;p&gt;Interpolation is accomplished by using the IDL INTERPOL procedure
except when nearest is set, in which case it is done by this
procedure.  Blanked values (NaN) are ignored.  See the documentation
for INTERPOL for details about the various interpolation methods.</p>
<p>&lt;p&gt;This procedure only works in line mode.</p>
<p>&#64;param newinterval {in}{required}{type=real} The new
frequency_interval to use in the interpolation.  This value must be
nonzero.  If it has opposite sign from the input frequency
interval, &lt;a href=invert.html&gt;invert&lt;/a&gt; will be used to first
reverse the sense of the frequency axis.
&#64;param keychan {in}{optional}{type=integer} The new frequency axis will
have one channel where the frequency value equals the original
frequency value at the keychan channel.  When keychan is not supplied, it
defaults to the channel nearest to the reference_channel.
&#64;keyword buffer {in}{optional}{type=integer}{default=0} The data container
buffer to use.  Defaults to 0, the primary data container.
&#64;keyword nearest {in}{optional}{type=boolean} When set do
nearest-neighbor interpolation.
&#64;keyword linear {in}{optional}{type=boolean} When set (the default),
do a linear interpolation.
&#64;keyword lsquadratic {in}{optional}{type=boolean} When set 
do a least squares quadratic fit interpolation.
&#64;keyword quadratic {in}{optional}{type=boolean} When set
do a quadratic fit interpolation.
&#64;keyword spline {in}{optional}{type=boolean} When set
do spline interpolation.</p>
<p>&#64;examples
&lt;pre&gt;</p>
<blockquote>
<div><p>; data container 0 has a spectrum in it
; copy it elsewhere
copy,0,10
; do a linear interpolation to 1.5 x the channel spacing
resample,!g.s[0].frequency_interval*1.5
; the next line is exactly equivalent to dcinvert
resample,-!g.s[0].frequency_interval
; Use buffer 10, use channel 0 as the keychan and
; do a spline interpolation, make sure things are ok
resample,!g.s[10].frequency_interval*1.5,0,buffer=10,/spline</p>
</div></blockquote>
<p>&lt;/pre&gt;</p>
<p>&#64;uses &lt;a href=../toolbox/dcresample.html&gt;dcresample&lt;/a&gt;
&#64;uses &lt;a href=../plotter/show.html&gt;show&lt;/a&gt;</p>
<p>&#64;version $Id;-</p>
</dd></dl>

<dl class="idl pro">
<dt class="sig sig-object idl" id="report_gauss">
<em class="property"><span class="pre">pro</span></em><span class="sig-name descname"><span class="pre">report_gauss</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fits=fits</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">params=params</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#report_gauss" title="Link to this definition">#</a></dt>
<dd><p>Procedure for printing what the current regions and gaussians are in
the guide structure, and the most recently reported fits for these
gaussians.</p>
<p>If /fits is the only keyword set, then only the fitted parameters
will be reported.  If /params is the only keyword set, then only the
intiial guesses will be reported.  If both are set or neither are
set (the default) then both initial guesses and fits are reported
for each Gaussian.</p>
<p>&#64;keyword fits {in}{optional}{type=boolean} displays the fits for all
gaussians 
&#64;keyword params {in}{optional}{type=boolean} displays the initial
parameters for all gaussians</p>
<p>&#64;version $Id</p>
</dd></dl>

<dl class="idl pro">
<dt class="sig sig-object idl" id="sclear">
<em class="property"><span class="pre">pro</span></em><span class="sig-name descname"><span class="pre">sclear</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">accumnum</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sclear" title="Link to this definition">#</a></dt>
<dd><p>Clears one of the global accum buffers (frees the pointer, zeros
values).</p>
<p>&#64;param accumnum {in}{optional}{type=integer}{default=0} the accum
buffer to clear, in the range of 0 through 3.  Defaults to 0.</p>
<p>&#64;uses &lt;a href=../toolbox/accumclear.html&gt;accumclear&lt;/a&gt;</p>
<p>&#64;version $Id;-</p>
</dd></dl>

<dl class="idl pro">
<dt class="sig sig-object idl" id="recombn">
<em class="property"><span class="pre">pro</span></em><span class="sig-name descname"><span class="pre">recombn</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dn</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">doPrint=doPrint</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#recombn" title="Link to this definition">#</a></dt>
<dd><p>Plot the Nitrogen recombination lines for quantum jump of dN.
Defaults to plotting the alpha lines (dN=1).</p>
<p>&lt;p&gt;Originally by Glen Langston, glangsto&#64;nrao.edu</p>
<p>&lt;p&gt;Molecular Formula from Tools of RadioAstronomy, Rolfs and Wilson,
2000, pg 334
&lt;pre&gt;
v_ki = Z^2 R_M ( 1/i^2  - 1/k^2), where R_M = R_infinity/(1 + m/M)
v_ki = R_A     ( 1/i^2  - 1/k^2) (k &gt; i)
&lt;pre&gt;
where for nitrogen values (MHz), R_a = 3.28971314E9</p>
<p>&#64;param dn {in}{optional}{type=integer}{default=1} The quantum jump
to calculate (1 is alpha, 2 is beta, etc).
&#64;keyword doPrint {in}{optional}{type=boolean}{default=0} optionally print
the line frequencies.  The printed frequencies are the line
frequencies in the frame being displayed on the plotter.</p>
<dl class="simple">
<dt>&#64;examples</dt><dd><p>recombn,2,/doprint</p>
</dd>
</dl>
<p>&#64;uses &lt;a href=freq.html&gt;freq&lt;/a&gt;
&#64;uses &lt;a href=../toolbox/veltovel.html&gt;veltovel&lt;/a&gt;
&#64;uses &lt;a href=../toolbox/shiftvel.html&gt;shiftvel&lt;/a&gt;
&#64;uses &lt;a href=../toolbox/shiftfreq.html&gt;shiftfreq&lt;/a&gt;
&#64;uses &lt;a href=../toolbox/decode_veldef.html&gt;decode_veldef&lt;/a&gt;
&#64;uses &lt;a href=../plotter/show.html&gt;show&lt;/a&gt;
&#64;uses &lt;a href=../plotter/vline.html&gt;vline&lt;/a&gt;
&#64;uses &lt;a href=../plotter/getstate.html#_getxrange&gt;getxrange&lt;/a&gt;
&#64;uses &lt;a href=../plotter/getstate.html#_getyrange&gt;getyrange&lt;/a&gt;
&#64;uses &lt;a href=../plotter/getstate.html#_getxvoffset&gt;getxvoffset&lt;/a&gt;
&#64;uses &lt;a href=../plotter/getstate.html#_getxunits&gt;getxunits&lt;/a&gt;
&#64;uses &lt;a href=../plotter/getstate.html#_getxoffset&gt;getxoffset&lt;/a&gt;
&#64;uses &lt;a href=../plotter/getstate.html#_getplotterdc&gt;getplotterdc&lt;/a&gt;
&#64;uses textoidl</p>
<p>&#64;version $Id;-</p>
</dd></dl>

<dl class="idl pro">
<dt class="sig sig-object idl" id="setdata">
<em class="property"><span class="pre">pro</span></em><span class="sig-name descname"><span class="pre">setdata</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">elements</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">buffer=buffer</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#setdata" title="Link to this definition">#</a></dt>
<dd><p>Convenience function for setting data array of a data container.</p>
<p>&#64;param value {in}{required}{type=float} data values to be inserted into the
data container.  Either a single float value or an array of floats
are valid.</p>
<p>&#64;param elements {in}{optional}{type=long}{default=all} The data array indices to be 
changed.  Use one integer to set a single element in the data array.  Use
a two element array to specify a range to be set.</p>
<p>&#64;keyword buffer {in}{optional}{type=integer}{default=0} The data container
buffer number from which the data values are retrieved.</p>
<p>&#64;examples
Put the first spectra into !g.s[0], retrieve all its data, and then just the first element
&lt;pre&gt;</p>
<blockquote>
<div><p>filein,file.fits
getrec,1
help, <em>!g.s[0].data_ptr
&lt;PtrHeapVar257&gt; FLOAT     = Array[2048]
x = fltarr(1026)
setdata, x
help, *!g.s[0].data_ptr
&lt;PtrHeapVar257&gt; FLOAT     = Array[1026]
setdata, 2.5, 0
help, (</em>!g.s[0].data_ptr)[0]
&lt;PtrHeapVar257&gt; FLOAT     = 2.5</p>
</div></blockquote>
<p>&lt;/pre&gt;</p>
<p>&#64;uses &lt;a href=../toolbox/data_valid.html&gt;data_valid&lt;/a&gt;
&#64;uses &lt;a href=../toolbox/setdcdata.html&gt;setdcdata&lt;/a&gt;</p>
</dd></dl>

<dl class="idl pro">
<dt class="sig sig-object idl" id="dirin">
<em class="property"><span class="pre">pro</span></em><span class="sig-name descname"><span class="pre">dirin</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dir_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">new_index=new_index</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dirin" title="Link to this definition">#</a></dt>
<dd><p>Specify a directory from which data will be read.  Compare to
filein, which identifies a single file as the input source.</p>
<p>&lt;p&gt;When dirin is used, data can be retrieved from any of the
SDFITS files in that dir without the need to issue a new filein
command.</p>
<p>&lt;p&gt;In line mode, this sets the line input data directory, in
continuum mode, this sets the continuum input data directory.  Both
directories can be opened at the same time and the mode (line or
continuum) determines where data is retrieved from (e.g. get).  Only
one line and one continuum data source (single file or single
directory) can be opened at the same time.  Use of dirin or filein
always first closes any previously opened line or continuum data
source before opening a new one.</p>
<p>&lt;p&gt;The opened input file or directory name is stored in
!g.line_filein_name (line mode) or !g.cont_filein_name (continuum
mode).</p>
<p>&#64;param dir_name {in}{optional}{type=string} The directory name to
use.  If omitted, a file selector GUI will appear and you can select
the directory to use.  You must select a directory in that case.  If
the dir_name isnt a directory, the underlying code will recognize
that and it will be as if you had used
&lt;a href=filein.html&gt;filein&lt;/a&gt; instead.</p>
<p>&#64;keyword new_index {in}{optional}{type=boolean} When set, a new
index is generated, whether it needed to be or not.  By
default, the io code tries to re-use an existing index unless it is
seen to be out of date.  Regenerating the index file can take some
time, but no information should be lost in the process.  Usually,
the io code can be trusted to regenerate the index file only when
necessary.</p>
<p>&#64;examples
&lt;pre&gt;</p>
<blockquote>
<div><p>dirin            ; Use a GUI to select the directory
cont             ; switch to continuum mode
dirin,mydcr    ; open up all FITS files in a specific directory</p>
</div></blockquote>
<p>&lt;/pre&gt;</p>
<p>&#64;uses &lt;a href=../../devel/guide/sdfitsin.html&gt;sdfitsin&lt;/a&gt;</p>
<p>&#64;version $Id;-</p>
</dd></dl>

<dl class="idl pro">
<dt class="sig sig-object idl" id="putchunk">
<em class="property"><span class="pre">pro</span></em><span class="sig-name descname"><span class="pre">putchunk</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">chunk</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#putchunk" title="Link to this definition">#</a></dt>
<dd><p>This saves several data containers into the output file
(keep file).  These must be spectrum data containers.  This is most
often used in conjuction with &lt;a href=getchunk.html&gt;getchunk&lt;/a&gt;.</p>
<p>&#64;param chunk {in}{required}{type=spectrum data container arry} The
array of spectrum data containers to save.</p>
<p>&#64;examples
Copy the input file to the keep file (this is currently only
possible in line mode), one scan at a time (in a procedure or function).</p>
<dl>
<dt>&lt;pre&gt;</dt><dd><p>scans=get_scan_numbers(/unique)
for i=0,(n_elements(scan)-1) do begin</p>
<blockquote>
<div><p>a = getchunk(scan=scans[i])
putchunk, a
data_free, a</p>
</div></blockquote>
<p>endfor</p>
</dd>
</dl>
<p>&lt;/pre&gt;</p>
<p>&#64;version $Id;-</p>
</dd></dl>

<dl class="idl pro">
<dt class="sig sig-object idl" id="addstack">
<em class="property"><span class="pre">pro</span></em><span class="sig-name descname"><span class="pre">addstack</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">first</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">last</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">step</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#addstack" title="Link to this definition">#</a></dt>
<dd><p>Add entries to the stack, which is a list of numbers
that can be used in batch operations.  The list is stored in
the variable !g.astack.  The new entries are appended on to
the existing list.  Use &lt;a href=astack.html&gt;astack&lt;/a&gt; to get values from the stack.</p>
<p>&#64;param first {in}{required}{type=integer} The first value to be
added to the stack.</p>
<p>&#64;param last {in}{optional}{type=integer} The last value to be
added to the stack.  If this is omitted, only a single entry
equal to first will be appended.</p>
<p>&#64;param step {in}{optional}{type=integer} The increment between values.
If omitted, a step of 1 will be used.</p>
<dl class="simple">
<dt>&#64;examples</dt><dd><p>add numbers 25, 30 through 39, and the odd indexes from 41
through 51 to the stack.</p>
</dd>
<dt>&lt;pre&gt;</dt><dd><p>addstack, 25
addstack, 30, 39
addstack, 41, 51, 2</p>
</dd>
</dl>
<p>&lt;/pre&gt;</p>
<p>&#64;uses &lt;a href=appendstack.html&gt;appendstack&lt;/a&gt;</p>
<p>&#64;version $Id;-</p>
</dd></dl>

<dl class="idl pro">
<dt class="sig sig-object idl" id="recomball">
<em class="property"><span class="pre">pro</span></em><span class="sig-name descname"><span class="pre">recomball</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">doPrint=doPrint</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#recomball" title="Link to this definition">#</a></dt>
<dd><p>Plot the Hydrogen, alpha, beta gamma, helium alpha beta and carba alpha 
recombination lines.</p>
<p>&lt;p&gt;Originally by Glen Langston, glangsto&#64;nrao.edu</p>
<p>&#64;keyword doPrint {in}{optional}{type=boolean}{default=0} optionally print
the line frequencies.  The printed frequencies are the line
frequencies in the frame being displayed on the plotter.</p>
<dl class="simple">
<dt>&#64;examples</dt><dd><p>recomball,/doprint</p>
</dd>
</dl>
<p>&#64;uses &lt;a href=recombh.html&gt;recombh&lt;/a&gt;
&#64;uses &lt;a href=recombhe.html&gt;recombhe&lt;/a&gt;
&#64;uses &lt;a href=recombc.html&gt;recombc&lt;/a&gt;</p>
<p>&#64;version $Id;-</p>
</dd></dl>

<dl class="idl pro">
<dt class="sig sig-object idl" id="keep">
<em class="property"><span class="pre">pro</span></em><span class="sig-name descname"><span class="pre">keep</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dc</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#keep" title="Link to this definition">#</a></dt>
<dd><p>Save a spectrum to the output file.</p>
<p>&lt;p&gt;The data in the primary data container (buffer 0) is saved to the
currently opened output file.  The user can optionally save another
buffer (0 to 15) or a specific data container by supplying a value
for the dc parameter.  Use &lt;a href=fileout.html&gt;fileout&lt;/a&gt; to open an output file.  Use &lt;a href=kget.html&gt;kget&lt;/a&gt;
to retrieve data from the output file (&lt;a href=nget.html&gt;nget&lt;/a&gt; can also be used, the file can 
also be opened using &lt;a href=filein.html&gt;filein&lt;/a&gt; but only if some other file is already opened 
as the output file (the same file can not be opened by filein and
fileout at the same time).</p>
<p>Only spectral line data can be saved to disk at this time.</p>
<p>&#64;param dc {in}{optional}{type=data container or integer}{default=0} a data 
container, or an integer global buffer number.  Defaults to the primary data
container (buffer 0).</p>
<p>&#64;examples
&lt;pre&gt;</p>
<blockquote>
<div><p>getnod,30
fileout,mysave.fits
keep
getnod,32
keep
getfs,48,/nofold
keep  ; saves buffer 0 by default
keep,1 ; saves buffer 1</p>
</div></blockquote>
<p>&lt;/pre&gt;</p>
<p>&#64;version $Id;-</p>
</dd></dl>

<dl class="idl pro">
<dt class="sig sig-object idl" id="find">
<em class="property"><span class="pre">pro</span></em><span class="sig-name descname"><span class="pre">find</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">keep=keep</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">append=append</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#find" title="Link to this definition">#</a></dt>
<dd><p>Put entries in to the stack based on the given selection criteria in
the global find structure.  This is an alternative to &lt;a href=select.html&gt;select&lt;/a&gt;.</p>
<p>&lt;p&gt;Use &lt;a href=setfind.html&gt;setfind&lt;/a&gt; to set specific selection criteria.  Once set, they 
remain set until cleared using &lt;a href=clearfind.html&gt;clearfind&lt;/a&gt;.  FIND uses those selection 
criteria and &lt;a href=select.html&gt;select&lt;/a&gt; to add entries to the stack corresponding to items 
in the data source that match the selection criteria.  The stack can
then be iterated through to process just the most recently found
data.</p>
<p>&lt;p&gt;&lt;b&gt;Note:&lt;/b&gt; unlike &lt;a href=select.html&gt;select&lt;/a&gt;, find clears the stack unless the /append 
keyword is used.  This has been done to make the behavior of FIND
more like the CLASS version of FIND.</p>
<p>&#64;keyword append {in}{optional}{type=boolean} When set, the stack is
&lt;b&gt;not&lt;/b&gt; first cleared before select is used to add values to the
stack.  Use this with some caution since this may cause the same
entries to appear more than once in the stack unless the selection
criteria used by FIND are changed carefully.</p>
<p>&#64;keyword keep {in}{optional}{type=boolean} Select entries from the
currently attached output (keep) file.</p>
<p>&#64;examples
&lt;pre&gt;</p>
<blockquote>
<div><p>; define the selection
setfind,scan,100,200 ; scans 100 through 200
find
; refine it
setfind,polarization,LL  ; only the LL polarization
find
; refine it
setfind,int,2:3   ; only integrations 2 and 3
find
; refine it
setfind,int,4,/append ; add integration 4 to the set
find
; this is equivalent to the previous 2 setfind examples.
; note that any valid selection string can be used
setfind,int,2:3,4
setfind,polarization,RR   ; the other polarization
find,/append   ; the LL selection is still there due to /append
clearfind,int    ; clear the integration parameter
find           ; all integrations, RR polarization, scans 100 to 200.</p>
</div></blockquote>
<p>&lt;/pre&gt;</p>
<p>If you often set the same parameter, you can write a procedure, as in
this example, to save yourself time.  You might add optional feedback
to the user that the parameter was set and you might add additional
parameter checks.</p>
<dl>
<dt>&lt;pre&gt;</dt><dd><dl class="simple">
<dt>pro setsrc,src</dt><dd><p>setfind,source,src</p>
</dd>
</dl>
<p>end</p>
</dd>
</dl>
<p>&lt;/pre&gt;</p>
<p>&#64;uses &lt;a href=emptystack.html&gt;emptystack&lt;/a&gt;
&#64;uses &lt;a href=select.html&gt;select&lt;/a&gt;</p>
<p>&#64;version $Id;-</p>
</dd></dl>

<dl class="idl function">
<dt class="sig sig-object idl" id="fshift">
<em class="property"><span class="pre">function</span></em><span class="sig-name descname"><span class="pre">fshift</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">accumnum</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">buffer=buffer</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">frame=frame</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#fshift" title="Link to this definition">#</a></dt>
<dd><p>Function to calculate the shift, in channels, necessary to align in 
frequency the primary data container with the data container
template in an ongoing accumulation.</p>
<p>&lt;p&gt;You can use an alternate data container by setting buffer.  You
can use an alternate global accumulation buffer by setting accumnum.</p>
<p>&lt;p&gt;If the frame is not set, the one implied by the data header is 
used.  Use &lt;a href=xshift.html&gt;xshift&lt;/a&gt; to align using the current settings of the 
plotters x-axis.</p>
<p>&#64;param accumnum {in}{type=integer}{default=0} accum buffer to use.
Defaults to the primary buffer, 0.  There are 4 buffers total so
this value must be between 0 and 3, inclusive.</p>
<p>&#64;keyword buffer {in}{optional}{type=integer}{default=0} The global 
buffer that will eventually be shifted.  Defaults to the primary
data container (buffer 0).</p>
<p>&#64;keyword frame {in}{optional}{type=string}  The reference frame to
use.  If not supplied, the value implied by the last 4 characters of
the velocity_definition in the ongoing accumulation will be
used.  See &lt;a href=../toolbox/frame_velocity.html&gt;frame_velocity&lt;/a&gt; for a
full list of supported reference frames.</p>
<p>&#64;returns shift, in channels, to be used as argument to shift.
Returns 0.0 on failure.</p>
<p>&#64;examples
&lt;pre&gt;
getps,30
accum             ; accum first spectrum, no alignment needed yet
getps,31
fs = fshift()     ; determine the shift to align scan 31 with scan 30
gshift,fs         ; apply the shift to scan 31
accum             ; and add the result to the accumulator
getps, 32
gshift, fshift()  ; all in one line, shift scan 32 to align with scan 30
accum
ave
&lt;/pre&gt;</p>
<p>&#64;uses &lt;a href=../toolbox/dcfshift.html&gt;dcfshift&lt;/a&gt;</p>
<p>&#64;version $Id;-</p>
</dd></dl>

<dl class="idl pro">
<dt class="sig sig-object idl" id="gshift">
<em class="property"><span class="pre">pro</span></em><span class="sig-name descname"><span class="pre">gshift</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">offset</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">buffer=buffer</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wrap=wrap</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ftol=ftol</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">linear=linear</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">quadratic=quadratic</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lsquadratic=lsquadratic</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">spline=spline</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cubic=cubic</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nowelsh=nowelsh</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nopad=nopad</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ok=ok</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#gshift" title="Link to this definition">#</a></dt>
<dd><p>Procedure to shift data in a GUIDE data buffer by a given 
number of channels.</p>
<p>&lt;p&gt;This uses &lt;a href=../toolbox/dcshift.html&gt;dcshift&lt;/a&gt;.  Please read the documentation for that toolbox 
function for all the details about how shifting of data containers
is implemented.  This documentation is very thin and is primarily
useful as a syntax reminder for the usage procedure.</p>
<p>&lt;p&gt;See &lt;a href=fshift.html&gt;fshift&lt;/a&gt; or &lt;a href=vshift.html&gt;vshift&lt;/a&gt; for examples showing how this is used to 
align spectra prior to averaging.</p>
<p>&#64;param offset {in}{required}{type=floating point} The number of
channels to shift the data (positive shifts things towards higher
channels, negative shifts things towards lower channels).</p>
<p>&#64;keyword buffer {in}{optional}{type=integer} The GUIDE data buffer to
shift.  All shifting is done in place and so the data in this buffer
is modified by this procedure.</p>
<p>&#64;keyword wrap {in}{optional}{type=boolean} Data shifted off one end
of the array appears on the other end of the array (it wraps around
as a result of the shift) when this is set.  Otherwise, as data is
shifted it is blanked (replaced by NaNs) and data shifted off the 
end is lost.</p>
<p>&#64;keyword ftol {in}{optional}{type=floating point}{default=0.01}
Fractional shifts (the non-integer portion of offset) are only done
when they are larger than ftol.  Set this value to &gt;= 1.0 to turn
off all fractional shifts.</p>
<p>&#64;keyword linear {in}{optional}{type=boolean} When set, use the
linear interpolation provided by INTERPOL for any fractional shift
larger than ftol.</p>
<p>&#64;keyword quadratic {in}{optional}{type=boolean} When set, use the
quadratic interpolation provided by INTERPOL for any fractional
shift larger than ftol.</p>
<p>&#64;keyword lsquadratic {in}{optional}{type=boolean} When set, use the
lsquadratic (lest squares quadratic) interpolation provided by
INTERPOL for any fractional shift larger than ftol.</p>
<p>&#64;keyword spline {in}{optional}{type=boolean} When set, use the
spline interpolation provided by INTERPOL for any fractional shift
larger than ftol.</p>
<p>&#64;keyword cubic {in}{optional}{type=boolean} When set, use the cubic
interpolation provided by INTERPOLATE for any fractional shift
larger than ftol.  The value of the CUBIC keyword in the INTERPOLATE
call is set to -0.5.</p>
<p>&#64;keyword nowelsh {in}{optional}{type=boolean} When set, the shifted
data is NOT windowed using the Welsh function.  This is ignored when
a non-FFT-based fraction shift is done</p>
<p>&#64;keyword nopad {in}{optional}{type=boolean} When set, the data is
NOT padded with 0s to the next higher power of 2 prior to the FFT
and shift.  The data are never padded for the non-FFT-based
fractional shifts.</p>
<p>&#64;keyword ok {out}{optional}{type=boolean} This is set to 1 on
success or 0 on failure (e.g. bad arguments).</p>
<p>&#64;examples
&lt;pre&gt;</p>
<blockquote>
<div><p>getps, 30
accum           ; first in, no alignment needed yet
getps, 31
fs = fshift()   ; shift to align in frequency
gshift, fs      ; actually do the shift
accum           ; now it can be added to the accumulation
ave</p>
</div></blockquote>
<p>&lt;/pre&gt;</p>
<p>&#64;uses &lt;a href=../toolbox/dcshift.html&gt;dcshift&lt;/a&gt;
&#64;uses &lt;a href=../toolbox/data_copy.html&gt;data_copy&lt;/a&gt;
&#64;uses &lt;a href=set_data_container.html&gt;set_data_container&lt;/a&gt;
&#64;uses &lt;a href=../toolbox/data_free.html&gt;data_free&lt;/a&gt;</p>
<p>&#64;version $Id;-</p>
</dd></dl>

<dl class="idl pro">
<dt class="sig sig-object idl" id="stats">
<em class="property"><span class="pre">pro</span></em><span class="sig-name descname"><span class="pre">stats</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">brange</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">erange</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">full=full</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">chan=chan</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ret=ret</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">quiet=quiet</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#stats" title="Link to this definition">#</a></dt>
<dd></dd></dl>

<dl class="idl pro">
<dt class="sig sig-object idl" id="recombo">
<em class="property"><span class="pre">pro</span></em><span class="sig-name descname"><span class="pre">recombo</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dn</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">doPrint=doPrint</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#recombo" title="Link to this definition">#</a></dt>
<dd><p>Plot the Oxygen recombination lines for quantum jump of dN.
Defaults to plotting the alpha lines (dN=1).</p>
<p>&lt;p&gt;Originally by Glen Langston, glangsto&#64;nrao.edu</p>
<p>&lt;p&gt;Molecular Formula from Tools of RadioAstronomy, Rolfs and Wilson,
2000, pg 334
&lt;pre&gt;
v_ki = Z^2 R_M ( 1/i^2  - 1/k^2), where R_M = R_infinity/(1 + m/M)
v_ki = R_A     ( 1/i^2  - 1/k^2) (k &gt; i)
&lt;pre&gt;
where for oxygen values (MHz), R_a = 3.28972919E9</p>
<p>&#64;param dn {in}{optional}{type=integer}{default=1} The quantum jump
to calculate (1 is alpha, 2 is beta, etc).
&#64;keyword doPrint {in}{optional}{type=boolean}{default=0} optionally print
the line frequencies.  The printed frequencies are the line
frequencies in the frame being displayed on the plotter.</p>
<dl class="simple">
<dt>&#64;examples</dt><dd><p>recombo,2,/doprint</p>
</dd>
</dl>
<p>&#64;uses &lt;a href=freq.html&gt;freq&lt;/a&gt;
&#64;uses &lt;a href=../toolbox/veltovel.html&gt;veltovel&lt;/a&gt;
&#64;uses &lt;a href=../toolbox/shiftvel.html&gt;shiftvel&lt;/a&gt;
&#64;uses &lt;a href=../toolbox/shiftfreq.html&gt;shiftfreq&lt;/a&gt;
&#64;uses &lt;a href=../toolbox/decode_veldef.html&gt;decode_veldef&lt;/a&gt;
&#64;uses &lt;a href=../plotter/show.html&gt;show&lt;/a&gt;
&#64;uses &lt;a href=../plotter/vline.html&gt;vline&lt;/a&gt;
&#64;uses &lt;a href=../plotter/getstate.html#_getxrange&gt;getxrange&lt;/a&gt;
&#64;uses &lt;a href=../plotter/getstate.html#_getyrange&gt;getyrange&lt;/a&gt;
&#64;uses &lt;a href=../plotter/getstate.html#_getxvoffset&gt;getxvoffset&lt;/a&gt;
&#64;uses &lt;a href=../plotter/getstate.html#_getxunits&gt;getxunits&lt;/a&gt;
&#64;uses &lt;a href=../plotter/getstate.html#_getxoffset&gt;getxoffset&lt;/a&gt;
&#64;uses &lt;a href=../plotter/getstate.html#_getplotterdc&gt;getplotterdc&lt;/a&gt;
&#64;uses textoidl</p>
<p>&#64;version $Id;-</p>
</dd></dl>

<dl class="idl function">
<dt class="sig sig-object idl" id="xshift">
<em class="property"><span class="pre">function</span></em><span class="sig-name descname"><span class="pre">xshift</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">accumnum</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">buffer=buffer</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#xshift" title="Link to this definition">#</a></dt>
<dd><p>This function returns a value that, when given as the argument to
gshift, will shift the primary data container such that it is aligned
in the current displayed x-axis with the data in the 
accumulation buffer.  If there is no ongoing accumulation then this
function returns 0.  The units of the returned value are channels.
The primary data container must be shifted that many channels in
order to align in the current x-axis with the data in the
accumulation buffer.</p>
<p>&lt;p&gt;You can use an alternate data container by setting buffer.  You
can use an alternate global accumulation buffer by setting accumnum.</p>
<p>&#64;param accumnum {in}{type=integer}{default=0} accum buffer to use.
Defaults to the primary buffer, 0.  There are 4 buffers total so
this value must be between 0 and 3, inclusive.</p>
<p>&#64;keyword buffer {in}{optional}{type=integer}{default=0} The data
container that will eventually be shifted.  Defaults to the primary
data container (0).</p>
<p>&#64;returns shift, in channels, to be used as argument to shift.
Returns 0.0 on failure.</p>
<p>&#64;examples
Accumulate several PS scans
&lt;pre&gt;
sclear          ; clear the accumulation
getps, 31       ; get the first scan
freeze          ; turn off auto-update of the plotter</p>
<p>; at this point, set the X-axis units using the plotter GUI</p>
<p>accum           ; add the first spectrum to the accumulator
getps, 32       ; get the next scan, plotter is not auto-updated
gshift,xshift() ; shift to align the spectrum to the accumed spectrum
accum           ; and add it to the accum buffer
unfreeze
ave
&lt;/pre&gt;</p>
<p>&#64;uses &lt;a href=../toolbox/dcxshift.html&gt;dcvshift&lt;/a&gt;</p>
<p>&#64;version $Id;-</p>
</dd></dl>

<dl class="idl pro">
<dt class="sig sig-object idl" id="gettp">
<em class="property"><span class="pre">pro</span></em><span class="sig-name descname"><span class="pre">gettp</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">scan</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ifnum=ifnum</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">intnum=intnum</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plnum=plnum</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fdnum=fdnum</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sampler=sampler</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">eqweight=eqweight</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tcal=tcal</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sig_state=sig_state</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cal_state=cal_state</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wcalpos=wcalpos</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">subref=subref</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">quiet=quiet</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keepints=keepints</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">useflag=useflag</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">skipflag=skipflag</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">instance=instance</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file=file</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timestamp=timestamp</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">status=status</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#gettp" title="Link to this definition">#</a></dt>
<dd></dd></dl>

<dl class="idl pro">
<dt class="sig sig-object idl" id="filein">
<em class="property"><span class="pre">pro</span></em><span class="sig-name descname"><span class="pre">filein</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">new_index=new_index</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#filein" title="Link to this definition">#</a></dt>
<dd><p>Specify the SDFITS file from which data will be read.</p>
<p>&lt;p&gt;In line mode, this sets the line input data file, in continuum
mode, this sets the continuum input data file.  Both files can be
opened at the same time and the mode (line or continuum) determines
where data is retrieved from (e.g. get).  Only one line and one
continuum data source (single file or single directory) can be
opened at the same time.  Use of filein or dirin always first closes
any previously opened line or continuum data file or directory
before opening a new one.</p>
<p>&lt;p&gt;The opened input file or directory name is stored in
!g.line_filein_name (line mode) or !g.cont_filein_name (continuum
mode).</p>
<p>&#64;param file_name {in}{optional}{type=string} The file name to
use.  If omitted, a file selector GUI will appear and you can select
the file to use.  You can not select a directory in that case.  If
the file_name is a directory, the underlying code will recognize
that and it will be as if you had used
&lt;a href=dirin.html&gt;dirin&lt;/a&gt; instead.</p>
<p>&#64;keyword new_index {in}{optional}{type=boolean} When set, a new
index is generated, whether it needed to be or not.  By
default, the io code tries to re-use an existing index unless it is
seen to be out of date.  Regenerating the index file can take some
time, but no information should be lost in the process.  Usually,
the io code can trusted to regenerate the index file only when
necessary.</p>
<p>&#64;examples
&lt;pre&gt;</p>
<blockquote>
<div><dl class="simple">
<dt>filein                          ; Use a GUI to select the </dt><dd><p>; SDFITS file to open</p>
</dd>
</dl>
<p>filein,mydata.fits,/new_index ; force a new index</p>
</div></blockquote>
<p>&lt;/pre&gt;</p>
<p>&#64;uses &lt;a href=../../devel/guide/sdfitsin.html&gt;sdfitsin&lt;/a&gt;</p>
<p>&#64;version $Id;-</p>
</dd></dl>

<dl class="idl pro">
<dt class="sig sig-object idl" id="delete">
<em class="property"><span class="pre">pro</span></em><span class="sig-name descname"><span class="pre">delete</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">index</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#delete" title="Link to this definition">#</a></dt>
<dd><p>Remove specific values from the stack.</p>
<p>&#64;param index {in}{required}{type=integer} The values to be
removed. Any value in the stack that matches a value in this
parameter is removed from the stack.</p>
<p>&#64;examples
&lt;pre&gt;</p>
<blockquote>
<div><p>addstack, 10,30,2
delete, [16,18,20]
tellstack
; result is 
; [ 10, 12, 14, 22, 24, 26, 28, 30]</p>
</div></blockquote>
<p>&lt;/pre&gt;</p>
<p>&#64;version $Id;-</p>
</dd></dl>

<dl class="idl pro">
<dt class="sig sig-object idl" id="ngauss">
<em class="property"><span class="pre">pro</span></em><span class="sig-name descname"><span class="pre">ngauss</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ng</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ngauss" title="Link to this definition">#</a></dt>
<dd><p>Sets the value of !g.gauss.ngauss.  Must set this before fitting
gaussians.  The &lt;a href=fitgauss.html&gt;fitgauss&lt;/a&gt; procedure will set this for you as you mark 
off individual gaussians to be fit.</p>
<p>&#64;param ng {in}{required}{type=integer} The total number of gauss to fit.</p>
<p>&#64;examples
&lt;pre&gt;
; fit three gaussians
ngauss, 3
&lt;/pre&gt;</p>
<p>&#64;version $Id;-</p>
</dd></dl>

<dl class="idl pro">
<dt class="sig sig-object idl" id="boxcar">
<em class="property"><span class="pre">pro</span></em><span class="sig-name descname"><span class="pre">boxcar</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">width</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">buffer=buffer</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">decimate=decimate</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#boxcar" title="Link to this definition">#</a></dt>
<dd><p>Smooth the primary data container (the PDC, !g.s[0]) with a boxcar
of a certain width, in channels.</p>
<p>&lt;p&gt;Replaces the contents of the data being smoothed with the smoothed
data.</p>
<p>&lt;p&gt;For odd width, this uses the built-in idl SMOOTH function.  For
even widths this uses &lt;a href=../toolbox/doboxcar1d.html&gt;doboxcar1d&lt;/a&gt; and the reference channel is 
moved left by 1/2 channel width.</p>
<p>&lt;p&gt;Other buffers (0 to 15) can be used instead of the PDC by
supplying a value for the buffer keyword.</p>
<p>&lt;p&gt;For spectrum data containers, the frequency_resolution is set 
using &lt;a href=estboxres.html&gt;estboxres&lt;/a&gt;</p>
<p>&#64;param width {in}{required}{type=integer} Width of boxcar in
channels.</p>
<p>&#64;keyword buffer {in}{optional}{type=integer}{default=0} global
buffer number to use (0-15).</p>
<p>&#64;keyword decimate {in}{optional}{type=boolean} If set, the data
container is reduced - taking every width channels starting at
channel 0.</p>
<p>&#64;examples
&lt;pre&gt;</p>
<blockquote>
<div><p>getps, 25            ; get some data into the PDC
copy,0,10            ; for use later in this example
copy,0,11            ; also for use later
boxcar, 3            ; 3 channel boxcar smooth
boxcar, 5, buffer=10 ; 5 channel smooth on buffer 10
show,10              ; show the smoothed result
copy,11,0            ; unsmoothed copy back to the PDC
boxcar, 5, /decimate ; with decimation</p>
</div></blockquote>
<p>&lt;/pre&gt;</p>
<p>&#64;uses &lt;a href=../toolbox/doboxcar1d.html&gt;doboxcar1d&lt;/a&gt;
&#64;uses &lt;a href=../toolbox/dcextract.html&gt;dcextract&lt;/a&gt;</p>
<p>&#64;version $Id;-</p>
</dd></dl>

<dl class="idl pro">
<dt class="sig sig-object idl" id="recombh">
<em class="property"><span class="pre">pro</span></em><span class="sig-name descname"><span class="pre">recombh</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dn</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">doPrint=doPrint</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#recombh" title="Link to this definition">#</a></dt>
<dd><p>Plot the Hydrogen recombination lines for quantum jump of dN.
Defaults to plotting the alpha lines (dN=1).</p>
<p>&lt;p&gt;Originally by Glen Langston, glangsto&#64;nrao.edu</p>
<p>&lt;p&gt;Molecular Formula from Tools of RadioAstronomy, Rolfs and Wilson,
2000, pg 334
&lt;pre&gt;
v_ki = Z^2 R_M ( 1/i^2  - 1/k^2), where R_M = R_infinity/(1 + m/M)
v_ki = R_A     ( 1/i^2  - 1/k^2) (k &gt; i)
&lt;pre&gt;
where for hydrogen values (MHz), R_a = 3.28805129E9</p>
<p>&#64;param dn {in}{optional}{type=integer}{default=1} The quantum jump
to calculate (1 is alpha, 2 is beta, etc).
&#64;keyword doPrint {in}{optional}{type=boolean}{default=0} optionally print
the line frequencies.  The printed frequencies are the line
frequencies in the frame being displayed on the plotter.</p>
<dl class="simple">
<dt>&#64;examples</dt><dd><p>recombh,2,/doprint</p>
</dd>
</dl>
<p>&#64;uses &lt;a href=freq.html&gt;freq&lt;/a&gt;
&#64;uses &lt;a href=../toolbox/veltovel.html&gt;veltovel&lt;/a&gt;
&#64;uses &lt;a href=../toolbox/shiftvel.html&gt;shiftvel&lt;/a&gt;
&#64;uses &lt;a href=../toolbox/shiftfreq.html&gt;shiftfreq&lt;/a&gt;
&#64;uses &lt;a href=../toolbox/decode_veldef.html&gt;decode_veldef&lt;/a&gt;
&#64;uses &lt;a href=../plotter/show.html&gt;show&lt;/a&gt;
&#64;uses &lt;a href=../plotter/vline.html&gt;vline&lt;/a&gt;
&#64;uses &lt;a href=../plotter/getstate.html#_getxrange&gt;getxrange&lt;/a&gt;
&#64;uses &lt;a href=../plotter/getstate.html#_getyrange&gt;getyrange&lt;/a&gt;
&#64;uses &lt;a href=../plotter/getstate.html#_getxvoffset&gt;getxvoffset&lt;/a&gt;
&#64;uses &lt;a href=../plotter/getstate.html#_getxunits&gt;getxunits&lt;/a&gt;
&#64;uses &lt;a href=../plotter/getstate.html#_getxoffset&gt;getxoffset&lt;/a&gt;
&#64;uses &lt;a href=../plotter/getstate.html#_getplotterdc&gt;getplotterdc&lt;/a&gt;
&#64;uses textoidl</p>
<p>&#64;version $Id;-</p>
</dd></dl>

<dl class="idl pro">
<dt class="sig sig-object idl" id="showiftab">
<em class="property"><span class="pre">pro</span></em><span class="sig-name descname"><span class="pre">showiftab</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">scan</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keep=keep</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#showiftab" title="Link to this definition">#</a></dt>
<dd><p>Summarize the valid ifnum, fdnum, plnum combinations for a scan.</p>
<p>&#64;param scan {in}{required}{type=integer} Scan number of interest.
&#64;keyword keep {in}{optional}{type=boolean} If set, the summary uses
information from the keep[ file.</p>
<p>&#64;examples
A scan where all combinations of 2 IFs, 8 feeds, and 4 polarization
is present.
&lt;pre&gt;</p>
<p>GBTIDL -&gt; showiftab,35</p>
<blockquote>
<div><p>Scan : 35
ifnum fdnum plnum</p>
<blockquote>
<div><p>0:1   0:7   0:4</p>
</div></blockquote>
</div></blockquote>
<p>&lt;/pre&gt;
In this scan, feed 0 has just plnum 2 for both IFs, feed 1 has just plnum 1
for the same IFs, and feeds 2 through 7 have plnum 0 and 1 for the
second if.
&lt;pre&gt;
GBTIDL -&gt; showiftab,33</p>
<blockquote>
<div><p>Scan : 33
ifnum fdnum plnum</p>
<blockquote>
<div><p>0:1     0     2
0:1     1     1</p>
<blockquote>
<div><p>1   2:7   0:1</p>
</div></blockquote>
</div></blockquote>
</div></blockquote>
<p>&lt;/pre&gt;
&#64;uses &lt;a href=scan_info.html&gt;scan_info&lt;/a&gt;</p>
<p>&#64;version $Id;-</p>
</dd></dl>

<dl class="idl function">
<dt class="sig sig-object idl" id="setArrFmt">
<em class="property"><span class="pre">function</span></em><span class="sig-name descname"><span class="pre">setArrFmt</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">arr</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#setArrFmt" title="Link to this definition">#</a></dt>
<dd><p>Used internally in showiftab</p>
<p>Format an array of <a href="#id225"><span class="problematic" id="id226">*</span></a>num (ifnum, fdnum or plnum) into a string.</p>
<p>Compresses adjacent values into a:b sequence to cover the entire
range.</p>
<p>No internal error checking on the validity of arr.</p>
<p>&#64;param arr {in}{required}{type=integer array} Array to format.
Assumed to be already sorted, without duplicates.
&#64;returns formatted string</p>
<p>&#64;private</p>
</dd></dl>

<dl class="idl pro">
<dt class="sig sig-object idl" id="doiftab">
<em class="property"><span class="pre">pro</span></em><span class="sig-name descname"><span class="pre">doiftab</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">iftab</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">idxstruct</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">idxcount</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#doiftab" title="Link to this definition">#</a></dt>
<dd><p>Process an iftable array returned by scan_info.</p>
<p>Sets idxstruct to be a structure holding one instance of all of the
index values for each quanity (ifnum, plnum, fdnum) and idxcount
indicies of masks for each quantity.  All combinations of the index
values corresponding to the true values (1) for the masks for each
instance in that exist.  The masks and index values are then used to
print out a table summarizing the 3D iftable array.</p>
<p>There is no internal checking on the validity of the input values.</p>
<p>This routine is called recursively, each call sets the current
idxcount entry in idxstruct, increments idxcount, and calls it again
if there remain additional elements in iftable that have not yet
been accounted for in idxstruct.</p>
<p>On return, idxstruct may contain more than idxcount elements, but
only the first ixcount elements should be used.</p>
<p>idxstruct is initialized if idxcount is &lt;= 0.</p>
<p>idxstruct has two fields: indexes and masks.  
idxstruct.indexes has 3 fields: ifnum, fdnum, and plnum.  Each
of which are integer vectors holding the complete set of integer
indexes available for that field (e.g. [0,1,2,3]).  They are here
for convenience. 
idxstruct.masks is an array of structures, each element has 3
fields: ifnum, fdnum, and plnum.  Each of which are
integer vectors where 1 indicates the corresponding index in the
indexes structure is in use for that set of masks and 0 indicates it
is not in use.</p>
<p>&#64;param iftab {in}{required}{type=3D integer array} The iftable
array.  The 3 axes are, in order, ifnum, plnum, and fdnum.  Elements
are 1 when data exists with that combination and 0 if no data exists
for that combination.
&#64;param idxstruct {out}{required}{type=structure} The structure set by
this routine.  Valid through the first idxcount elements of the
masks field.
&#64;param idxcount {out}{required}{type=integer} The current size of
idxstruct already in use.</p>
<p>&#64;private</p>
</dd></dl>

<dl class="idl function">
<dt class="sig sig-object idl" id="compareIndexList">
<em class="property"><span class="pre">function</span></em><span class="sig-name descname"><span class="pre">compareIndexList</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">b</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#compareIndexList" title="Link to this definition">#</a></dt>
<dd><p>Used during the sorting process in showiftab</p>
<p>Compares two vectors of integers (will be vectors
of index values, e.g. ifnum).</p>
<dl>
<dt>Sorting rules are:</dt><dd><p>compare the first element
if equal compare the length</p>
<blockquote>
<div><p>if equal compare the first non-equal element</p>
</div></blockquote>
</dd>
</dl>
<p>&#64;param a {in}{required}{type=integer vector} 
&#64;param b {in}{required}{type=integer vector}
&#64;returns -1 if a&lt;b, 0 if a==b, and 1 if a&gt;b</p>
<p>&#64;private</p>
</dd></dl>

<dl class="idl function">
<dt class="sig sig-object idl" id="compareIndexStructs">
<em class="property"><span class="pre">function</span></em><span class="sig-name descname"><span class="pre">compareIndexStructs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">b</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#compareIndexStructs" title="Link to this definition">#</a></dt>
<dd><p>Used during the sorting process in showiftab</p>
<p>Compares two index structures of ifnum, fdnum, and
plnum fields.</p>
<p>Uses compareIndex list to compare the individual index lists.</p>
<dl class="simple">
<dt>First compares based on ifnum values</dt><dd><dl class="simple">
<dt>if equal, compare based on fdnum values</dt><dd><p>if equal, compare based on plnum values.</p>
</dd>
</dl>
</dd>
</dl>
<p>&#64;param a {in}{required}{type=structure}
&#64;param b {in}{required}{type=structure}
&#64;returns -1 if a&lt;b, 0 if a==b, and 1 if a&gt;b
&#64;private</p>
</dd></dl>

<dl class="idl function">
<dt class="sig sig-object idl" id="sortIndexStruct">
<em class="property"><span class="pre">function</span></em><span class="sig-name descname"><span class="pre">sortIndexStruct</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sortIndexStruct" title="Link to this definition">#</a></dt>
<dd><p>The sort function used by showiftab.</p>
<p>This is a simple sort.  These structures are going to be small so
this should be cheap and the extra effort to code something more
efficient just isnt worth it.</p>
<p>&#64;param a {in}{required}{type=structre} The index structure to sort,
as used by showiftab.
&#64;returns the sorted indexes into a to be used to print the formatted
summaries in a sorted order.
&#64;private</p>
</dd></dl>

<dl class="idl pro">
<dt class="sig sig-object idl" id="kget">
<em class="property"><span class="pre">pro</span></em><span class="sig-name descname"><span class="pre">kget</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">useflag=useflag</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">skipflag=skipflag</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_EXTRA=ex</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#kget" title="Link to this definition">#</a></dt>
<dd><p>Retrieves data from the output data file and places it in the
primary data container (buffer 0).</p>
<p>&lt;p&gt;Use the selection parameters to specify which data to 
retrieve.  If the selection returns more than one data container, 
only the first data container is used. If you need to retrieve one
of the other records you must first refine the selection criteria.
A better approach might be to use &lt;a href=select.html&gt;select&lt;/a&gt; to get the list of 
records that satisfy that selection and then use &lt;a href=kgetrec.html&gt;kgetrec&lt;/a&gt; to get the 
individual records.</p>
<p>&lt;p&gt;Only spectral line data can currently be fetched from a keep file.</p>
<p>&lt;p&gt;&lt;em&gt;Note :&lt;/em&gt; all of the data satisfying the selection criteria
(or lack of criteria if none is given) are extracted from the file
before this routine copies the first one found and puts it into
buffer 0.  There is no protection against running out of memory by
grabbing too much data.</p>
<p>&lt;p&gt;See the output of &lt;a href=listcols.html&gt;listcols&lt;/a&gt; for a complete list of columns 
that can be selected.</p>
<p>&lt;p&gt;See the discussion on Select in the &lt;a href=<a class="reference external" href="http://wwwlocal.gb.nrao.edu/GBT/DA/gbtidl/users_guide/node50.html">http://wwwlocal.gb.nrao.edu/GBT/DA/gbtidl/users_guide/node50.html</a> TARGET=_top&gt;Users Guide&lt;/a&gt; 
for a summary of selection syntax.</p>
<p>&lt;p&gt;The selection criteria are passed directly to the io classs
get_spectra or get_continua function via the _EXTRA parameter. 
&lt;p&gt;
Flags (set via &lt;a href=flag.html&gt;flag&lt;/a&gt;) can be selectively applied or ignored 
using the useflag and skipflag keywords.  Only one of those two
keywords can be used at a time (it is an error to use both at the
same time).  Both can be either a boolean (/useflag or /skipflag) 
or an array of strings.  The default is /useflag, meaning that all
flag rules that have been previously set are applied when the data
is fetched from disk, blanking data as described by each rule.  If
/skipflag is set, then all of the flag rules associated with this
data are ignored and no data will be blanked when fetched from disk
(it may still contain blanked values if the actual values in the
disk file have already been blanked by some other process).  If
useflag is a string or array of strings, then only those flag rules
having the same idstring value are used to blank the data.  If
skipflag is a string or array of strings, then all flag rules except
those with the same idstring value are used to blank the data.</p>
<p>&#64;keyword useflag {in}{optional}{type=boolean or string}{default=true}
Apply all or just some of the flag rules?
&#64;keyword skipflag {in}{optional}{type=boolean or string} Do not apply
any or do not apply a few of the flag rules?
&#64;keyword _EXTRA {in}{optional}{type=extra keywords} These are
selection parameters passed to the data source to limit the amount
of data returned.</p>
<p>&#64;uses &lt;a href=set_data_container.html&gt;set_data_container&lt;/a&gt;
&#64;examples
&lt;pre&gt;</p>
<blockquote>
<div><p>getnod,30
fileout,mysave.fits
keep
getnod, 32
keep
kget,index=0   ; retrieves the first record in the keep file
kget,index=0,/skipflag ; same record, ignore all flags
kget.index=0,useflag=wind ; same record, apply just the wind flag.</p>
</div></blockquote>
<p>&lt;/pre&gt;</p>
<p>&#64;version $Id;-</p>
</dd></dl>

<dl class="idl pro">
<dt class="sig sig-object idl" id="gconvol">
<em class="property"><span class="pre">pro</span></em><span class="sig-name descname"><span class="pre">gconvol</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">kernel</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scale_factor</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">buffer=buffer</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ok=ok</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">normalize=normalize</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_extra=extra_keywords</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#gconvol" title="Link to this definition">#</a></dt>
<dd><p>A GUIDE front-end to the standard IDL CONVOL function.</p>
<p>&lt;p&gt;This allows GUIDE users to convolve a data container with an
arbitrary kernel using the IDL CONVOL function.  All of the
arguments except the dc keyword have the same meaning and use as
in the CONVOL function.  Users should consult the IDL documentation
for CONVOL for a more detailed explanation than is given here.  All
of the CONVOL keywords are passed in through the _EXTRA keyword are
so are not shown explicitly here.  These keywords are &lt;b&gt;/CENTER,
/EDGE_WRAP, /EDGE_TRUNCATE, MISSING, /NAN, and /NORMALIZE&lt;/b&gt;</p>
<p>&lt;p&gt;This procedure follows the GUIDE model and the result of the
convolution replaces the original data values in the indicated data
container.</p>
<p>&lt;p&gt;NORMALIZE was added in IDL 6.2. It is essential when working
with blanked data (NAN).  It is implemented here so that it works
for earlier version of IDL.  For IDL 6.2 and later, /NORMALIZE is passed 
directly to CONVOL.  For earlier versions of IDL, a second 
convolution is done using a vector of 1.0s having the same length as
the data and blanked in the same locations as the data.  The
convolution of the data is then divided by this convolution and the
result is put back into the data container.  BIAS was also added in
IDL 6.2 but that functionality isnt necessary for the rest of
GBTIDL and so it has not been implemented here apart from what
CONVOL provides in IDL 6.2</p>
<p>&#64;param kernel {in}{required}{type=array} The kernel to use in the
convolution.  Must have fewer elements than the data container being
convolved.
&#64;param scale_factor {in}{optional}{type=real}{default=1} The scale factor.
&#64;keyword buffer {in}{optional}{type=integer}{default=0} The data
container buffer to use in the convolution.
&#64;keyword ok {out}{optional}{type=boolean} Returns 1 if everything went
ok, 0 if it did not (empty or invalid buffer, bad kernel).
&#64;keyword normalize {in}{optional}{type=boolean} Set this keyword to  
automatically compute a scale factor and bias and apply it to the result
values. If this keyword is set, the scale_factor argument and the 
BIAS keyword are ignored. For all input types, the scale factor is
defined as the sum of the absolute values of Kernel. If blanked
(NAN) values are present, the scale factor and bias are calculated
without using those values so that all result values are comparable
in magnitude.
&#64;keyword _extra {in}{optional}{type=extra keywords} Keyword
arguments to &lt;b&gt;CONVOL&lt;/b&gt;.  See the IDL documentation on &lt;b&gt;CONVOL&lt;/b&gt;
for more information.</p>
<p>&#64;examples
&lt;pre&gt;</p>
<blockquote>
<div><p>; hanning smoothing kernel
kernel = [0.25,0.5,0.25]
; convolve with the data in the primary data container
gconvol, kernel
; same kernel, using DC 1, ignore NAN (missing) values, 
; truncate the data at the edges, normalize the result.
; This is how the hanning procedure is implemented.
gconvol, kernel, buffer=1, /nan, /edge_truncate, /normalize</p>
</div></blockquote>
<p>&lt;/pre&gt;</p>
<p>&#64;uses &lt;a href=getdata.html&gt;getdata&lt;/a&gt;
&#64;uses &lt;a href=setdata.html&gt;setdata&lt;/a&gt;</p>
<p>&#64;version $Id;-</p>
</dd></dl>

<dl class="idl pro">
<dt class="sig sig-object idl" id="nsave">
<em class="property"><span class="pre">pro</span></em><span class="sig-name descname"><span class="pre">nsave</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">nsave</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">buffer=buffer</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dc=dc</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ok=ok</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#nsave" title="Link to this definition">#</a></dt>
<dd><p>Save a data container to the current fileout with the indicate NSAVE
value.  If the !g.sprotect flag is true and nsave already exists,
then the output file will not be changed and a message to that
effect will be printed out.  Otherwise, if nsave exists it will be
overwritten with the data being saved so that there will only be at
most one instance of each nsave value in any file.  The data can be
recovered by specifying the nsave search parameter.  See the
examples.</p>
<p>&#64;param nsave {in}{required}{type=integer} The output nsave to use
when saving this data.</p>
<p>&#64;keyword buffer {in}{optional}{type=integer}{default=0} The global
buffer number to use when saving to disk.</p>
<p>&#64;keyword dc {in}{optional}{type=data container} A specific data
container to save.  If dc is set, buffer is ignored.</p>
<p>&#64;keyword ok {out}{optional}{type=integer} Optionally return the
exit status of this procedure.  This is 1 on success and 0 on
failure.  This is chiefly useful when used inside another procedure
or function.</p>
<p>&#64;examples
&lt;pre&gt;</p>
<blockquote>
<div><p>getps,10  ; get some data
; do stuff to it
nsave,50  ; its now in nsave=50
; do more stuff to that data, oops, thats no good
; back to previous state
kget,nsave=50</p>
</div></blockquote>
<p>&lt;/pre&gt;</p>
<p>&#64;version $Id;-</p>
</dd></dl>

<dl class="idl pro">
<dt class="sig sig-object idl" id="setfind">
<em class="property"><span class="pre">pro</span></em><span class="sig-name descname"><span class="pre">setfind</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">param</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">val1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">val2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">append=append</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#setfind" title="Link to this definition">#</a></dt>
<dd><p>Set a selection parameter to be used later by &lt;a href=find.html&gt;find&lt;/a&gt;</p>
<p>&lt;p&gt;This sets one of the fields in the structure used by FIND.  There
is one field for each of the possible selection parameters (use
&lt;a href=listcols.html&gt;listcols&lt;/a&gt; to see a list of the available search parameters).  
A single value can be entered as can a range of values.  Or, a
single string can be used here in which case that string is saved as
is to be used by SELECT inside of FIND.  See the discussion on
Find in the 
&lt;a href=<a class="reference external" href="http://wwwlocal.gb.nrao.edu/GBT/DA/gbtidl/users_guide/node51.html">http://wwwlocal.gb.nrao.edu/GBT/DA/gbtidl/users_guide/node51.html</a> TARGET=_top&gt;Users Guide&lt;/a&gt; for selection syntax examples. This
routine can be used to either replace the current selection
parameter value with another (the default behavior) or it can be
used to append more information to the current selection parameter
value.</p>
<p>&lt;p&gt;See &lt;a href=listfind.html&gt;listfind&lt;/a&gt; to show the current value of any of the possible 
selection parameters used by FIND.</p>
<p>&lt;p&gt;&lt;a href=clearfind.html&gt;clearfind&lt;/a&gt; can be used to unset selection parameters used by FIND.</p>
<p>&#64;param param {in}{optional}{type=string} The selection parameter to
set.  If this parameter is omitted, the user is asked to choose
from the list of available parameters and all other parameters (val1
and val2) are ignored.  Min-match is used to find the parameter
to set.  If more than one parameter matches, a warning is printed
and the procedure ends without setting any values. Case is not
important.</p>
<p>&#64;param val1 {in}{optional}{type=appropriate to param} The value that
param is set to.  Any valid selection syntax (strings, integers or
floating point values) is allowed here.  If val2 is also used, then
these two values define  a range and that range is the value that 
the selection parameter is set to.  In that case, val1 and val2 must
not be strings since string selection parameters (e.g. source) do
not allow ranges.  If val1 is a string then val2 is ignored if
supplied and val1 is used as is for the selection parameter.
There is no syntax checking of string values at this step so an
impromperly formed selection string may generate an error later when
FIND is used.  If not supplied, the user is asked for a value.</p>
<p>&#64;param val2 {in}{optional}{type=floating or integer} This is used
with val1 to define a selection range.  If not supplied, only val1
is used and the user is not prompted for val2.</p>
<p>&#64;keyword append {in}{optional}{type=boolean} When set, the selection
parameter value is appended to the existing parameter value for this
parameter.  Otherwise, the existing value is replaced with the new
value.</p>
<p>&#64;examples
See also &lt;a href=find.html&gt;find&lt;/a&gt;</p>
<dl>
<dt>&lt;pre&gt;</dt><dd><dl class="simple">
<dt>setfind  ; a list of parameters is shown, you type one</dt><dd><p>;  then you are asked for a value, no quotes necessary</p>
</dd>
<dt>setfind,scan ; you are asked for one value, the SCAN</dt><dd><p>; selection criteria is set to that value</p>
</dd>
</dl>
<p>setfind,samp,A1 ; sets SAMPLER (min-match) to A1
setfind,int,1,3   ; integrations 1 through 3
setfind,int,4,/append ; oops, forgot about 4
setfind,int,1:3,4 ; equivalent to the previous 2
setfind,restfreq,1420.4e9 ; single precision floating point
setfind,restfreq,1420.4058d9 ; double precision</p>
</dd>
</dl>
<p>&lt;/pre&gt;</p>
<p>Note that nothing happens until you use &lt;a href=find.html&gt;find&lt;/a&gt;</p>
<p>&#64;version $Id;-</p>
</dd></dl>

</section>


                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="scheduling-blocks.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Scheduling Block Commands</p>
      </div>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Green Bank Observatory
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
       Copyright 2023-24, Green Bank Observatory, A. Schmiedeke.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="../../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>